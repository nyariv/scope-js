{"version":3,"file":"Skope.js","sources":["../node_modules/@nyariv/sandboxjs/build/unraw.js","../node_modules/@nyariv/sandboxjs/build/parser.js","../node_modules/@nyariv/sandboxjs/build/executor.js","../node_modules/@nyariv/sandboxjs/build/Sandbox.js","../src/HTMLSanitizer.ts","../src/eQuery.ts","../src/Skope.ts"],"sourcesContent":["/**\n * Parse a string as a base-16 number. This is more strict than `parseInt` as it\n * will not allow any other characters, including (for example) \"+\", \"-\", and\n * \".\".\n * @param hex A string containing a hexadecimal number.\n * @returns The parsed integer, or `NaN` if the string is not a valid hex\n * number.\n */\nfunction parseHexToInt(hex) {\n    const isOnlyHexChars = !hex.match(/[^a-f0-9]/i);\n    return isOnlyHexChars ? parseInt(hex, 16) : NaN;\n}\n/**\n * Check the validity and length of a hexadecimal code and optionally enforces\n * a specific number of hex digits.\n * @param hex The string to validate and parse.\n * @param errorName The name of the error message to throw a `SyntaxError` with\n * if `hex` is invalid. This is used to index `errorMessages`.\n * @param enforcedLength If provided, will throw an error if `hex` is not\n * exactly this many characters.\n * @returns The parsed hex number as a normal number.\n * @throws {SyntaxError} If the code is not valid.\n */\nfunction validateAndParseHex(hex, errorName, enforcedLength) {\n    const parsedHex = parseHexToInt(hex);\n    if (Number.isNaN(parsedHex) ||\n        (enforcedLength !== undefined && enforcedLength !== hex.length)) {\n        throw new SyntaxError(errorName + ': ' + hex);\n    }\n    return parsedHex;\n}\n/**\n * Parse a two-digit hexadecimal character escape code.\n * @param code The two-digit hexadecimal number that represents the character to\n * output.\n * @returns The single character represented by the code.\n * @throws {SyntaxError} If the code is not valid hex or is not the right\n * length.\n */\nfunction parseHexadecimalCode(code) {\n    const parsedCode = validateAndParseHex(code, 'Malformed Hexadecimal', 2);\n    return String.fromCharCode(parsedCode);\n}\n/**\n * Parse a four-digit Unicode character escape code.\n * @param code The four-digit unicode number that represents the character to\n * output.\n * @param surrogateCode Optional four-digit unicode surrogate that represents\n * the other half of the character to output.\n * @returns The single character represented by the code.\n * @throws {SyntaxError} If the codes are not valid hex or are not the right\n * length.\n */\nfunction parseUnicodeCode(code, surrogateCode) {\n    const parsedCode = validateAndParseHex(code, 'Malformed Unicode', 4);\n    if (surrogateCode !== undefined) {\n        const parsedSurrogateCode = validateAndParseHex(surrogateCode, 'Malformed Unicode', 4);\n        return String.fromCharCode(parsedCode, parsedSurrogateCode);\n    }\n    return String.fromCharCode(parsedCode);\n}\n/**\n * Test if the text is surrounded by curly braces (`{}`).\n * @param text Text to check.\n * @returns `true` if the text is in the form `{*}`.\n */\nfunction isCurlyBraced(text) {\n    return text.charAt(0) === \"{\" && text.charAt(text.length - 1) === \"}\";\n}\n/**\n * Parse a Unicode code point character escape code.\n * @param codePoint A unicode escape code point, including the surrounding curly\n * braces.\n * @returns The single character represented by the code.\n * @throws {SyntaxError} If the code is not valid hex or does not have the\n * surrounding curly braces.\n */\nfunction parseUnicodeCodePointCode(codePoint) {\n    if (!isCurlyBraced(codePoint)) {\n        throw new SyntaxError('Malformed Unicode: +' + codePoint);\n    }\n    const withoutBraces = codePoint.slice(1, -1);\n    const parsedCode = validateAndParseHex(withoutBraces, 'Malformed Unicode');\n    try {\n        return String.fromCodePoint(parsedCode);\n    }\n    catch (err) {\n        throw err instanceof RangeError\n            ? new SyntaxError('Code Point Limit:' + parsedCode)\n            : err;\n    }\n}\n/**\n * Map of unescaped letters to their corresponding special JS escape characters.\n * Intentionally does not include characters that map to themselves like \"\\'\".\n */\nconst singleCharacterEscapes = new Map([\n    [\"b\", \"\\b\"],\n    [\"f\", \"\\f\"],\n    [\"n\", \"\\n\"],\n    [\"r\", \"\\r\"],\n    [\"t\", \"\\t\"],\n    [\"v\", \"\\v\"],\n    [\"0\", \"\\0\"]\n]);\n/**\n * Parse a single character escape sequence and return the matching character.\n * If none is matched, defaults to `code`.\n * @param code A single character code.\n */\nfunction parseSingleCharacterCode(code) {\n    return singleCharacterEscapes.get(code) || code;\n}\n/**\n * Matches every escape sequence possible, including invalid ones.\n *\n * All capture groups (described below) are unique (only one will match), except\n * for 4, which can only potentially match if 3 does.\n *\n * **Capture Groups:**\n * 0. A single backslash\n * 1. Hexadecimal code\n * 2. Unicode code point code with surrounding curly braces\n * 3. Unicode escape code with surrogate\n * 4. Surrogate code\n * 5. Unicode escape code without surrogate\n * 6. Octal code _NOTE: includes \"0\"._\n * 7. A single character (will never be \\, x, u, or 0-3)\n */\nconst escapeMatch = /\\\\(?:(\\\\)|x([\\s\\S]{0,2})|u(\\{[^}]*\\}?)|u([\\s\\S]{4})\\\\u([^{][\\s\\S]{0,3})|u([\\s\\S]{0,4})|([0-3]?[0-7]{1,2})|([\\s\\S])|$)/g;\n/**\n * Replace raw escape character strings with their escape characters.\n * @param raw A string where escape characters are represented as raw string\n * values like `\\'` rather than `'`.\n * @param allowOctals If `true`, will process the now-deprecated octal escape\n * sequences (ie, `\\111`).\n * @returns The processed string, with escape characters replaced by their\n * respective actual Unicode characters.\n */\nexport function unraw(raw) {\n    return raw.replace(escapeMatch, function (_, backslash, hex, codePoint, unicodeWithSurrogate, surrogate, unicode, octal, singleCharacter) {\n        // Compare groups to undefined because empty strings mean different errors\n        // Otherwise, `\\u` would fail the same as `\\` which is wrong.\n        if (backslash !== undefined) {\n            return \"\\\\\";\n        }\n        if (hex !== undefined) {\n            return parseHexadecimalCode(hex);\n        }\n        if (codePoint !== undefined) {\n            return parseUnicodeCodePointCode(codePoint);\n        }\n        if (unicodeWithSurrogate !== undefined) {\n            return parseUnicodeCode(unicodeWithSurrogate, surrogate);\n        }\n        if (unicode !== undefined) {\n            return parseUnicodeCode(unicode);\n        }\n        if (octal === \"0\") {\n            return \"\\0\";\n        }\n        if (octal !== undefined) {\n            throw new SyntaxError('Octal Deprecation: ' + octal);\n        }\n        if (singleCharacter !== undefined) {\n            return parseSingleCharacterCode(singleCharacter);\n        }\n        throw new SyntaxError('End of string');\n    });\n}\nexport default unraw;\n","import unraw from \"./unraw.js\";\nlet lispTypes = new Map();\nexport class ParseError extends Error {\n    constructor(message, code) {\n        super(message + \": \" + code.substring(0, 40));\n        this.code = code;\n    }\n}\nexport class Lisp {\n    constructor(obj) {\n        this.op = obj.op;\n        this.a = obj.a;\n        this.b = obj.b;\n    }\n}\nexport class If {\n    constructor(t, f) {\n        this.t = t;\n        this.f = f;\n    }\n}\nexport class KeyVal {\n    constructor(key, val) {\n        this.key = key;\n        this.val = val;\n    }\n}\nexport class SpreadObject {\n    constructor(item) {\n        this.item = item;\n    }\n}\nexport class SpreadArray {\n    constructor(item) {\n        this.item = item;\n    }\n}\nexport const lispArrayKey = {};\nexport function toLispArray(arr) {\n    arr.lisp = lispArrayKey;\n    return arr;\n}\nconst inlineIfElse = /^:/;\nconst elseIf = /^else(?![\\w\\$])/;\nconst ifElse = /^if(?![\\w\\$])/;\nconst space = /^\\s/;\nexport let expectTypes = {\n    splitter: {\n        types: {\n            opHigh: /^(\\/|\\*\\*|\\*(?!\\*)|\\%)(?!\\=)/,\n            op: /^(\\+(?!(\\+))|\\-(?!(\\-)))(?!\\=)/,\n            comparitor: /^(<=|>=|<(?!<)|>(?!>)|!==|!=(?!\\=)|===|==)/,\n            boolOp: /^(&&|\\|\\||instanceof(?![\\w\\$])|in(?![\\w\\$]))/,\n            bitwise: /^(&(?!&)|\\|(?!\\|)|\\^|<<|>>(?!>)|>>>)(?!\\=)/,\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    inlineIf: {\n        types: {\n            inlineIf: /^\\?(?!\\.(?!\\d))/,\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    assignment: {\n        types: {\n            assignModify: /^(\\-=|\\+=|\\/=|\\*\\*=|\\*=|%=|\\^=|\\&=|\\|=|>>>=|>>=|<<=)/,\n            assign: /^(=)(?!=)/\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    incrementerBefore: {\n        types: { incrementerBefore: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'prop',\n        ]\n    },\n    expEdge: {\n        types: {\n            call: /^(\\?\\.)?[\\(]/,\n            incrementerAfter: /^(\\+\\+|\\-\\-)/\n        },\n        next: [\n            'splitter',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    modifier: {\n        types: {\n            not: /^!/,\n            inverse: /^~/,\n            negative: /^\\-(?!\\-)/,\n            positive: /^\\+(?!\\+)/,\n            typeof: /^typeof(?![\\w\\$])/,\n            delete: /^delete(?![\\w\\$])/,\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    dot: {\n        types: {\n            arrayProp: /^(\\?\\.)?\\[/,\n            dot: /^(\\?)?\\.(?=\\s*[a-zA-Z\\$\\_])/,\n        },\n        next: [\n            'splitter',\n            'assignment',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    prop: {\n        types: {\n            prop: /^[a-zA-Z\\$\\_][a-zA-Z\\d\\$\\_]*/,\n        },\n        next: [\n            'splitter',\n            'assignment',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    value: {\n        types: {\n            createObject: /^\\{/,\n            createArray: /^\\[/,\n            number: /^(0x[\\da-f]+(_[\\da-f]+)*|(\\d+(_\\d+)*(\\.\\d+(_\\d+)*)?|\\.\\d+(_\\d+)*))(e[\\+\\-]?\\d+(_\\d+)*)?(n)?(?!\\d)/i,\n            string: /^\"(\\d+)\"/,\n            literal: /^`(\\d+)`/,\n            regex: /^\\/(\\d+)\\/r(?![\\w\\$])/,\n            boolean: /^(true|false)(?![\\w\\$])/,\n            null: /^null(?![\\w\\$])/,\n            und: /^undefined(?![\\w\\$])/,\n            arrowFunctionSingle: /^(async\\s+)?([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*=>\\s*({)?/,\n            arrowFunction: /^(async\\s*)?\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*=>\\s*({)?/,\n            inlineFunction: /^(async\\s+)?function(\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)?\\s*\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*{/,\n            group: /^\\(/,\n            NaN: /^NaN(?![\\w\\$])/,\n            Infinity: /^Infinity(?![\\w\\$])/,\n            void: /^void(?![\\w\\$])\\s*/,\n            await: /^await(?![\\w\\$])\\s*/,\n            new: /^new(?![\\w\\$])\\s*/,\n            throw: /^throw(?![\\w\\$])\\s*/\n        },\n        next: [\n            'splitter',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    initialize: {\n        types: {\n            initialize: /^(var|let|const)\\s+([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*(=)?/,\n            return: /^return(?![\\w\\$])/,\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    },\n    spreadObject: {\n        types: {\n            spreadObject: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'prop',\n        ]\n    },\n    spreadArray: {\n        types: {\n            spreadArray: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'prop',\n        ]\n    },\n    expEnd: { types: {}, next: [] },\n    expFunction: {\n        types: {\n            function: /^(async\\s+)?function(\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*{/,\n        },\n        next: [\n            'expEdge',\n            'expEnd'\n        ]\n    },\n    expSingle: {\n        types: {\n            for: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*for\\s*\\(/,\n            do: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*do(?![\\w\\$])\\s*(\\{)?/,\n            while: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*while\\s*\\(/,\n            loopAction: /^(break|continue)(?![\\w\\$])\\s*([a-zA-Z\\$\\_][\\w\\$]*)?/,\n            if: /^((([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*)if\\s*\\(/,\n            try: /^try\\s*{/,\n            block: /^{/,\n            switch: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*switch\\s*\\(/,\n        },\n        next: [\n            'expEnd'\n        ]\n    }\n};\nlet closings = {\n    \"(\": \")\",\n    \"[\": \"]\",\n    \"{\": \"}\",\n    \"'\": \"'\",\n    '\"': '\"',\n    \"`\": \"`\"\n};\nexport function testMultiple(str, tests) {\n    let found;\n    for (let i = 0; i < tests.length; i++) {\n        const test = tests[i];\n        found = test.exec(str);\n        if (found)\n            break;\n    }\n    return found;\n}\nexport class CodeString {\n    constructor(str) {\n        this.ref = { str: \"\" };\n        if (str instanceof CodeString) {\n            this.ref = str.ref;\n            this.start = str.start;\n            this.end = str.end;\n        }\n        else {\n            this.ref.str = str;\n            this.start = 0;\n            this.end = str.length;\n        }\n    }\n    substring(start, end) {\n        if (!this.length)\n            return this;\n        start = this.start + start;\n        if (start < 0) {\n            start = 0;\n        }\n        if (start > this.end) {\n            start = this.end;\n        }\n        end = end === undefined ? this.end : this.start + end;\n        if (end < 0) {\n            end = 0;\n        }\n        if (end > this.end) {\n            end = this.end;\n        }\n        const code = new CodeString(this);\n        code.start = start;\n        code.end = end;\n        return code;\n    }\n    get length() {\n        const len = this.end - this.start;\n        return len < 0 ? 0 : len;\n    }\n    char(i) {\n        if (this.start === this.end)\n            return undefined;\n        return this.ref.str[this.start + i];\n    }\n    toString() {\n        return this.ref.str.substring(this.start, this.end);\n    }\n    trimStart() {\n        const found = /^\\s+/.exec(this.toString());\n        const code = new CodeString(this);\n        if (found) {\n            code.start += found[0].length;\n        }\n        return code;\n    }\n    slice(start, end) {\n        if (start < 0) {\n            start = this.end - this.start + start;\n        }\n        if (start < 0) {\n            start = 0;\n        }\n        if (end === undefined) {\n            end = this.end - this.start;\n        }\n        if (end < 0) {\n            end = this.end - this.start + end;\n        }\n        if (end < 0) {\n            end = 0;\n        }\n        return this.substring(start, end);\n    }\n    trim() {\n        const code = this.trimStart();\n        const found = /\\s+$/.exec(code.toString());\n        if (found) {\n            code.end -= found[0].length;\n        }\n        return code;\n    }\n    valueOf() {\n        return this.toString();\n    }\n}\nconst emptyString = new CodeString(\"\");\nconst okFirstChars = /^[\\+\\-~ !]/;\nconst aChar = /^[\\w\\$]/;\nconst aNumber = expectTypes.value.types.number;\nconst wordReg = /^((if|for|else|while|do|function)(?![\\w\\$])|[\\w\\$]+)/;\nconst semiColon = /^;/;\nconst insertedSemicolons = new WeakMap();\nconst quoteCache = new WeakMap();\nexport function restOfExp(constants, part, tests, quote, firstOpening, closingsTests, details = {}) {\n    if (!part.length) {\n        return part;\n    }\n    details.words = details.words || [];\n    let isStart = true;\n    tests = tests || [];\n    const hasSemiTest = tests.includes(semiColon);\n    if (hasSemiTest) {\n        tests = tests.filter((a) => a !== semiColon);\n    }\n    const insertedSemis = insertedSemicolons.get(part.ref) || [];\n    const cache = quoteCache.get(part.ref) || new Map();\n    quoteCache.set(part.ref, cache);\n    if (quote && cache.has(part.start - 1)) {\n        return part.substring(0, cache.get(part.start - 1) - part.start);\n    }\n    let escape = false;\n    let done = false;\n    let lastChar = \"\";\n    let isOneLiner = false;\n    let i;\n    let lastInertedSemi = false;\n    for (i = 0; i < part.length && !done; i++) {\n        let char = part.char(i);\n        if (quote === '\"' || quote === \"'\" || quote === \"`\") {\n            if (quote === \"`\" && char === \"$\" && part.char(i + 1) === \"{\" && !escape) {\n                let skip = restOfExp(constants, part.substring(i + 2), [], \"{\");\n                i += skip.length + 2;\n            }\n            else if (char === quote && !escape) {\n                return part.substring(0, i);\n            }\n            escape = !escape && char === \"\\\\\";\n        }\n        else if (closings[char]) {\n            if (!lastInertedSemi && insertedSemis[i + part.start]) {\n                lastInertedSemi = true;\n                if (hasSemiTest) {\n                    break;\n                }\n                i--;\n                lastChar = ';';\n                continue;\n            }\n            if (isOneLiner && char === \"{\") {\n                isOneLiner = false;\n            }\n            if (char === firstOpening) {\n                done = true;\n                break;\n            }\n            else {\n                let skip = restOfExp(constants, part.substring(i + 1), [], char);\n                cache.set(skip.start - 1, skip.end);\n                i += skip.length + 1;\n                isStart = false;\n                if (closingsTests) {\n                    let sub = part.substring(i);\n                    let found;\n                    if (found = testMultiple(sub.toString(), closingsTests)) {\n                        details.regRes = found;\n                        done = true;\n                    }\n                }\n            }\n        }\n        else if (!quote) {\n            let sub = part.substring(i).toString();\n            let foundWord;\n            let foundNumber;\n            if (closingsTests) {\n                let found;\n                if (found = testMultiple(sub, closingsTests)) {\n                    details.regRes = found;\n                    i++;\n                    done = true;\n                    break;\n                }\n            }\n            if (foundNumber = aNumber.exec(sub)) {\n                i += foundNumber[0].length - 1;\n                sub = part.substring(i).toString();\n            }\n            else if (lastChar != char) {\n                let found;\n                if (char === ';' || (insertedSemis[i + part.start] && !isStart && !lastInertedSemi)) {\n                    if (hasSemiTest) {\n                        found = [\";\"];\n                    }\n                    else if (insertedSemis[i + part.start]) {\n                        lastInertedSemi = true;\n                        i--;\n                        lastChar = ';';\n                        continue;\n                    }\n                    char = sub = ';';\n                }\n                else {\n                    lastInertedSemi = false;\n                }\n                if (!found) {\n                    found = testMultiple(sub, tests);\n                }\n                if (found) {\n                    done = true;\n                }\n                if (!done && (foundWord = wordReg.exec(sub))) {\n                    isOneLiner = true;\n                    if (foundWord[0].length > 1) {\n                        details.words.push(foundWord[1]);\n                        details.lastAnyWord = foundWord[1];\n                        if (foundWord[2]) {\n                            details.lastWord = foundWord[2];\n                        }\n                    }\n                    if (foundWord[0].length > 2) {\n                        i += foundWord[0].length - 2;\n                    }\n                }\n            }\n            if (isStart) {\n                if (okFirstChars.test(sub)) {\n                    done = false;\n                }\n                else {\n                    isStart = false;\n                }\n            }\n            if (done)\n                break;\n        }\n        else if (char === closings[quote]) {\n            return part.substring(0, i);\n        }\n        lastChar = char;\n    }\n    if (quote) {\n        throw new SyntaxError(\"Unclosed '\" + quote + \"'\");\n    }\n    if (details) {\n        details.oneliner = isOneLiner;\n    }\n    return part.substring(0, i);\n}\nrestOfExp.next = [\n    'splitter',\n    'expEnd',\n    'inlineIf'\n];\nconst startingExecpted = ['initialize', 'expSingle', 'expFunction', 'value', 'modifier', 'prop', 'incrementerBefore', 'expEnd'];\nexport const setLispType = (types, fn) => {\n    types.forEach((type) => {\n        lispTypes.set(type, fn);\n    });\n};\nconst closingsCreate = {\n    'createArray': /^\\]/,\n    'createObject': /^\\}/,\n    'group': /^\\)/,\n    'arrayProp': /^\\]/,\n    'call': /^\\)/\n};\nsetLispType(['createArray', 'createObject', 'group', 'arrayProp', 'call'], (constants, type, part, res, expect, ctx) => {\n    let extract = emptyString;\n    let arg = [];\n    let end = false;\n    let i = res[0].length;\n    const start = i;\n    while (i < part.length && !end) {\n        extract = restOfExp(constants, part.substring(i), [\n            closingsCreate[type],\n            /^,/\n        ]);\n        i += extract.length;\n        if (extract.length) {\n            arg.push(extract);\n        }\n        if (part.char(i) !== ',') {\n            end = true;\n        }\n        else {\n            i++;\n        }\n    }\n    const next = ['value', 'modifier', 'prop', 'incrementerBefore', 'expEnd'];\n    let l;\n    let funcFound;\n    switch (type) {\n        case 'group':\n        case 'arrayProp':\n            l = lispifyExpr(constants, part.substring(start, i));\n            break;\n        case 'call':\n        case 'createArray':\n            // @TODO: support 'empty' values\n            l = toLispArray(arg.map((e) => lispify(constants, e, [...next, 'spreadArray'])));\n            break;\n        case 'createObject':\n            l = toLispArray(arg.map((str) => {\n                str = str.trimStart();\n                let value;\n                let key;\n                funcFound = expectTypes.expFunction.types.function.exec('function ' + str);\n                if (funcFound) {\n                    key = funcFound[2].trimStart();\n                    value = lispify(constants, new CodeString('function ' + str.toString().replace(key, \"\")));\n                }\n                else {\n                    let extract = restOfExp(constants, str, [/^:/]);\n                    key = lispify(constants, extract, [...next, 'spreadObject']);\n                    if (key instanceof Lisp && key.op === 'prop') {\n                        key = key.b;\n                    }\n                    if (extract.length === str.length)\n                        return key;\n                    value = lispify(constants, str.substring(extract.length + 1));\n                }\n                return new Lisp({\n                    op: 'keyVal',\n                    a: key,\n                    b: value\n                });\n            }));\n            break;\n    }\n    type = type === 'arrayProp' ? (res[1] ? '?prop' : 'prop') : (type === 'call' ? (res[1] ? '?call' : 'call') : type);\n    ctx.lispTree = lispify(constants, part.substring(i + 1), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: ctx.lispTree,\n        b: l,\n    }));\n});\nsetLispType(['inverse', 'not', 'negative', 'positive', 'typeof', 'delete'], (constants, type, part, res, expect, ctx) => {\n    let extract = restOfExp(constants, part.substring(res[0].length), [/^[^\\s\\.\\w\\$]/]);\n    ctx.lispTree = lispify(constants, part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: ['positive', 'negative'].includes(type) ? '$' + res[0] : res[0],\n        a: ctx.lispTree,\n        b: lispify(constants, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerBefore'], (constants, type, part, res, expect, ctx) => {\n    let extract = restOfExp(constants, part.substring(2), [/^[^\\s\\.\\w\\$]/]);\n    ctx.lispTree = lispify(constants, part.substring(extract.length + 2), restOfExp.next, new Lisp({\n        op: res[0] + \"$\",\n        a: lispify(constants, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerAfter'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: \"$\" + res[0],\n        a: ctx.lispTree,\n    }));\n});\nsetLispType(['assign', 'assignModify', 'boolOp'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(constants, part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['opHigh', 'op', 'comparitor', 'bitwise'], (constants, type, part, res, expect, ctx) => {\n    const next = [\n        expectTypes.inlineIf.types.inlineIf,\n        inlineIfElse\n    ];\n    switch (type) {\n        case 'opHigh':\n            next.push(expectTypes.splitter.types.opHigh);\n        case 'op':\n            next.push(expectTypes.splitter.types.op);\n        case 'comparitor':\n            next.push(expectTypes.splitter.types.comparitor);\n        case 'bitwise':\n            next.push(expectTypes.splitter.types.bitwise);\n            next.push(expectTypes.splitter.types.boolOp);\n    }\n    let extract = restOfExp(constants, part.substring(res[0].length), next);\n    ctx.lispTree = lispify(constants, part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(constants, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['inlineIf'], (constants, type, part, res, expect, ctx) => {\n    let found = false;\n    let extract = part.substring(0, 0);\n    let quoteCount = 1;\n    while (!found && extract.length < part.length) {\n        extract.end = restOfExp(constants, part.substring(extract.length + 1), [\n            expectTypes.inlineIf.types.inlineIf,\n            inlineIfElse\n        ]).end;\n        if (part.char(extract.length) === '?') {\n            quoteCount++;\n        }\n        else {\n            quoteCount--;\n        }\n        if (!quoteCount) {\n            found = true;\n        }\n    }\n    extract.start = part.start + 1;\n    ctx.lispTree = new Lisp({\n        op: '?',\n        a: ctx.lispTree,\n        b: new Lisp({\n            op: ':',\n            a: lispifyExpr(constants, extract),\n            b: lispifyExpr(constants, part.substring(res[0].length + extract.length + 1))\n        })\n    });\n});\nfunction extractIfElse(constants, part) {\n    var _a;\n    let count = 0;\n    let found = part.substring(0, 0);\n    let foundElse = emptyString;\n    let foundTrue;\n    let first = true;\n    let elseReg;\n    let details = {};\n    while ((found = restOfExp(constants, part.substring(found.end - part.start), [elseIf, ifElse, semiColon], undefined, undefined, undefined, details)).length || first) {\n        first = false;\n        const f = part.substring(found.end - part.start).toString();\n        if (f.startsWith(\"if\")) {\n            found.end++;\n            count++;\n        }\n        else if (f.startsWith('else')) {\n            foundTrue = part.substring(0, found.end - part.start);\n            found.end++;\n            count--;\n            if (!count) {\n                found.end--;\n            }\n        }\n        else if (elseReg = /^;?\\s*else(?![\\w\\$])/.exec(f)) {\n            foundTrue = part.substring(0, found.end - part.start);\n            found.end += elseReg[0].length - 1;\n            count--;\n            if (!count) {\n                found.end -= elseReg[0].length - 1;\n            }\n        }\n        else {\n            foundTrue = foundElse.length ? foundTrue : part.substring(0, found.end - part.start);\n            break;\n        }\n        if (!count) {\n            let ie = extractIfElse(constants, part.substring(found.end - part.start + ((_a = /^;?\\s*else(?![\\w\\$])/.exec(f)) === null || _a === void 0 ? void 0 : _a[0].length)));\n            foundElse = ie.all;\n            break;\n        }\n        details = {};\n    }\n    foundTrue = foundTrue || part.substring(0, found.end - part.start);\n    return { all: part.substring(0, Math.max(foundTrue.end, foundElse.end) - part.start), true: foundTrue, false: foundElse };\n}\nsetLispType(['if'], (constants, type, part, res, expect, ctx) => {\n    let condition = restOfExp(constants, part.substring(res[0].length), [], \"(\");\n    const ie = extractIfElse(constants, part.substring(res[1].length));\n    const isBlock = /^\\s*\\{/.exec(part.substring(res[0].length + condition.length + 1).toString());\n    const startTrue = res[0].length - res[1].length + condition.length + 1;\n    let trueBlock = ie.true.substring(startTrue);\n    let elseBlock = ie.false;\n    condition = condition.trim();\n    trueBlock = trueBlock.trim();\n    elseBlock = elseBlock.trim();\n    if (trueBlock.char(0) === \"{\")\n        trueBlock = trueBlock.slice(1, -1);\n    if (elseBlock.char(0) === \"{\")\n        elseBlock = elseBlock.slice(1, -1);\n    ctx.lispTree = new Lisp({\n        op: 'if',\n        a: lispifyExpr(constants, condition),\n        b: new If(lispifyBlock(trueBlock, constants), elseBlock.length ? lispifyBlock(elseBlock, constants) : undefined)\n    });\n});\nsetLispType(['switch'], (constants, type, part, res, expect, ctx) => {\n    const test = restOfExp(constants, part.substring(res[0].length), [], \"(\");\n    let start = part.toString().indexOf(\"{\", res[0].length + test.length + 1);\n    if (start === -1)\n        throw new SyntaxError(\"Invalid switch\");\n    let statement = insertSemicolons(constants, restOfExp(constants, part.substring(start + 1), [], \"{\"));\n    let caseFound;\n    const caseTest = /^\\s*(case\\s|default)\\s*/;\n    let cases = [];\n    let defaultFound = false;\n    while (caseFound = caseTest.exec(statement.toString())) {\n        if (caseFound[1] === 'default') {\n            if (defaultFound)\n                throw new SyntaxError(\"Only one default switch case allowed\");\n            defaultFound = true;\n        }\n        let cond = restOfExp(constants, statement.substring(caseFound[0].length), [/^:/]);\n        let found = emptyString;\n        let i = start = caseFound[0].length + cond.length + 1;\n        let bracketFound = /^\\s*\\{/.exec(statement.substring(i).toString());\n        let exprs = [];\n        if (bracketFound) {\n            i += bracketFound[0].length;\n            found = restOfExp(constants, statement.substring(i), [], \"{\");\n            i += found.length + 1;\n            exprs = lispifyBlock(found, constants);\n        }\n        else {\n            let notEmpty = restOfExp(constants, statement.substring(i), [caseTest]);\n            if (!notEmpty.trim().length) {\n                exprs = [];\n                i += notEmpty.length;\n            }\n            else {\n                while ((found = restOfExp(constants, statement.substring(i), [semiColon])).length) {\n                    i += found.length + (statement.char(i + found.length) === ';' ? 1 : 0);\n                    if (caseTest.test(statement.substring(i).toString())) {\n                        break;\n                    }\n                }\n                exprs = lispifyBlock(statement.substring(start, found.end - statement.start), constants);\n            }\n        }\n        statement = statement.substring(i);\n        cases.push(new Lisp({\n            op: \"case\",\n            a: caseFound[1] === \"default\" ? undefined : lispifyExpr(constants, cond),\n            b: toLispArray(exprs)\n        }));\n    }\n    ctx.lispTree = new Lisp({\n        op: 'switch',\n        a: lispifyExpr(constants, test),\n        b: toLispArray(cases)\n    });\n});\nsetLispType(['dot', 'prop'], (constants, type, part, res, expect, ctx) => {\n    let prop = res[0];\n    let index = res[0].length;\n    let op = 'prop';\n    if (type === 'dot') {\n        if (res[1]) {\n            op = '?prop';\n        }\n        let matches = part.substring(res[0].length).toString().match(expectTypes.prop.types.prop);\n        if (matches && matches.length) {\n            prop = matches[0];\n            index = prop.length + res[0].length;\n        }\n        else {\n            throw new SyntaxError('Hanging  dot');\n        }\n    }\n    ctx.lispTree = lispify(constants, part.substring(index), expectTypes[expect].next, new Lisp({\n        op: op,\n        a: ctx.lispTree,\n        b: prop\n    }));\n});\nsetLispType(['spreadArray', 'spreadObject'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispify(constants, part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['return', 'throw'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispifyExpr(constants, part.substring(res[0].length))\n    });\n});\nconst primitives = {\n    \"true\": true,\n    \"false\": false,\n    \"null\": null,\n    Infinity,\n    NaN,\n    \"und\": undefined\n};\nsetLispType(['number', 'boolean', 'null', 'und', 'NaN', 'Infinity'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, type === \"number\" ? (res[10] ? BigInt(res[1]) : Number(res[0])) : primitives[type === \"boolean\" ? res[0] : type]);\n});\nsetLispType(['string', 'literal', 'regex'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: type,\n        b: parseInt(JSON.parse(res[1]), 10),\n    }));\n});\nsetLispType(['initialize'], (constants, type, part, res, expect, ctx) => {\n    if (!res[3]) {\n        ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n            op: res[1],\n            a: res[2]\n        }));\n    }\n    else {\n        ctx.lispTree = new Lisp({\n            op: res[1],\n            a: res[2],\n            b: lispify(constants, part.substring(res[0].length), expectTypes[expect].next)\n        });\n    }\n});\nsetLispType(['function', 'inlineFunction', 'arrowFunction', 'arrowFunctionSingle'], (constants, type, part, res, expect, ctx) => {\n    const isArrow = type !== 'function' && type !== 'inlineFunction';\n    const isReturn = isArrow && !res[res.length - 1];\n    const argPos = isArrow ? 2 : 3;\n    const isAsync = !!res[1];\n    const args = res[argPos] ? res[argPos].replace(/\\s+/g, \"\").split(/,/g) : [];\n    if (!isArrow) {\n        args.unshift((res[2] || \"\").trimStart());\n    }\n    let ended = false;\n    args.forEach((arg) => {\n        if (ended)\n            throw new SyntaxError('Rest parameter must be last formal parameter');\n        if (arg.startsWith('...'))\n            ended = true;\n    });\n    args.unshift(isAsync);\n    const f = restOfExp(constants, part.substring(res[0].length), !isReturn ? [/^}/] : [/^[,\\)\\}\\]]/, semiColon]);\n    const func = (isReturn ? 'return ' + f : f);\n    ctx.lispTree = lispify(constants, part.substring(res[0].length + func.length + 1), expectTypes[expect].next, new Lisp({\n        op: isArrow ? 'arrowFunc' : type,\n        a: toLispArray(args),\n        b: constants.eager ? lispifyFunction(new CodeString(func), constants) : func\n    }));\n});\nconst iteratorRegex = /^((let|var|const)\\s+)?\\s*([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s+(in|of)(?![\\w\\$])/;\nsetLispType(['for', 'do', 'while'], (constants, type, part, res, expect, ctx) => {\n    let i = 0;\n    let startStep = true;\n    let startInternal = toLispArray([]);\n    let getIterator;\n    let beforeStep = false;\n    let checkFirst = true;\n    let condition;\n    let step = true;\n    let body;\n    switch (type) {\n        case 'while':\n            i = part.toString().indexOf(\"(\") + 1;\n            let extract = restOfExp(constants, part.substring(i), [], \"(\");\n            condition = lispifyReturnExpr(constants, extract);\n            body = restOfExp(constants, part.substring(i + extract.length + 1)).trim();\n            if (body[0] === \"{\")\n                body = body.slice(1, -1);\n            break;\n        case 'for':\n            i = part.toString().indexOf(\"(\") + 1;\n            let args = [];\n            let extract2 = emptyString;\n            for (let k = 0; k < 3; k++) {\n                extract2 = restOfExp(constants, part.substring(i), [/^[;\\)]/]);\n                args.push(extract2.trim());\n                i += extract2.length + 1;\n                if (part.char(i - 1) === \")\")\n                    break;\n            }\n            let iterator;\n            if (args.length === 1 && (iterator = iteratorRegex.exec(args[0].toString()))) {\n                if (iterator[4] === 'of') {\n                    getIterator = lispifyReturnExpr(constants, args[0].substring(iterator[0].length)),\n                        startInternal = toLispArray([\n                            ofStart2,\n                            ofStart3\n                        ]);\n                    condition = ofCondition;\n                    step = ofStep;\n                    beforeStep = lispify(constants, new CodeString((iterator[1] || 'let ') + iterator[3] + ' = $$next.value'), ['initialize']);\n                }\n                else {\n                    getIterator = lispifyReturnExpr(constants, args[0].substring(iterator[0].length)),\n                        startInternal = toLispArray([\n                            inStart2,\n                            inStart3\n                        ]);\n                    step = inStep;\n                    condition = inCondition;\n                    beforeStep = lispify(constants, new CodeString((iterator[1] || 'let ') + iterator[3] + ' = $$keys[$$keyIndex]'), ['initialize']);\n                }\n            }\n            else if (args.length === 3) {\n                startStep = lispifyExpr(constants, args.shift(), startingExecpted);\n                condition = lispifyReturnExpr(constants, args.shift());\n                step = lispifyExpr(constants, args.shift());\n            }\n            else {\n                throw new SyntaxError(\"Invalid for loop definition\");\n            }\n            body = restOfExp(constants, part.substring(i)).trim();\n            if (body[0] === \"{\")\n                body = body.slice(1, -1);\n            break;\n        case 'do':\n            checkFirst = false;\n            const isBlock = !!res[3];\n            body = restOfExp(constants, part.substring(res[0].length), isBlock ? [/^\\}/] : [semiColon]);\n            condition = lispifyReturnExpr(constants, restOfExp(constants, part.substring(part.toString().indexOf(\"(\", res[0].length + body.length) + 1), [], \"(\"));\n            break;\n    }\n    const a = toLispArray([checkFirst, startInternal, getIterator, startStep, step, condition, beforeStep]);\n    ctx.lispTree = new Lisp({\n        op: 'loop',\n        a,\n        b: lispifyBlock(body, constants)\n    });\n});\nsetLispType(['block'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispifyBlock(restOfExp(constants, part.substring(1), [], \"{\"), constants);\n});\nsetLispType(['loopAction'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: 'loopAction',\n        a: res[1],\n    });\n});\nconst catchReg = /^\\s*(catch\\s*(\\(\\s*([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*\\))?|finally)\\s*\\{/;\nsetLispType(['try'], (constants, type, part, res, expect, ctx) => {\n    const body = restOfExp(constants, part.substring(res[0].length), [], \"{\");\n    let catchRes = catchReg.exec(part.substring(res[0].length + body.length + 1).toString());\n    let finallyBody;\n    let exception;\n    let catchBody;\n    let offset = 0;\n    if (catchRes[1].startsWith('catch')) {\n        catchRes = catchReg.exec(part.substring(res[0].length + body.length + 1).toString());\n        exception = catchRes[2];\n        catchBody = restOfExp(constants, part.substring(res[0].length + body.length + 1 + catchRes[0].length), [], \"{\");\n        offset = res[0].length + body.length + 1 + catchRes[0].length + catchBody.length + 1;\n        if ((catchRes = catchReg.exec(part.substring(offset).toString())) && catchRes[1].startsWith('finally')) {\n            finallyBody = restOfExp(constants, part.substring(offset + catchRes[0].length), [], \"{\");\n        }\n    }\n    else {\n        finallyBody = restOfExp(constants, part.substring(res[0].length + body.length + 1 + catchRes[0].length), [], \"{\");\n    }\n    const b = toLispArray([\n        exception,\n        lispifyBlock(insertSemicolons(constants, catchBody || emptyString), constants),\n        lispifyBlock(insertSemicolons(constants, finallyBody || emptyString), constants),\n    ]);\n    ctx.lispTree = new Lisp({\n        op: 'try',\n        a: lispifyBlock(insertSemicolons(constants, body), constants),\n        b\n    });\n});\nsetLispType(['void', 'await'], (constants, type, part, res, expect, ctx) => {\n    const extract = restOfExp(constants, part.substring(res[0].length), [/^[^\\s\\.\\w\\$]/]);\n    ctx.lispTree = lispify(constants, part.substring(res[0].length + extract.length), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: lispify(constants, extract),\n    }));\n});\nsetLispType(['new'], (constants, type, part, res, expect, ctx) => {\n    let i = res[0].length;\n    const obj = restOfExp(constants, part.substring(i), [], undefined, \"(\");\n    i += obj.length + 1;\n    const args = [];\n    if (part.char(i - 1) === \"(\") {\n        const argsString = restOfExp(constants, part.substring(i), [], \"(\");\n        i += argsString.length + 1;\n        let found;\n        let j = 0;\n        while ((found = restOfExp(constants, argsString.substring(j), [/^,/])).length) {\n            j += found.length + 1;\n            args.push(found.trim());\n        }\n    }\n    ctx.lispTree = lispify(constants, part.substring(i), expectTypes.expEdge.next, new Lisp({\n        op: type,\n        a: lispify(constants, obj, expectTypes.initialize.next),\n        b: toLispArray(args.map((arg) => lispify(constants, arg, expectTypes.initialize.next))),\n    }));\n});\nconst ofStart2 = lispify(undefined, new CodeString('let $$iterator = $$obj[Symbol.iterator]()'), ['initialize']);\nconst ofStart3 = lispify(undefined, new CodeString('let $$next = $$iterator.next()'), ['initialize']);\nconst ofCondition = lispify(undefined, new CodeString('return !$$next.done'), ['initialize']);\nconst ofStep = lispify(undefined, new CodeString('$$next = $$iterator.next()'));\nconst inStart2 = lispify(undefined, new CodeString('let $$keys = Object.keys($$obj)'), ['initialize']);\nconst inStart3 = lispify(undefined, new CodeString('let $$keyIndex = 0'), ['initialize']);\nconst inStep = lispify(undefined, new CodeString('$$keyIndex++'));\nconst inCondition = lispify(undefined, new CodeString('return $$keyIndex < $$keys.length'), ['initialize']);\nvar lastType;\nvar lastPart;\nvar lastLastPart;\nvar lastLastLastPart;\nvar lastLastLastLastPart;\nfunction lispify(constants, part, expected, lispTree, topLevel = false) {\n    expected = expected || expectTypes.initialize.next;\n    if (part === undefined)\n        return lispTree;\n    part = part.trimStart();\n    const str = part.toString();\n    if (!part.length && !expected.includes('expEnd')) {\n        throw new SyntaxError(\"Unexpected end of expression\");\n    }\n    if (!part.length)\n        return lispTree;\n    let ctx = { lispTree: lispTree };\n    let res;\n    for (let expect of expected) {\n        if (expect === 'expEnd') {\n            continue;\n        }\n        for (let type in expectTypes[expect].types) {\n            if (type === 'expEnd') {\n                continue;\n            }\n            if (res = expectTypes[expect].types[type].exec(str)) {\n                lastType = type;\n                lastLastLastLastPart = lastLastLastPart;\n                lastLastLastPart = lastLastPart;\n                lastLastPart = lastPart;\n                lastPart = part;\n                try {\n                    lispTypes.get(type)(constants, type, part, res, expect, ctx);\n                }\n                catch (e) {\n                    if (topLevel && e instanceof SyntaxError) {\n                        throw new ParseError(e.message, str);\n                    }\n                    throw e;\n                }\n                break;\n            }\n        }\n        if (res)\n            break;\n    }\n    if (!res && part.length) {\n        let msg = `Unexpected token after ${lastType}: ${part.char(0)}`;\n        if (topLevel) {\n            throw new ParseError(`Unexpected token after ${lastType}: ${part.char(0)}`, str);\n        }\n        throw new SyntaxError(`Unexpected token after ${lastType}: ${part.char(0)}`);\n    }\n    return ctx.lispTree;\n}\nconst startingExpectedWithoutSingle = startingExecpted.filter((r) => r !== 'expSingle');\nfunction lispifyExpr(constants, str, expected) {\n    if (!str.trimStart().length)\n        return undefined;\n    let subExpressions = [];\n    let sub;\n    let pos = 0;\n    expected = expected || expectTypes.initialize.next;\n    if (expected.includes('expSingle')) {\n        if (testMultiple(str.toString(), Object.values(expectTypes.expSingle.types))) {\n            return lispify(constants, str, ['expSingle'], undefined, true);\n        }\n    }\n    if (expected === startingExecpted)\n        expected = startingExpectedWithoutSingle;\n    while ((sub = restOfExp(constants, str.substring(pos), [/^,/])).length) {\n        subExpressions.push(sub.trimStart());\n        pos += sub.length + 1;\n    }\n    if (subExpressions.length === 1) {\n        return lispify(constants, str, expected, undefined, true);\n    }\n    if (expected.includes('initialize')) {\n        let defined = expectTypes.initialize.types.initialize.exec(subExpressions[0].toString());\n        if (defined) {\n            return toLispArray(subExpressions.map((str, i) => lispify(constants, i ? new CodeString(defined[1] + ' ' + str) : str, ['initialize'], undefined, true)));\n        }\n        else if (expectTypes.initialize.types.return.exec(subExpressions[0].toString())) {\n            return lispify(constants, str, expected, undefined, true);\n        }\n    }\n    const exprs = toLispArray(subExpressions.map((str, i) => lispify(constants, str, expected, undefined, true)));\n    return new Lisp({ op: \"multi\", a: exprs });\n}\nexport function lispifyReturnExpr(constants, str) {\n    return new Lisp({ op: 'return', b: lispifyExpr(constants, str) });\n}\nexport function lispifyBlock(str, constants, expression = false) {\n    str = insertSemicolons(constants, str);\n    if (!str.trim().length)\n        return toLispArray([]);\n    let parts = [];\n    let part;\n    let pos = 0;\n    let start = 0;\n    let details = {};\n    let skipped = false;\n    let isInserted = false;\n    while ((part = restOfExp(constants, str.substring(pos), [semiColon], undefined, undefined, undefined, details)).length) {\n        isInserted = str.char(pos + part.length) && str.char(pos + part.length) !== ';';\n        pos += part.length + (isInserted ? 0 : 1);\n        if (/^\\s*else(?![\\w\\$])/.test(str.substring(pos).toString())) {\n            skipped = true;\n        }\n        else if (details.words.includes('do') && /^\\s*while(?![\\w\\$])/.test(str.substring(pos).toString())) {\n            skipped = true;\n        }\n        else {\n            skipped = false;\n            parts.push(str.substring(start, pos - (isInserted ? 0 : 1)));\n            start = pos;\n        }\n        details = {};\n        if (expression)\n            break;\n    }\n    if (skipped) {\n        parts.push(str.substring(start, pos - (isInserted ? 0 : 1)));\n    }\n    return toLispArray(parts.map((str) => str.trimStart()).filter((str) => str.length).map((str, j) => {\n        return lispifyExpr(constants, str.trimStart(), startingExecpted);\n    }).flat());\n}\nexport function lispifyFunction(str, constants, expression = false) {\n    if (!str.trim().length)\n        return toLispArray([]);\n    const tree = lispifyBlock(str, constants, expression);\n    let hoisted = toLispArray([]);\n    hoist(tree, hoisted);\n    return toLispArray(hoisted.concat(tree));\n}\nfunction hoist(item, res) {\n    if (Array.isArray(item)) {\n        const rep = [];\n        for (let it of item) {\n            if (!hoist(it, res)) {\n                rep.push(it);\n            }\n        }\n        if (rep.length !== item.length) {\n            item.length = 0;\n            item.push(...rep);\n        }\n    }\n    else if (item instanceof Lisp) {\n        if (item.op === \"try\" || item.op === \"if\" || item.op === \"loop\" || item.op === \"switch\") {\n            hoist(item.a, res);\n            hoist(item.b, res);\n        }\n        else if (item.op === \"var\") {\n            res.push(new Lisp({ op: 'var', a: item.a }));\n        }\n        else if (item.op === \"function\" && item.a[1]) {\n            res.push(item);\n            return true;\n        }\n    }\n    return false;\n}\nconst closingsNoInsertion = /^(\\})\\s*(catch|finally|else|while|instanceof)(?![\\w\\$])/;\n//  \\w|)|] \\n \\w = 2                                  // \\} \\w|\\{ = 5 \nconst colonsRegex = /^((([\\w\\$\\]\\)\\\"\\'\\`]|\\+\\+|\\-\\-)\\s*\\r?\\n\\s*([\\w\\$\\+\\-\\!~]))|(\\}\\s*[\\w\\$\\!~\\+\\-\\{\\(\\\"\\'\\`]))/;\n// if () \\w \\n; \\w              == \\w \\n \\w    | last === if             a\n// if () { }; \\w                == \\} ^else    | last === if             b\n// if () \\w \\n; else \\n \\w \\n;  == \\w \\n \\w    | last === else           a\n// if () {} else {}; \\w         == \\} \\w       | last === else           b\n// while () \\n \\w \\n; \\w        == \\w \\n \\w    | last === while          a\n// while () { }; \\w             == \\} \\w       | last === while          b\n// do \\w \\n; while (); \\w       == \\w \\n while | last === do             a\n// do { } while (); \\w          == \\) \\w       | last === while          c\n// try {} catch () {}; \\w       == \\} \\w       | last === catch|finally  b\n// \\w \\n; \\w                    == \\w \\n \\w    | last === none           a\n// cb() \\n \\w                   == \\) \\n \\w    | last === none           a\n// obj[a] \\n \\w                 == \\] \\n \\w    | last === none           a\n// {} {}                        == \\} \\{       | last === none           b\nexport function insertSemicolons(constants, str) {\n    let rest = str;\n    let sub = emptyString;\n    let details = {};\n    const inserted = insertedSemicolons.get(str.ref) || new Array(str.ref.str.length);\n    while ((sub = restOfExp(constants, rest, [], undefined, undefined, [colonsRegex], details)).length) {\n        let valid = false;\n        let part = sub;\n        let edge = sub.length;\n        if (details.regRes) {\n            valid = true;\n            const [, , a, , , b] = details.regRes;\n            edge = details.regRes[3] === \"++\" || details.regRes[3] === \"--\" ? sub.length + 1 : sub.length;\n            part = rest.substring(0, edge);\n            if (b) {\n                let res = closingsNoInsertion.exec(rest.substring(sub.length - 1).toString());\n                if (res) {\n                    if (res[2] === 'while') {\n                        valid = details.lastWord !== 'do';\n                    }\n                    else {\n                        valid = false;\n                    }\n                }\n                else if (details.lastWord === 'function' && details.regRes[5][0] === \"}\" && details.regRes[5].slice(-1) === '(') {\n                    valid = false;\n                }\n            }\n            else if (a) {\n                if (details.lastWord === 'if' || details.lastWord === 'while' || details.lastWord === 'for' || details.lastWord === 'else') {\n                    valid = false;\n                }\n            }\n        }\n        if (valid) {\n            inserted[part.end] = true;\n        }\n        rest = rest.substring(edge);\n        details = {};\n    }\n    insertedSemicolons.set(str.ref, inserted);\n    return str;\n}\nexport function checkRegex(str) {\n    let i = 1;\n    let escape = false;\n    let done = false;\n    let cancel = false;\n    while (i < str.length && !done && !cancel) {\n        done = (str[i] === '/' && !escape);\n        escape = str[i] === '\\\\' && !escape;\n        cancel = str[i] === '\\n';\n        i++;\n    }\n    let after = str.substring(i);\n    cancel = (cancel || !done) || /^\\s*\\d/.test(after);\n    if (cancel)\n        return null;\n    let flags = /^[a-z]*/.exec(after);\n    if (/^\\s+[\\w\\$]/.test(str.substring(i + flags[0].length))) {\n        return null;\n    }\n    return {\n        regex: str.substring(1, i - 1),\n        flags: (flags && flags[0]) || \"\",\n        length: i + ((flags && flags[0].length) || 0)\n    };\n}\nconst notDivide = /(typeof|delete|instanceof|return|in|of|throw|new|void|do|if)$/;\nconst possibleDivide = /^([\\w\\$\\]\\)]|\\+\\+|\\-\\-)[\\s\\/]/;\nexport function extractConstants(constants, str, currentEnclosure = \"\") {\n    let quote;\n    let extract = [];\n    let escape = false;\n    let regexFound;\n    let comment = \"\";\n    let commentStart = -1;\n    let currJs = toLispArray([]);\n    let char = \"\";\n    const strRes = [];\n    const enclosures = [];\n    let isPossibleDivide;\n    for (var i = 0; i < str.length; i++) {\n        char = str[i];\n        if (comment) {\n            if (char === comment) {\n                if (comment === \"*\" && str[i + 1] === \"/\") {\n                    comment = \"\";\n                    i++;\n                }\n                else if (comment === \"\\n\") {\n                    comment = \"\";\n                }\n            }\n        }\n        else {\n            if (escape) {\n                escape = false;\n                extract.push(char);\n                continue;\n            }\n            if (quote) {\n                if (quote === \"`\" && char === \"$\" && str[i + 1] === \"{\") {\n                    let skip = extractConstants(constants, str.substring(i + 2), \"{\");\n                    currJs.push(skip.str);\n                    extract.push('${', currJs.length - 1, `}`);\n                    i += skip.length + 2;\n                }\n                else if (quote === char) {\n                    if (quote === '`') {\n                        constants.literals.push({\n                            op: 'literal',\n                            a: unraw(extract.join(\"\")),\n                            b: currJs\n                        });\n                        strRes.push(`\\``, constants.literals.length - 1, `\\``);\n                    }\n                    else {\n                        constants.strings.push(unraw(extract.join(\"\")));\n                        strRes.push(`\"`, constants.strings.length - 1, `\"`);\n                    }\n                    quote = null;\n                    extract = [];\n                }\n                else {\n                    extract.push(char);\n                }\n            }\n            else {\n                if ((char === \"'\" || char === '\"' || char === '`')) {\n                    currJs = toLispArray([]);\n                    quote = char;\n                }\n                else if (closings[currentEnclosure] === char && !enclosures.length) {\n                    return { str: strRes.join(\"\"), length: i };\n                }\n                else if (closings[char]) {\n                    enclosures.push(char);\n                    strRes.push(char);\n                }\n                else if (closings[enclosures[enclosures.length - 1]] === char) {\n                    enclosures.pop();\n                    strRes.push(char);\n                }\n                else if (char === \"/\" && (str[i + 1] === \"*\" || str[i + 1] === \"/\")) {\n                    comment = str[i + 1] === \"*\" ? \"*\" : \"\\n\";\n                    commentStart = i;\n                }\n                else if (char === '/' && !isPossibleDivide && (regexFound = checkRegex(str.substring(i)))) {\n                    constants.regexes.push(regexFound);\n                    strRes.push(`/`, constants.regexes.length - 1, `/r`);\n                    i += regexFound.length - 1;\n                }\n                else {\n                    strRes.push(char);\n                }\n                if (!isPossibleDivide || !space.test(char)) {\n                    if (isPossibleDivide = possibleDivide.exec(str.substring(i))) {\n                        if (notDivide.test(str.substring(0, i + isPossibleDivide[1].length))) {\n                            isPossibleDivide = null;\n                        }\n                    }\n                }\n            }\n            escape = quote && char === \"\\\\\";\n        }\n    }\n    if (comment) {\n        if (comment === \"*\") {\n            throw new SyntaxError(`Unclosed comment '/*': ${str.substring(commentStart)}`);\n        }\n    }\n    return { str: strRes.join(\"\"), length: i };\n}\nexport function parse(code, eager = false, expression = false) {\n    if (typeof code !== 'string')\n        throw new ParseError(`Cannot parse ${code}`, code);\n    let str = ' ' + code;\n    const constants = { strings: [], literals: [], regexes: [], eager };\n    str = extractConstants(constants, str).str;\n    for (let l of constants.literals) {\n        l.b = toLispArray(l.b.map((js) => lispifyExpr(constants, new CodeString(js))));\n    }\n    return { tree: lispifyFunction(new CodeString(str), constants, expression), constants };\n}\n","import { SpreadArray, KeyVal, SpreadObject, If, Lisp, toLispArray, parse, lispifyFunction, CodeString, lispArrayKey } from \"./parser.js\";\nexport class ExecReturn {\n    constructor(auditReport, result, returned, breakLoop = false, continueLoop = false) {\n        this.auditReport = auditReport;\n        this.result = result;\n        this.returned = returned;\n        this.breakLoop = breakLoop;\n        this.continueLoop = continueLoop;\n    }\n}\nexport class Prop {\n    constructor(context, prop, isConst = false, isGlobal = false, isVariable = false) {\n        this.context = context;\n        this.prop = prop;\n        this.isConst = isConst;\n        this.isGlobal = isGlobal;\n        this.isVariable = isVariable;\n    }\n    get() {\n        if (this.context === undefined)\n            throw new ReferenceError(`${this.prop} is not defined`);\n        return this.context[this.prop];\n    }\n}\nconst optional = {};\nconst reservedWords = new Set([\n    'instanceof',\n    'typeof',\n    'return',\n    'try',\n    'catch',\n    'if',\n    'finally',\n    'else',\n    'in',\n    'of',\n    'var',\n    'let',\n    'const',\n    'for',\n    'delete',\n    'false',\n    'true',\n    'while',\n    'do',\n    'break',\n    'continue',\n    'new',\n    'function',\n    'async',\n    'await',\n    'switch',\n    'case'\n]);\nvar VarType;\n(function (VarType) {\n    VarType[\"let\"] = \"let\";\n    VarType[\"const\"] = \"const\";\n    VarType[\"var\"] = \"var\";\n})(VarType || (VarType = {}));\nfunction keysOnly(obj) {\n    const ret = Object.assign({}, obj);\n    for (let key in ret) {\n        ret[key] = true;\n    }\n    return ret;\n}\nexport class Scope {\n    constructor(parent, vars = {}, functionThis) {\n        this.const = {};\n        this.let = {};\n        this.var = {};\n        const isFuncScope = functionThis !== undefined || parent === null;\n        this.parent = parent;\n        this.allVars = vars;\n        this.let = isFuncScope ? this.let : keysOnly(vars);\n        this.var = isFuncScope ? keysOnly(vars) : this.var;\n        this.globals = parent === null ? keysOnly(vars) : {};\n        this.functionThis = functionThis;\n    }\n    get(key, functionScope = false) {\n        if (key === 'this' && this.functionThis !== undefined) {\n            return new Prop({ this: this.functionThis }, key, true, false, true);\n        }\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        if (this.parent === null || !functionScope || this.functionThis !== undefined) {\n            if (this.globals.hasOwnProperty(key)) {\n                return new Prop(this.functionThis, key, false, true, true);\n            }\n            if (key in this.allVars && (!(key in {}) || this.allVars.hasOwnProperty(key))) {\n                return new Prop(this.allVars, key, this.const.hasOwnProperty(key), this.globals.hasOwnProperty(key), true);\n            }\n            if (this.parent === null) {\n                return new Prop(undefined, key);\n            }\n        }\n        return this.parent.get(key, functionScope);\n    }\n    set(key, val) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be assigned');\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        let prop = this.get(key);\n        if (prop.context === undefined) {\n            throw new ReferenceError(`Variable '${key}' was not declared.`);\n        }\n        if (prop.isConst) {\n            throw new TypeError(`Cannot assign to const variable '${key}'`);\n        }\n        if (prop.isGlobal) {\n            throw new SandboxError(`Cannot override global variable '${key}'`);\n        }\n        prop.context[prop] = val;\n        return prop;\n    }\n    declare(key, type = null, value = undefined, isGlobal = false) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be declared');\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        if (type === 'var' && this.functionThis === undefined && this.parent !== null) {\n            return this.parent.declare(key, type, value, isGlobal);\n        }\n        else if ((this[type].hasOwnProperty(key) && type !== 'const' && !this.globals.hasOwnProperty(key)) || !(key in this.allVars)) {\n            if (isGlobal) {\n                this.globals[key] = true;\n            }\n            this[type][key] = true;\n            this.allVars[key] = value;\n        }\n        else {\n            throw new SandboxError(`Identifier '${key}' has already been declared`);\n        }\n        return new Prop(this.allVars, key, this.const.hasOwnProperty(key), isGlobal);\n    }\n}\nexport class FunctionScope {\n}\nexport class LocalScope {\n}\nexport class SandboxError extends Error {\n}\nlet currentTicks;\nexport function sandboxFunction(context, ticks) {\n    return SandboxFunction;\n    function SandboxFunction(...params) {\n        let code = params.pop() || \"\";\n        let parsed = parse(code);\n        return createFunction(params, parsed.tree, ticks || currentTicks, {\n            ctx: context,\n            constants: parsed.constants,\n            tree: parsed.tree\n        }, undefined, 'anonymous');\n    }\n}\nfunction generateArgs(argNames, args) {\n    const vars = {};\n    argNames.forEach((arg, i) => {\n        if (arg.startsWith('...')) {\n            vars[arg.substring(3)] = args.slice(i);\n        }\n        else {\n            vars[arg] = args[i];\n        }\n    });\n    return vars;\n}\nconst sandboxedFunctions = new WeakSet();\nexport function createFunction(argNames, parsed, ticks, context, scope, name) {\n    if (context.ctx.options.forbidFunctionCreation) {\n        throw new SandboxError(\"Function creation is forbidden\");\n    }\n    let func;\n    if (name === undefined) {\n        func = (...args) => {\n            const vars = generateArgs(argNames, args);\n            const res = executeTree(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars)]);\n            return res.result;\n        };\n    }\n    else {\n        func = function sandboxedObject(...args) {\n            const vars = generateArgs(argNames, args);\n            const res = executeTree(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars, this)]);\n            return res.result;\n        };\n    }\n    sandboxedFunctions.add(func);\n    return func;\n}\nexport function createFunctionAsync(argNames, parsed, ticks, context, scope, name) {\n    var _a;\n    if (context.ctx.options.forbidFunctionCreation) {\n        throw new SandboxError(\"Function creation is forbidden\");\n    }\n    if (!((_a = context.ctx.prototypeWhitelist) === null || _a === void 0 ? void 0 : _a.has(Promise.prototype))) {\n        throw new SandboxError(\"Async/await not permitted\");\n    }\n    let func;\n    if (name === undefined) {\n        func = async (...args) => {\n            const vars = generateArgs(argNames, args);\n            const res = await executeTreeAsync(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars)]);\n            return res.result;\n        };\n    }\n    else {\n        func = async function sandboxedObject(...args) {\n            const vars = generateArgs(argNames, args);\n            const res = await executeTreeAsync(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars, this)]);\n            return res.result;\n        };\n    }\n    sandboxedFunctions.add(func);\n    return func;\n}\nexport function sandboxedEval(func) {\n    return sandboxEval;\n    function sandboxEval(code) {\n        return func(code)();\n    }\n}\nexport function sandboxedSetTimeout(func) {\n    return function sandboxSetTimeout(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setTimeout(handler, ...args);\n        return setTimeout(func(handler), ...args);\n    };\n}\nexport function sandboxedSetInterval(func) {\n    return function sandboxSetInterval(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setInterval(handler, ...args);\n        return setInterval(func(handler), ...args);\n    };\n}\nexport function assignCheck(obj, context, op = 'assign') {\n    var _a, _b, _c, _d;\n    if (obj.context === undefined) {\n        throw new ReferenceError(`Cannot ${op} value to undefined.`);\n    }\n    if (typeof obj.context !== 'object' && typeof obj.context !== 'function') {\n        throw new SyntaxError(`Cannot ${op} value to a primitive.`);\n    }\n    if (obj.isConst) {\n        throw new TypeError(`Cannot set value to const variable '${obj.prop}'`);\n    }\n    if (obj.isGlobal) {\n        throw new SandboxError(`Cannot ${op} property '${obj.prop}' of a global object`);\n    }\n    if (typeof obj.context[obj.prop] === 'function' && !obj.context.hasOwnProperty(obj.prop)) {\n        throw new SandboxError(`Override prototype property '${obj.prop}' not allowed`);\n    }\n    if (op === \"delete\") {\n        if (obj.context.hasOwnProperty(obj.prop)) {\n            (_a = context.ctx.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb({ type: \"delete\", prop: obj.prop }));\n        }\n    }\n    else if (obj.context.hasOwnProperty(obj.prop)) {\n        (_c = (_b = context.ctx.setSubscriptions.get(obj.context)) === null || _b === void 0 ? void 0 : _b.get(obj.prop)) === null || _c === void 0 ? void 0 : _c.forEach((cb) => cb({\n            type: \"replace\"\n        }));\n    }\n    else {\n        (_d = context.ctx.changeSubscriptions.get(obj.context)) === null || _d === void 0 ? void 0 : _d.forEach((cb) => cb({ type: \"create\", prop: obj.prop }));\n    }\n}\nconst arrayChange = new Set([\n    [].push,\n    [].pop,\n    [].shift,\n    [].unshift,\n    [].splice,\n    [].reverse,\n    [].sort,\n    [].copyWithin\n]);\nconst literalRegex = /(\\$\\$)*(\\$)?\\${(\\d+)}/g;\nlet ops2 = {\n    'prop': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (a === null) {\n            throw new TypeError(`Cannot get property ${b} of null`);\n        }\n        const type = typeof a;\n        if (type === 'undefined' && obj === undefined) {\n            let prop = scope.get(b);\n            if (prop.context === context.ctx.sandboxGlobal) {\n                if (context.ctx.options.audit) {\n                    context.ctx.auditReport.globalsAccess.add(b);\n                }\n                const rep = context.ctx.globalsWhitelist.has(context.ctx.sandboxGlobal[b]) ? context.ctx.evals.get(context.ctx.sandboxGlobal[b]) : undefined;\n                if (rep) {\n                    done(undefined, rep);\n                    return;\n                }\n            }\n            if (prop.context && prop.context[b] === globalThis) {\n                done(undefined, context.ctx.globalScope.get('this'));\n                return;\n            }\n            context.ctx.getSubscriptions.forEach((cb) => cb(prop.context, prop.prop));\n            done(undefined, prop);\n            return;\n        }\n        else if (a === undefined) {\n            throw new SandboxError(\"Cannot get property '\" + b + \"' of undefined\");\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                a = new Number(a);\n            }\n            else if (type === 'string') {\n                a = new String(a);\n            }\n            else if (type === 'boolean') {\n                a = new Boolean(a);\n            }\n        }\n        else if (typeof a.hasOwnProperty === 'undefined') {\n            done(undefined, new Prop(undefined, b));\n            return;\n        }\n        const isFunction = type === 'function';\n        let prototypeAccess = isFunction || !(a.hasOwnProperty(b) || typeof b === 'number');\n        if (context.ctx.options.audit && prototypeAccess) {\n            if (typeof b === 'string') {\n                let prot = Object.getPrototypeOf(a);\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        if (!context.ctx.auditReport.prototypeAccess[prot.constructor.name]) {\n                            context.ctx.auditReport.prototypeAccess[prot.constructor.name] = new Set();\n                        }\n                        context.ctx.auditReport.prototypeAccess[prot.constructor.name].add(b);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        if (prototypeAccess) {\n            if (isFunction) {\n                if (!['name', 'length', 'constructor'].includes(b) && a.hasOwnProperty(b)) {\n                    const whitelist = context.ctx.prototypeWhitelist.get(a.prototype);\n                    const replace = context.ctx.options.prototypeReplacements.get(a);\n                    if (replace) {\n                        done(undefined, new Prop(replace(a, true), b));\n                        return;\n                    }\n                    if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                    }\n                    else {\n                        throw new SandboxError(`Static method or property access not permitted: ${a.name}.${b}`);\n                    }\n                }\n            }\n            else if (b !== 'constructor') {\n                let prot = a;\n                while (prot = Object.getPrototypeOf(prot)) {\n                    if (prot.hasOwnProperty(b)) {\n                        const whitelist = context.ctx.prototypeWhitelist.get(prot);\n                        const replace = context.ctx.options.prototypeReplacements.get(prot.constuctor);\n                        if (replace) {\n                            done(undefined, new Prop(replace(a, false), b));\n                            return;\n                        }\n                        if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                            break;\n                        }\n                        throw new SandboxError(`Method or property access not permitted: ${prot.constructor.name}.${b}`);\n                    }\n                }\n                ;\n            }\n        }\n        if (context.ctx.evals.has(a[b])) {\n            done(undefined, context.ctx.evals.get(a[b]));\n            return;\n        }\n        if (a[b] === globalThis) {\n            done(undefined, context.ctx.globalScope.get('this'));\n            return;\n        }\n        let g = obj.isGlobal || (isFunction && !sandboxedFunctions.has(a)) || context.ctx.globalsWhitelist.has(a);\n        if (!g) {\n            context.ctx.getSubscriptions.forEach((cb) => cb(a, b));\n        }\n        done(undefined, new Prop(a, b, false, g));\n    },\n    'call': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (context.ctx.options.forbidFunctionCalls)\n            throw new SandboxError(\"Function invocations are not allowed\");\n        if (typeof a !== 'function') {\n            throw new TypeError(`${obj.prop} is not a function`);\n        }\n        const args = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        execMany(ticks, exec, toLispArray(args), (err, vals) => {\n            var _a;\n            if (err) {\n                done(err);\n                return;\n            }\n            if (typeof obj === 'function') {\n                done(undefined, obj(...vals));\n                return;\n            }\n            if (obj.context[obj.prop] === JSON.stringify && context.ctx.getSubscriptions.size) {\n                const cache = new Set();\n                const recurse = (x) => {\n                    if (!x || !(typeof x === 'object') || cache.has(x))\n                        return;\n                    cache.add(x);\n                    for (let y in x) {\n                        context.ctx.getSubscriptions.forEach((cb) => cb(x, y));\n                        recurse(x[y]);\n                    }\n                };\n                recurse(vals[0]);\n            }\n            if (obj.context instanceof Array && arrayChange.has(obj.context[obj.prop]) && context.ctx.changeSubscriptions.get(obj.context)) {\n                let change;\n                let changed = false;\n                if (obj.prop === \"push\") {\n                    change = {\n                        type: \"push\",\n                        added: vals\n                    };\n                    changed = !!vals.length;\n                }\n                else if (obj.prop === \"pop\") {\n                    change = {\n                        type: \"pop\",\n                        removed: obj.context.slice(-1)\n                    };\n                    changed = !!change.removed.length;\n                }\n                else if (obj.prop === \"shift\") {\n                    change = {\n                        type: \"shift\",\n                        removed: obj.context.slice(0, 1)\n                    };\n                    changed = !!change.removed.length;\n                }\n                else if (obj.prop === \"unshift\") {\n                    change = {\n                        type: \"unshift\",\n                        added: vals\n                    };\n                    changed = !!vals.length;\n                }\n                else if (obj.prop === \"splice\") {\n                    change = {\n                        type: \"splice\",\n                        startIndex: vals[0],\n                        deleteCount: vals[1] === undefined ? obj.context.length : vals[1],\n                        added: vals.slice(2),\n                        removed: obj.context.slice(vals[0], vals[1] === undefined ? undefined : vals[0] + vals[1])\n                    };\n                    changed = !!change.added.length || !!change.removed.length;\n                }\n                else if (obj.prop === \"reverse\" || obj.prop === \"sort\") {\n                    change = { type: obj.prop };\n                    changed = !!obj.context.length;\n                }\n                else if (obj.prop === \"copyWithin\") {\n                    let len = vals[2] === undefined ? obj.context.length - vals[1] : Math.min(obj.context.length, vals[2] - vals[1]);\n                    change = {\n                        type: \"copyWithin\",\n                        startIndex: vals[0],\n                        endIndex: vals[0] + len,\n                        added: obj.context.slice(vals[1], vals[1] + len),\n                        removed: obj.context.slice(vals[0], vals[0] + len)\n                    };\n                    changed = !!change.added.length || !!change.removed.length;\n                }\n                if (changed) {\n                    (_a = context.ctx.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb(change));\n                }\n            }\n            done(undefined, obj.context[obj.prop](...vals));\n        }, scope, context);\n    },\n    'createObject': (exec, done, ticks, a, b, obj, context, scope) => {\n        let res = {};\n        for (let item of b) {\n            if (item instanceof SpreadObject) {\n                res = { ...res, ...item.item };\n            }\n            else {\n                res[item.key] = item.val;\n            }\n        }\n        done(undefined, res);\n    },\n    'keyVal': (exec, done, ticks, a, b) => done(undefined, new KeyVal(a, b)),\n    'createArray': (exec, done, ticks, a, b, obj, context, scope) => {\n        const items = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        execMany(ticks, exec, toLispArray(items), done, scope, context);\n    },\n    'group': (exec, done, ticks, a, b) => done(undefined, b),\n    'string': (exec, done, ticks, a, b, obj, context) => done(undefined, context.constants.strings[b]),\n    'regex': (exec, done, ticks, a, b, obj, context) => {\n        const reg = context.constants.regexes[b];\n        if (!context.ctx.globalsWhitelist.has(RegExp)) {\n            throw new SandboxError(\"Regex not permitted\");\n        }\n        else {\n            done(undefined, new RegExp(reg.regex, reg.flags));\n        }\n    },\n    'literal': (exec, done, ticks, a, b, obj, context, scope) => {\n        let name = context.constants.literals[b].a;\n        let found = toLispArray([]);\n        let f;\n        let resnums = [];\n        while (f = literalRegex.exec(name)) {\n            if (!f[2]) {\n                found.push(context.constants.literals[b].b[parseInt(f[3], 10)]);\n                resnums.push(f[3]);\n            }\n        }\n        execMany(ticks, exec, found, (err, processed) => {\n            const reses = {};\n            if (err) {\n                done(err);\n                return;\n            }\n            for (let i in resnums) {\n                const num = resnums[i];\n                reses[num] = processed[i];\n            }\n            done(undefined, name.replace(/(\\\\\\\\)*(\\\\)?\\${(\\d+)}/g, (match, $$, $, num) => {\n                if ($)\n                    return match;\n                let res = reses[num];\n                res = res instanceof Prop ? res.get() : res;\n                return ($$ ? $$ : '') + `${res}`;\n            }));\n        }, scope, context);\n    },\n    'spreadArray': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, new SpreadArray(res));\n        });\n    },\n    'spreadObject': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, new SpreadObject(res));\n        });\n    },\n    '!': (exec, done, ticks, a, b) => done(undefined, !b),\n    '~': (exec, done, ticks, a, b) => done(undefined, ~b),\n    '++$': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, ++obj.context[obj.prop]);\n    },\n    '$++': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop]++);\n    },\n    '--$': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, --obj.context[obj.prop]);\n    },\n    '$--': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop]--);\n    },\n    '=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        obj.context[obj.prop] = b;\n        done(undefined, new Prop(obj.context, obj.prop, false, obj.isGlobal));\n    },\n    '+=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] += b);\n    },\n    '-=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] -= b);\n    },\n    '/=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] /= b);\n    },\n    '*=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] *= b);\n    },\n    '**=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] **= b);\n    },\n    '%=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] %= b);\n    },\n    '^=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] ^= b);\n    },\n    '&=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] &= b);\n    },\n    '|=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] |= b);\n    },\n    '<<=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] <<= b);\n    },\n    '>>=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] >>= b);\n    },\n    '>>>=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] >>= b);\n    },\n    '?': (exec, done, ticks, a, b) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        done(undefined, a ? b.t : b.f);\n    },\n    '>': (exec, done, ticks, a, b) => done(undefined, a > b),\n    '<': (exec, done, ticks, a, b) => done(undefined, a < b),\n    '>=': (exec, done, ticks, a, b) => done(undefined, a >= b),\n    '<=': (exec, done, ticks, a, b) => done(undefined, a <= b),\n    '==': (exec, done, ticks, a, b) => done(undefined, a == b),\n    '===': (exec, done, ticks, a, b) => done(undefined, a === b),\n    '!=': (exec, done, ticks, a, b) => done(undefined, a != b),\n    '!==': (exec, done, ticks, a, b) => done(undefined, a !== b),\n    '&&': (exec, done, ticks, a, b) => done(undefined, a && b),\n    '||': (exec, done, ticks, a, b) => done(undefined, a || b),\n    '&': (exec, done, ticks, a, b) => done(undefined, a & b),\n    '|': (exec, done, ticks, a, b) => done(undefined, a | b),\n    ':': (exec, done, ticks, a, b) => done(undefined, new If(a, b)),\n    '+': (exec, done, ticks, a, b) => done(undefined, a + b),\n    '-': (exec, done, ticks, a, b) => done(undefined, a - b),\n    '$+': (exec, done, ticks, a, b) => done(undefined, +b),\n    '$-': (exec, done, ticks, a, b) => done(undefined, -b),\n    '/': (exec, done, ticks, a, b) => done(undefined, a / b),\n    '^': (exec, done, ticks, a, b) => done(undefined, a ^ b),\n    '*': (exec, done, ticks, a, b) => done(undefined, a * b),\n    '%': (exec, done, ticks, a, b) => done(undefined, a % b),\n    '<<': (exec, done, ticks, a, b) => done(undefined, a << b),\n    '>>': (exec, done, ticks, a, b) => done(undefined, a >> b),\n    '>>>': (exec, done, ticks, a, b) => done(undefined, a >>> b),\n    'typeof': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, b, scope, context, (e, prop) => {\n            if (prop instanceof Prop) {\n                if (prop.context === undefined) {\n                    prop = undefined;\n                }\n                else {\n                    prop = prop.context[prop.prop];\n                }\n            }\n            done(undefined, typeof prop);\n        });\n    },\n    'instanceof': (exec, done, ticks, a, b) => done(undefined, a instanceof b),\n    'in': (exec, done, ticks, a, b) => done(undefined, a in b),\n    'delete': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        if (bobj.context === undefined) {\n            done(undefined, true);\n            return;\n        }\n        assignCheck(bobj, context, 'delete');\n        if (bobj.isVariable) {\n            done(undefined, false);\n            return;\n        }\n        done(undefined, delete bobj.context[bobj.prop]);\n    },\n    'return': (exec, done, ticks, a, b, obj, context) => done(undefined, b),\n    'var': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.var, res));\n        });\n    },\n    'let': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.let, res, bobj && bobj.isGlobal));\n        });\n    },\n    'const': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.const, res));\n        });\n    },\n    'arrowFunc': (exec, done, ticks, a, b, obj, context, scope) => {\n        a = [...a];\n        if (typeof obj.b === \"string\" || obj.b instanceof CodeString) {\n            obj.b = b = lispifyFunction(new CodeString(obj.b), context.constants);\n        }\n        if (a.shift()) {\n            done(undefined, createFunctionAsync(a, b, ticks, context, scope));\n        }\n        else {\n            done(undefined, createFunction(a, b, ticks, context, scope));\n        }\n    },\n    'function': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (typeof obj.b === \"string\" || obj.b instanceof CodeString) {\n            obj.b = b = lispifyFunction(new CodeString(obj.b), context.constants);\n        }\n        let isAsync = a.shift();\n        let name = a.shift();\n        let func;\n        if (isAsync) {\n            func = createFunctionAsync(a, b, ticks, context, scope, name);\n        }\n        else {\n            func = createFunction(a, b, ticks, context, scope, name);\n        }\n        if (name) {\n            scope.declare(name, VarType.var, func);\n        }\n        done(undefined, func);\n    },\n    'inlineFunction': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (typeof obj.b === \"string\" || obj.b instanceof CodeString) {\n            obj.b = b = lispifyFunction(new CodeString(obj.b), context.constants);\n        }\n        let isAsync = a.shift();\n        let name = a.shift();\n        if (name) {\n            scope = new Scope(scope, {});\n        }\n        let func;\n        if (isAsync) {\n            func = createFunctionAsync(a, b, ticks, context, scope, name);\n        }\n        else {\n            func = createFunction(a, b, ticks, context, scope, name);\n        }\n        if (name) {\n            scope.declare(name, VarType.let, func);\n        }\n        done(undefined, func);\n    },\n    'loop': (exec, done, ticks, a, b, obj, context, scope) => {\n        const [checkFirst, startInternal, getIterator, startStep, step, condition, beforeStep] = a;\n        let loop = true;\n        const loopScope = new Scope(scope, {});\n        let internalVars = {\n            '$$obj': undefined\n        };\n        const interalScope = new Scope(loopScope, internalVars);\n        if (exec === execAsync) {\n            (async () => {\n                let ad;\n                ad = asyncDone((d) => exec(ticks, startStep, loopScope, context, d));\n                internalVars['$$obj'] = (ad = asyncDone((d) => exec(ticks, getIterator, loopScope, context, d))).isInstant === true ? ad.instant : (await ad.p).result;\n                ad = asyncDone((d) => exec(ticks, startInternal, interalScope, context, d));\n                if (checkFirst)\n                    loop = (ad = asyncDone((d) => exec(ticks, condition, interalScope, context, d))).isInstant === true ? ad.instant : (await ad.p).result;\n                while (loop) {\n                    let innerLoopVars = {};\n                    ad = asyncDone((d) => exec(ticks, beforeStep, new Scope(interalScope, innerLoopVars), context, d));\n                    ad.isInstant === true ? ad.instant : (await ad.p).result;\n                    let res = await executeTreeAsync(ticks, context, b, [new Scope(loopScope, innerLoopVars)], \"loop\");\n                    if (res instanceof ExecReturn && res.returned) {\n                        done(undefined, res);\n                        return;\n                    }\n                    if (res instanceof ExecReturn && res.breakLoop) {\n                        break;\n                    }\n                    ad = asyncDone((d) => exec(ticks, step, interalScope, context, d));\n                    loop = (ad = asyncDone((d) => exec(ticks, condition, interalScope, context, d))).isInstant === true ? ad.instant : (await ad.p).result;\n                }\n                done();\n            })().catch(done);\n        }\n        else {\n            syncDone((d) => exec(ticks, startStep, loopScope, context, d));\n            internalVars['$$obj'] = syncDone((d) => exec(ticks, getIterator, loopScope, context, d)).result;\n            syncDone((d) => exec(ticks, startInternal, interalScope, context, d));\n            if (checkFirst)\n                loop = (syncDone((d) => exec(ticks, condition, interalScope, context, d))).result;\n            while (loop) {\n                let innerLoopVars = {};\n                syncDone((d) => exec(ticks, beforeStep, new Scope(interalScope, innerLoopVars), context, d));\n                let res = executeTree(ticks, context, b, [new Scope(loopScope, innerLoopVars)], \"loop\");\n                if (res instanceof ExecReturn && res.returned) {\n                    done(undefined, res);\n                    return;\n                }\n                if (res instanceof ExecReturn && res.breakLoop) {\n                    break;\n                }\n                syncDone((d) => exec(ticks, step, interalScope, context, d));\n                loop = (syncDone((d) => exec(ticks, condition, interalScope, context, d))).result;\n            }\n            done();\n        }\n    },\n    'loopAction': (exec, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch) => {\n        if ((inLoopOrSwitch === \"switch\" && a === \"continue\") || !inLoopOrSwitch) {\n            throw new SandboxError(\"Illegal \" + a + \" statement\");\n        }\n        done(undefined, new ExecReturn(context.ctx.auditReport, undefined, false, a === \"break\", a === \"continue\"));\n    },\n    'if': (exec, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid if');\n        }\n        exec(ticks, a, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            executeTreeWithDone(exec, done, ticks, context, res ? b.t : b.f, [new Scope(scope)], inLoopOrSwitch);\n        });\n    },\n    'switch': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, a, scope, context, (err, toTest) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            if (exec === execSync) {\n                let res;\n                let isTrue = false;\n                for (let caseItem of b) {\n                    if (isTrue || (isTrue = !caseItem.a || toTest === valueOrProp((syncDone((d) => exec(ticks, caseItem.a, scope, context, d))).result))) {\n                        if (!caseItem.b)\n                            continue;\n                        res = executeTree(ticks, context, caseItem.b, [scope], \"switch\");\n                        if (res.breakLoop)\n                            break;\n                        if (res.returned) {\n                            done(undefined, res);\n                            return;\n                        }\n                        if (!caseItem.a) { // default case\n                            break;\n                        }\n                    }\n                }\n                done();\n            }\n            else {\n                (async () => {\n                    let res;\n                    let isTrue = false;\n                    for (let caseItem of b) {\n                        let ad;\n                        if (isTrue || (isTrue = !caseItem.a || toTest === valueOrProp((ad = asyncDone((d) => exec(ticks, caseItem.a, scope, context, d))).isInstant === true ? ad.instant : (await ad.p).result))) {\n                            if (!caseItem.b)\n                                continue;\n                            res = await executeTreeAsync(ticks, context, caseItem.b, [scope], \"switch\");\n                            if (res.breakLoop)\n                                break;\n                            if (res.returned) {\n                                done(undefined, res);\n                                return;\n                            }\n                            if (!caseItem.a) { // default case\n                                break;\n                            }\n                        }\n                    }\n                    done();\n                })().catch(done);\n            }\n        });\n    },\n    'try': (exec, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch) => {\n        const [exception, catchBody, finallyBody] = b;\n        executeTreeWithDone(exec, (err, res) => {\n            executeTreeWithDone(exec, (e) => {\n                if (e)\n                    done(e);\n                else if (err) {\n                    let sc = {};\n                    if (exception)\n                        sc[exception] = err;\n                    executeTreeWithDone(exec, done, ticks, context, catchBody, [new Scope(scope)], inLoopOrSwitch);\n                }\n                else {\n                    done(undefined, res);\n                }\n            }, ticks, context, finallyBody, [new Scope(scope, {})]);\n        }, ticks, context, a, [new Scope(scope)], inLoopOrSwitch);\n    },\n    'void': (exec, done, ticks, a) => { done(); },\n    'new': (exec, done, ticks, a, b, obj, context) => {\n        if (!context.ctx.globalsWhitelist.has(a) && !sandboxedFunctions.has(a)) {\n            throw new SandboxError(`Object construction not allowed: ${a.constructor.name}`);\n        }\n        done(undefined, new a(...b));\n    },\n    'throw': (exec, done, ticks, a) => { done(a); },\n    'multi': (exec, done, ticks, a) => done(undefined, a.pop())\n};\nexport let ops = new Map();\nfor (let op in ops2) {\n    ops.set(op, ops2[op]);\n}\nfunction valueOrProp(a) {\n    if (a instanceof Prop)\n        return a.get();\n    return a;\n}\nexport function execMany(ticks, exec, tree, done, scope, context, inLoopOrSwitch) {\n    if (exec === execSync) {\n        _execManySync(ticks, tree, done, scope, context, inLoopOrSwitch);\n    }\n    else {\n        _execManyAsync(ticks, tree, done, scope, context, inLoopOrSwitch).catch(done);\n    }\n}\nfunction _execManySync(ticks, tree, done, scope, context, inLoopOrSwitch) {\n    let ret = [];\n    for (let i = 0; i < tree.length; i++) {\n        let res;\n        try {\n            res = syncDone((d) => execSync(ticks, tree[i], scope, context, d, inLoopOrSwitch)).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (res instanceof ExecReturn && (res.returned || res.breakLoop || res.continueLoop)) {\n            done(undefined, res);\n            return;\n        }\n        ret.push(res);\n    }\n    done(undefined, ret);\n}\nasync function _execManyAsync(ticks, tree, done, scope, context, inLoopOrSwitch) {\n    let ret = [];\n    for (let i = 0; i < tree.length; i++) {\n        let res;\n        try {\n            let ad;\n            res = (ad = asyncDone((d) => execAsync(ticks, tree[i], scope, context, d, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (res instanceof ExecReturn && (res.returned || res.breakLoop || res.continueLoop)) {\n            done(undefined, res);\n            return;\n        }\n        ret.push(res);\n    }\n    done(undefined, ret);\n}\nexport function asyncDone(callback) {\n    let isInstant = false;\n    let instant;\n    const p = new Promise((resolve, reject) => {\n        callback((err, result) => {\n            if (err)\n                reject(err);\n            else {\n                isInstant = true;\n                instant = result;\n                resolve({ result });\n            }\n            ;\n        });\n    });\n    return {\n        isInstant,\n        instant,\n        p\n    };\n}\nexport function syncDone(callback) {\n    let result;\n    let err;\n    callback((e, r) => {\n        err = e;\n        result = r;\n    });\n    if (err)\n        throw err;\n    return { result };\n}\nexport async function execAsync(ticks, tree, scope, context, doneOriginal, inLoopOrSwitch) {\n    let done = doneOriginal;\n    const p = new Promise((resolve) => {\n        done = (e, r) => {\n            doneOriginal(e, r);\n            resolve();\n        };\n    });\n    if (_execNoneRecurse(ticks, tree, scope, context, done, true, inLoopOrSwitch)) {\n    }\n    else if (tree instanceof Lisp) {\n        let obj;\n        try {\n            let ad;\n            obj = (ad = asyncDone((d) => execAsync(ticks, tree.a, scope, context, d, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let a = obj;\n        try {\n            a = obj instanceof Prop ? obj.get() : obj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let op = tree.op;\n        if (op === '?prop' || op === '?call') {\n            if (a === undefined || a === null) {\n                done(undefined, optional);\n                return;\n            }\n            op = op.slice(1);\n        }\n        if (a === optional) {\n            if (op === 'prop' || op === 'call') {\n                done(undefined, a);\n                return;\n            }\n            else {\n                a = undefined;\n            }\n        }\n        let bobj;\n        try {\n            let ad;\n            bobj = (ad = asyncDone((d) => execAsync(ticks, tree.b, scope, context, d, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let b = bobj;\n        try {\n            b = bobj instanceof Prop ? bobj.get() : bobj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (b === optional) {\n            b = undefined;\n        }\n        if (ops.has(op)) {\n            try {\n                ops.get(op)(execAsync, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch);\n            }\n            catch (err) {\n                done(err);\n            }\n        }\n        else {\n            done(new SyntaxError('Unknown operator: ' + op));\n        }\n    }\n    await p;\n}\nexport function execSync(ticks, tree, scope, context, done, inLoopOrSwitch) {\n    if (_execNoneRecurse(ticks, tree, scope, context, done, false, inLoopOrSwitch)) {\n    }\n    else if (tree instanceof Lisp) {\n        let obj;\n        try {\n            obj = syncDone((d) => execSync(ticks, tree.a, scope, context, d, inLoopOrSwitch)).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let a = obj;\n        try {\n            a = obj instanceof Prop ? obj.get() : obj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let op = tree.op;\n        if (op === '?prop' || op === '?call') {\n            if (a === undefined || a === null) {\n                done(undefined, optional);\n                return;\n            }\n            op = op.slice(1);\n        }\n        if (a === optional) {\n            if (op === 'prop' || op === 'call') {\n                done(undefined, a);\n                return;\n            }\n            else {\n                a = undefined;\n            }\n        }\n        let bobj;\n        try {\n            bobj = syncDone((d) => execSync(ticks, tree.b, scope, context, d, inLoopOrSwitch)).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let b = bobj;\n        try {\n            b = bobj instanceof Prop ? bobj.get() : bobj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (b === optional) {\n            b = undefined;\n        }\n        if (ops.has(op)) {\n            try {\n                ops.get(op)(execSync, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch);\n            }\n            catch (err) {\n                done(err);\n            }\n        }\n        else {\n            done(new SyntaxError('Unknown operator: ' + op));\n        }\n    }\n}\nconst unexecTypes = new Set(['arrowFunc', 'function', 'inlineFunction', 'loop', 'try', 'switch', 'if', 'typeof']);\nfunction _execNoneRecurse(ticks, tree, scope, context, done, isAsync, inLoopOrSwitch) {\n    var _a;\n    const exec = isAsync ? execAsync : execSync;\n    if (context.ctx.options.executionQuota <= ticks.ticks) {\n        if (typeof context.ctx.options.onExecutionQuotaReached === 'function' && context.ctx.options.onExecutionQuotaReached(ticks, scope, context, tree)) {\n        }\n        else {\n            done(new SandboxError(\"Execution quota exceeded\"));\n            return;\n        }\n    }\n    ticks.ticks++;\n    currentTicks = ticks;\n    if (tree instanceof Prop) {\n        done(undefined, tree.get());\n    }\n    else if (Array.isArray(tree) && tree.lisp === lispArrayKey) {\n        execMany(ticks, exec, tree, done, scope, context, inLoopOrSwitch);\n    }\n    else if (!(tree instanceof Lisp)) {\n        done(undefined, tree);\n    }\n    else if (unexecTypes.has(tree.op)) {\n        try {\n            ops.get(tree.op)(exec, done, ticks, tree.a, tree.b, tree, context, scope, undefined, inLoopOrSwitch);\n        }\n        catch (err) {\n            done(err);\n        }\n    }\n    else if (tree.op === 'await') {\n        if (!isAsync) {\n            done(new SandboxError(\"Illegal use of 'await', must be inside async function\"));\n        }\n        else if ((_a = context.ctx.prototypeWhitelist) === null || _a === void 0 ? void 0 : _a.has(Promise.prototype)) {\n            execAsync(ticks, tree.a, scope, context, async (e, r) => {\n                if (e)\n                    done(e);\n                else\n                    try {\n                        done(undefined, await r);\n                    }\n                    catch (err) {\n                        done(err);\n                    }\n            }, inLoopOrSwitch).catch(done);\n        }\n        else {\n            done(new SandboxError('Async/await is not permitted'));\n        }\n    }\n    else {\n        return false;\n    }\n    return true;\n}\nexport function executeTree(ticks, context, executionTree, scopes = [], inLoopOrSwitch) {\n    return syncDone((done) => executeTreeWithDone(execSync, done, ticks, context, executionTree, scopes, inLoopOrSwitch)).result;\n}\nexport async function executeTreeAsync(ticks, context, executionTree, scopes = [], inLoopOrSwitch) {\n    let ad;\n    return (ad = asyncDone((done) => executeTreeWithDone(execAsync, done, ticks, context, executionTree, scopes, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n}\nfunction executeTreeWithDone(exec, done, ticks, context, executionTree, scopes = [], inLoopOrSwitch) {\n    if (!executionTree) {\n        done();\n        return;\n    }\n    if (!(executionTree instanceof Array)) {\n        throw new SyntaxError('Bad execution tree');\n    }\n    let scope = context.ctx.globalScope;\n    let s;\n    while (s = scopes.shift()) {\n        if (typeof s !== \"object\")\n            continue;\n        if (s instanceof Scope) {\n            scope = s;\n        }\n        else {\n            scope = new Scope(scope, s, s instanceof LocalScope ? undefined : null);\n        }\n    }\n    if (context.ctx.options.audit && !context.ctx.auditReport) {\n        context.ctx.auditReport = {\n            globalsAccess: new Set(),\n            prototypeAccess: {},\n        };\n    }\n    if (exec === execSync) {\n        _executeWithDoneSync(done, ticks, context, executionTree, scope, inLoopOrSwitch);\n    }\n    else {\n        _executeWithDoneAsync(done, ticks, context, executionTree, scope, inLoopOrSwitch).catch(done);\n    }\n}\nfunction _executeWithDoneSync(done, ticks, context, executionTree, scope, inLoopOrSwitch) {\n    if (!(executionTree instanceof Array))\n        throw new SyntaxError('Bad execution tree');\n    let i = 0;\n    for (i = 0; i < executionTree.length; i++) {\n        let res;\n        let err;\n        const current = executionTree[i];\n        try {\n            execSync(ticks, current, scope, context, (e, r) => {\n                err = e;\n                res = r;\n            }, inLoopOrSwitch);\n        }\n        catch (e) {\n            err = e;\n        }\n        if (err) {\n            done(err);\n            return;\n        }\n        if (res instanceof ExecReturn) {\n            done(undefined, res);\n            return;\n        }\n        if (current instanceof Lisp && current.op === 'return') {\n            done(undefined, new ExecReturn(context.ctx.auditReport, res, true));\n            return;\n        }\n    }\n    done(undefined, new ExecReturn(context.ctx.auditReport, undefined, false));\n}\nasync function _executeWithDoneAsync(done, ticks, context, executionTree, scope, inLoopOrSwitch) {\n    if (!(executionTree instanceof Array))\n        throw new SyntaxError('Bad execution tree');\n    let i = 0;\n    for (i = 0; i < executionTree.length; i++) {\n        let res;\n        let err;\n        const current = executionTree[i];\n        try {\n            await execAsync(ticks, current, scope, context, (e, r) => {\n                err = e;\n                res = r;\n            }, inLoopOrSwitch);\n        }\n        catch (e) {\n            err = e;\n        }\n        if (err) {\n            done(err);\n            return;\n        }\n        if (res instanceof ExecReturn) {\n            done(undefined, res);\n            return;\n        }\n        if (current instanceof Lisp && current.op === 'return') {\n            done(undefined, new ExecReturn(context.ctx.auditReport, res, true));\n            return;\n        }\n    }\n    done(undefined, new ExecReturn(context.ctx.auditReport, undefined, false));\n}\n","import { sandboxFunction, sandboxedEval, sandboxedSetTimeout, sandboxedSetInterval, executeTree, executeTreeAsync, ops, assignCheck, execMany, execAsync, execSync, asyncDone, Scope, FunctionScope, LocalScope, syncDone } from \"./executor.js\";\nimport { parse, expectTypes, setLispType } from \"./parser.js\";\nexport { expectTypes, setLispType, ops as executionOps, assignCheck, execMany, execAsync, execSync, asyncDone, syncDone, executeTree, executeTreeAsync, FunctionScope, LocalScope, };\nexport class SandboxGlobal {\n    constructor(globals) {\n        if (globals === globalThis)\n            return globalThis;\n        for (let i in globals) {\n            this[i] = globals[i];\n        }\n    }\n}\nexport default class Sandbox {\n    constructor(options) {\n        options = Object.assign({\n            audit: false,\n            forbidFunctionCalls: false,\n            forbidFunctionCreation: false,\n            globals: Sandbox.SAFE_GLOBALS,\n            prototypeWhitelist: Sandbox.SAFE_PROTOTYPES,\n            prototypeReplacements: new Map(),\n        }, options || {});\n        const sandboxGlobal = new SandboxGlobal(options.globals);\n        this.context = {\n            sandbox: this,\n            globalsWhitelist: new Set(Object.values(options.globals)),\n            prototypeWhitelist: new Map([...options.prototypeWhitelist].map((a) => [a[0].prototype, a[1]])),\n            options,\n            globalScope: new Scope(null, options.globals, sandboxGlobal),\n            sandboxGlobal,\n            evals: new Map(),\n            getSubscriptions: new Set(),\n            setSubscriptions: new WeakMap(),\n            changeSubscriptions: new WeakMap()\n        };\n        this.context.prototypeWhitelist.set(Object.getPrototypeOf([][Symbol.iterator]()), new Set());\n        const func = sandboxFunction(this.context);\n        this.context.evals.set(Function, func);\n        this.context.evals.set(eval, sandboxedEval(func));\n        this.context.evals.set(setTimeout, sandboxedSetTimeout(func));\n        this.context.evals.set(setInterval, sandboxedSetInterval(func));\n        this.Function = sandboxFunction(this.context, { ticks: BigInt(0) });\n    }\n    static get SAFE_GLOBALS() {\n        return {\n            Function,\n            console: {\n                debug: console.debug,\n                error: console.error,\n                info: console.info,\n                log: console.log,\n                table: console.table,\n                warn: console.warn\n            },\n            isFinite,\n            isNaN,\n            parseFloat,\n            parseInt,\n            decodeURI,\n            decodeURIComponent,\n            encodeURI,\n            encodeURIComponent,\n            escape,\n            unescape,\n            Boolean,\n            Number,\n            BigInt,\n            String,\n            Object,\n            Array,\n            Symbol,\n            Error,\n            EvalError,\n            RangeError,\n            ReferenceError,\n            SyntaxError,\n            TypeError,\n            URIError,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Intl,\n            JSON,\n            Math,\n            Date,\n            RegExp\n        };\n    }\n    static get SAFE_PROTOTYPES() {\n        let protos = [\n            SandboxGlobal,\n            Function,\n            Boolean,\n            Number,\n            BigInt,\n            String,\n            Date,\n            Error,\n            Array,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Symbol,\n            Date,\n            RegExp\n        ];\n        let map = new Map();\n        protos.forEach((proto) => {\n            map.set(proto, new Set());\n        });\n        map.set(Object, new Set([\n            'entries',\n            'fromEntries',\n            'getOwnPropertyNames',\n            'is',\n            'keys',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'toLocaleString',\n            'toString',\n            'valueOf',\n            'values'\n        ]));\n        return map;\n    }\n    subscribeGet(callback) {\n        this.context.getSubscriptions.add(callback);\n        return { unsubscribe: () => this.context.getSubscriptions.delete(callback) };\n    }\n    subscribeSet(obj, name, callback) {\n        const names = this.context.setSubscriptions.get(obj) || new Map();\n        this.context.setSubscriptions.set(obj, names);\n        const callbacks = names.get(name) || new Set();\n        names.set(name, callbacks);\n        callbacks.add(callback);\n        let changeCbs;\n        if (obj && obj[name] && typeof obj[name] === \"object\") {\n            changeCbs = this.context.changeSubscriptions.get(obj[name]) || new Set();\n            changeCbs.add(callback);\n            this.context.changeSubscriptions.set(obj[name], changeCbs);\n        }\n        return {\n            unsubscribe: () => {\n                callbacks.delete(callback);\n                if (changeCbs)\n                    changeCbs.delete(callback);\n            }\n        };\n    }\n    static audit(code, scopes = []) {\n        const globals = {};\n        for (let i of Object.getOwnPropertyNames(globalThis)) {\n            globals[i] = globalThis[i];\n        }\n        return new Sandbox({\n            globals,\n            audit: true,\n        }).executeTree(parse(code), scopes);\n    }\n    static parse(code) {\n        return parse(code);\n    }\n    executeTree(executionTree, scopes = []) {\n        return executeTree({\n            ticks: BigInt(0),\n        }, {\n            ctx: this.context,\n            constants: executionTree.constants,\n            tree: executionTree.tree\n        }, executionTree.tree, scopes);\n    }\n    executeTreeAsync(executionTree, scopes = []) {\n        return executeTreeAsync({\n            ticks: BigInt(0),\n        }, {\n            ctx: this.context,\n            constants: executionTree.constants,\n            tree: executionTree.tree\n        }, executionTree.tree, scopes);\n    }\n    compile(code, optimize = false) {\n        const executionTree = parse(code, optimize);\n        return (...scopes) => {\n            return this.executeTree(executionTree, scopes).result;\n        };\n    }\n    ;\n    compileAsync(code, optimize = false) {\n        const executionTree = parse(code, optimize);\n        return async (...scopes) => {\n            return (await this.executeTreeAsync(executionTree, scopes)).result;\n        };\n    }\n    ;\n    compileExpression(code, optimize = false) {\n        const executionTree = parse(code, optimize, true);\n        return (...scopes) => {\n            return this.executeTree(executionTree, scopes).result;\n        };\n    }\n    compileExpressionAsync(code, optimize = false) {\n        const executionTree = parse(code, optimize, true);\n        return async (...scopes) => {\n            return (await this.executeTreeAsync(executionTree, scopes)).result;\n        };\n    }\n}\n",null,null,null],"names":["parseHexToInt","hex","isOnlyHexChars","match","parseInt","NaN","validateAndParseHex","errorName","enforcedLength","parsedHex","Number","isNaN","undefined","length","SyntaxError","parseHexadecimalCode","code","parsedCode","String","fromCharCode","parseUnicodeCode","surrogateCode","parsedSurrogateCode","isCurlyBraced","text","charAt","parseUnicodeCodePointCode","codePoint","withoutBraces","slice","fromCodePoint","err","RangeError","singleCharacterEscapes","Map","parseSingleCharacterCode","get","escapeMatch","unraw","raw","replace","_","backslash","unicodeWithSurrogate","surrogate","unicode","octal","singleCharacter","lispTypes","ParseError","Error","constructor","message","substring","Lisp","obj","op","a","b","If","t","f","KeyVal","key","val","SpreadObject","item","SpreadArray","lispArrayKey","toLispArray","arr","lisp","inlineIfElse","elseIf","ifElse","space","expectTypes","splitter","types","opHigh","comparitor","boolOp","bitwise","next","inlineIf","assignment","assignModify","assign","incrementerBefore","expEdge","call","incrementerAfter","modifier","not","inverse","negative","positive","typeof","delete","dot","arrayProp","prop","value","createObject","createArray","number","string","literal","regex","boolean","null","und","arrowFunctionSingle","arrowFunction","inlineFunction","group","Infinity","void","await","new","throw","initialize","return","spreadObject","spreadArray","expEnd","expFunction","function","expSingle","for","do","while","loopAction","if","try","block","switch","closings","testMultiple","str","tests","found","i","test","exec","CodeString","ref","start","end","len","char","toString","trimStart","trim","valueOf","emptyString","okFirstChars","aNumber","wordReg","semiColon","insertedSemicolons","WeakMap","quoteCache","restOfExp","constants","part","quote","firstOpening","closingsTests","details","words","isStart","hasSemiTest","includes","filter","insertedSemis","cache","set","has","escape","done","lastChar","isOneLiner","lastInertedSemi","skip","sub","regRes","foundWord","foundNumber","push","lastAnyWord","lastWord","oneliner","startingExecpted","setLispType","fn","forEach","type","closingsCreate","res","expect","ctx","extract","arg","l","funcFound","lispifyExpr","map","e","lispify","lispTree","quoteCount","extractIfElse","_a","count","foundElse","foundTrue","first","elseReg","startsWith","ie","all","Math","max","true","false","condition","startTrue","trueBlock","elseBlock","lispifyBlock","indexOf","statement","insertSemicolons","caseFound","caseTest","cases","defaultFound","cond","bracketFound","exprs","notEmpty","index","matches","primitives","BigInt","JSON","parse","isArrow","isReturn","argPos","isAsync","args","split","unshift","ended","func","eager","lispifyFunction","iteratorRegex","startStep","startInternal","getIterator","beforeStep","checkFirst","step","body","lispifyReturnExpr","extract2","k","iterator","ofStart2","ofStart3","ofCondition","ofStep","inStart2","inStart3","inStep","inCondition","shift","isBlock","catchReg","catchRes","finallyBody","exception","catchBody","offset","argsString","j","lastType","expected","topLevel","startingExpectedWithoutSingle","r","subExpressions","pos","Object","values","defined","expression","parts","skipped","isInserted","flat","tree","hoisted","hoist","concat","Array","isArray","rep","it","closingsNoInsertion","colonsRegex","rest","inserted","valid","edge","checkRegex","cancel","after","flags","notDivide","possibleDivide","extractConstants","currentEnclosure","regexFound","comment","commentStart","currJs","strRes","enclosures","isPossibleDivide","literals","join","strings","pop","regexes","js","ExecReturn","auditReport","result","returned","breakLoop","continueLoop","Prop","context","isConst","isGlobal","isVariable","ReferenceError","optional","reservedWords","Set","VarType","keysOnly","ret","Scope","parent","vars","functionThis","const","let","var","isFuncScope","allVars","globals","functionScope","this","hasOwnProperty","TypeError","SandboxError","declare","LocalScope","currentTicks","sandboxFunction","ticks","SandboxFunction","params","parsed","createFunction","generateArgs","argNames","sandboxedFunctions","WeakSet","scope","name","options","forbidFunctionCreation","executeTree","sandboxedObject","add","createFunctionAsync","prototypeWhitelist","Promise","prototype","executeTreeAsync","sandboxedEval","sandboxEval","sandboxedSetTimeout","sandboxSetTimeout","handler","setTimeout","sandboxedSetInterval","sandboxSetInterval","setInterval","assignCheck","_b","_c","_d","changeSubscriptions","cb","setSubscriptions","arrayChange","splice","reverse","sort","copyWithin","literalRegex","ops2","sandboxGlobal","audit","globalsAccess","globalsWhitelist","evals","globalThis","globalScope","getSubscriptions","Boolean","isFunction","prototypeAccess","prot","getPrototypeOf","whitelist","prototypeReplacements","size","constuctor","g","forbidFunctionCalls","execMany","vals","stringify","recurse","x","y","change","changed","added","removed","startIndex","deleteCount","min","endIndex","items","reg","RegExp","resnums","processed","reses","num","$$","$","bobj","loop","loopScope","internalVars","interalScope","execAsync","ad","asyncDone","d","isInstant","instant","p","innerLoopVars","catch","syncDone","inLoopOrSwitch","executeTreeWithDone","toTest","execSync","isTrue","caseItem","valueOrProp","ops","_execManySync","_execManyAsync","callback","resolve","reject","doneOriginal","_execNoneRecurse","unexecTypes","executionQuota","onExecutionQuotaReached","executionTree","scopes","s","_executeWithDoneSync","_executeWithDoneAsync","current","SandboxGlobal","Sandbox","SAFE_GLOBALS","SAFE_PROTOTYPES","sandbox","Symbol","Function","eval","console","debug","error","info","log","table","warn","isFinite","parseFloat","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","EvalError","URIError","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Intl","Date","protos","proto","subscribeGet","unsubscribe","subscribeSet","names","callbacks","changeCbs","getOwnPropertyNames","compile","optimize","compileAsync","compileExpression","compileExpressionAsync","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDialogElement","HTMLDivElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","HTMLElement","globalAllowedAtttributes","sanitizeType","allowedAttributes","element","attributes","HTMLAnchorElement","HTMLAreaElement","el","HTMLButtonElement","allowedInputs","HTMLInputElement","HTMLSelectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLTextAreaElement","HTMLScriptElement","HTMLStyleElement","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","regHrefJS","regValidSrc","regSystemAtt","srcAttributes","santizeAttribute","attName","attValue","preprocess","allowed","toLowerCase","setAttribute","isJs","hasAttribute","sanitizeHTML","staticHtml","DocumentFragment","remove","att","nodeValue","nodeName","removeAttribute","children","elementStorage","arrs","coll","defaultDelegateObject","on","elem","event","$el","wrap","off","one","ElementCollection","$elements","selector","some","every","compareDocumentPosition","unique","from","toSet","toArray","is","sel","querySelectorAll","parents","contains","find","c","events","opt","objectOrProp","ev","h","wrapEvent","store","getStore","evStore","addEventListener","removeEventListener","clear","trigger","eventType","detail","bubbles","cancelable","CustomEvent","dispatchEvent","evcb","evt","delegate","that","del","once","started","evs","subs","cbs","target","listeners","lts","parentElement","eq","handlers","stoppedPropagation","stoppedImmediatePropagation","cbev","click","addClass","keyCode","currentTarget","getAttribute","attr","tabindex","role","hover","handlerIn","handlerOut","v","removeAttr","selected","checked","files","multiple","$elems","scrollTop","scrollLeft","label","data","removeData","toggleClass","removeClass","force","isObject","className","classList","toggle","hasClass","nameArr","identifier","ind","prevAll","last","nextElementSibling","nextUntil","propElem","nextAll","prev","previousElementSibling","prevUntil","siblings","firstElementChild","$document","document","documentElement","originalEvent","isEqEvent","sip","stopImmediatePropagation","sp","stopPropagation","props","stopppedImmediatePropagation","defineProperties","NodeList","HTMLCollection","Element","selectors","$context","elems","doFilter","doSort","cElem","cont","collection","includeFirst","stopAt","each","wasSet","n","object","objArr","defaultValue","deleteStore","regVarName","regKeyValName","isIterable","html","content","innerHTML","contentElem","detach","preprocessHTML","currentSubs","unsubNested","processHTML","appendChild","run","getScopes","textContent","createElement","FileList","File","ElementScope","$dispatch","$watch","subUnsubs","watch","getRootElement","RootScope","$wrap","Component","components","defineComponent","comp","init","component","runs","getScope","root","newScope","calls","timer","toCall","watchRun","toWatch","watchGets","lastVal","update","now","digest","list","temp","sandboxCache","codes","directives","defineDirective","isContentEditable","reset","pushScope","$$value","form","$form","Node","runDirective","directive","walkerInstance","execSteps","ready","runNested","template","walkTree","unsub","parentSubs","$element","createComment","ifElem","at","before","nestedSubs","cloneNode","exp","varsExp","varMatch","doubleMatch","repeat","forSubs","$index","nestedScopes","prevReady","elementScopeAdded","letter","toUpperCase","SVGElement","style","$event","original","outerHTML","nodeType","walkText","nodes","endsWith","placeholder","createTextNode","childNodes","quotes","endJs","closing","inJs","strs"],"mappings":"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"}