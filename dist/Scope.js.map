{"version":3,"file":"Scope.js","sources":["../node_modules/@nyariv/sandboxjs/dist/Sandbox.js","../src/HTMLSanitizer.ts","../src/eQuery.ts","../src/Scope.ts"],"sourcesContent":["class Prop {\n    constructor(context, prop, isConst = false, isGlobal = false, isVariable = false) {\n        this.context = context;\n        this.prop = prop;\n        this.isConst = isConst;\n        this.isGlobal = isGlobal;\n        this.isVariable = isVariable;\n    }\n}\nclass Lisp {\n    constructor(obj) {\n        this.op = obj.op;\n        this.a = obj.a;\n        this.b = obj.b;\n    }\n}\nclass If {\n    constructor(t, f) {\n        this.t = t;\n        this.f = f;\n    }\n}\nclass KeyVal {\n    constructor(key, val) {\n        this.key = key;\n        this.val = val;\n    }\n}\nclass ObjectFunc {\n    constructor(key, args, tree) {\n        this.key = key;\n        this.args = args;\n        this.tree = tree;\n    }\n}\nclass SpreadObject {\n    constructor(item) {\n        this.item = item;\n    }\n}\nclass SpreadArray {\n    constructor(item) {\n        this.item = item;\n    }\n}\nvar VarType;\n(function (VarType) {\n    VarType[\"let\"] = \"let\";\n    VarType[\"const\"] = \"const\";\n    VarType[\"var\"] = \"var\";\n})(VarType || (VarType = {}));\nclass Scope {\n    constructor(parent, vars = {}, functionThis = undefined) {\n        this.const = new Set();\n        this.let = new Set();\n        this.parent = parent;\n        this.allVars = vars;\n        this.var = new Set(Object.keys(vars));\n        this.globals = !parent ? new Set(Object.keys(vars)) : new Set();\n        this.functionThis = functionThis || !parent;\n        if (functionThis) {\n            this.declare('this', VarType.var, functionThis);\n        }\n    }\n    get(key, functionScope = false) {\n        if (!this.parent || !functionScope || this.functionThis) {\n            if (this.globals.has(key)) {\n                return new Prop(this.functionThis, key, false, true, true);\n            }\n            if (key in this.allVars && (!(key in {}) || this.allVars.hasOwnProperty(key))) {\n                return new Prop(this.allVars, key, this.const.has(key), this.globals.has(key), true);\n            }\n            if (!this.parent) {\n                return new Prop(undefined, key);\n            }\n        }\n        return this.parent.get(key, functionScope);\n    }\n    set(key, val) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be a variable');\n        let prop = this.get(key);\n        if (prop.context === undefined) {\n            throw new ReferenceError(`Variable '${key}' was not declared.`);\n        }\n        ``;\n        if (prop.isConst) {\n            throw new TypeError(`Cannot assign to const variable '${key}'`);\n        }\n        if (prop.isGlobal) {\n            throw new SandboxError(`Cannot override global variable '${key}'`);\n        }\n        prop.context[prop] = val;\n        return prop;\n    }\n    declare(key, type = null, value = undefined, isGlobal = false) {\n        if (type === 'var' && !this.functionThis && this.parent) {\n            return this.parent.declare(key, type, value, isGlobal);\n        }\n        else if (!this.var.has(key) || !this.let.has(key) || !this.const.has(key) || !(this.globals.has(key))) {\n            if (isGlobal) {\n                this.globals.add(key);\n            }\n            this[type].add(key);\n            this.allVars[key] = value;\n        }\n        else {\n            throw Error(`Variable '${key}' already declared`);\n        }\n        return new Prop(this.allVars, key, this.const.has(key), isGlobal);\n    }\n}\nclass ParseError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nclass SandboxError extends Error {\n}\nclass SandboxGlobal {\n    constructor(globals) {\n        if (globals === globalThis)\n            return globalThis;\n        for (let i in globals) {\n            this[i] = globals[i];\n        }\n    }\n}\nfunction sandboxFunction(context) {\n    return SandboxFunction;\n    function SandboxFunction(...params) {\n        let code = params.pop();\n        let parsed = Sandbox.parse(code);\n        return function (...args) {\n            const vars = {};\n            for (let i of params) {\n                vars[i] = args.shift();\n            }\n            const res = context.sandbox.executeTree(parsed);\n            if (context.options.audit) {\n                for (let key in res.auditReport.globalsAccess) {\n                    let add = res.auditReport.globalsAccess[key];\n                    context.auditReport.globalsAccess[key] = context.auditReport.globalsAccess[key] || new Set();\n                    add.forEach((val) => {\n                        context.auditReport.globalsAccess[key].add(val);\n                    });\n                }\n                for (let Class in res.auditReport.prototypeAccess) {\n                    let add = res.auditReport.prototypeAccess[Class];\n                    context.auditReport.prototypeAccess[Class] = context.auditReport.prototypeAccess[Class] || new Set();\n                    add.forEach((val) => {\n                        context.auditReport.prototypeAccess[Class].add(val);\n                    });\n                }\n            }\n            return res.result;\n        };\n    }\n}\nfunction sandboxedEval(func) {\n    return sandboxEval;\n    function sandboxEval(code) {\n        return func(code)();\n    }\n}\nfunction sandboxedSetTimeout(func) {\n    return function sandboxSetTimeout(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setTimeout(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nfunction sandboxedSetInterval(func) {\n    return function sandboxSetInterval(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setInterval(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nlet expectTypes = {\n    op: {\n        types: { op: /^(\\/|\\*\\*(?!\\=)|\\*(?!\\=)|\\%(?!\\=))/ },\n        next: [\n            'value',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    splitter: {\n        types: {\n            split: /^(&&|&|\\|\\||\\||<=|>=|<|>|!==|!=|===|==| instanceof | in |\\+(?!\\+)|\\-(?!\\-))(?!\\=)/,\n        },\n        next: [\n            'value',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    if: {\n        types: {\n            if: /^\\?/,\n            else: /^:/,\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    assignment: {\n        types: {\n            assignModify: /^(\\-=|\\+=|\\/=|\\*\\*=|\\*=|%=|\\^=|\\&=|\\|=)/,\n            assign: /^(=)/\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    incrementerBefore: {\n        types: { incrementerBefore: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'prop',\n        ]\n    },\n    incrementerAfter: {\n        types: { incrementerAfter: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'splitter',\n            'op',\n            'expEnd'\n        ]\n    },\n    expEdge: {\n        types: {\n            call: /^[\\(]/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    modifier: {\n        types: {\n            not: /^!/,\n            inverse: /^~/,\n            negative: /^\\-(?!\\-)/,\n            positive: /^\\+(?!\\+)/,\n            typeof: /^ typeof /,\n            delete: /^ delete /,\n        },\n        next: [\n            'exp',\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    exp: {\n        types: {\n            createObject: /^\\{/,\n            createArray: /^\\[/,\n            group: /^\\(/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    dot: {\n        types: {\n            arrayProp: /^[\\[]/,\n            dot: /^\\.(?!\\.)/\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    prop: {\n        types: {\n            prop: /^[a-zA-Z\\$_][a-zA-Z\\d\\$_]*/,\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    value: {\n        types: {\n            number: /^\\-?\\d+(\\.\\d+)?/,\n            string: /^\"(\\d+)\"/,\n            literal: /^`(\\d+)`/,\n            boolean: /^(true|false)(?![\\w$_])/,\n            null: /^null(?![\\w$_])/,\n            und: /^undefined(?![\\w$_])/,\n            NaN: /^NaN(?![\\w$_])/,\n            Infinity: /^Infinity(?![\\w$_])/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    function: {\n        types: {\n            arrowFunc: /^\\(?(((\\.\\.\\.)?[a-zA-Z\\$_][a-zA-Z\\d\\$_]*,?)*)(\\))?=>({)?/\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    initialize: {\n        types: {\n            initialize: /^ (var|let|const) [a-zA-Z\\$_][a-zA-Z\\d\\$_]*/\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    },\n    spreadObject: {\n        types: {\n            spreadObject: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'exp',\n            'prop',\n        ]\n    },\n    spreadArray: {\n        types: {\n            spreadArray: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'exp',\n            'prop',\n        ]\n    },\n    expEnd: { types: {}, next: [] },\n    expStart: {\n        types: {\n            return: /^ return /,\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    }\n};\nlet closings = {\n    \"(\": \")\",\n    \"[\": \"]\",\n    \"{\": \"}\",\n    \"'\": \"'\",\n    '\"': '\"',\n    \"`\": \"`\"\n};\nlet closingsRegex = {\n    \"(\": /^\\)/,\n    \"[\": /^\\]/,\n    \"{\": /^\\}/,\n    \"'\": /^\\'/,\n    '\"': /^\\\"/,\n    \"`\": /^\\`/\n};\nconst okFirstChars = /^[\\+\\-~ !]/;\nconst restOfExp = (part, tests, quote) => {\n    let isStart = true;\n    tests = tests || [\n        expectTypes.op.types.op,\n        expectTypes.splitter.types.split,\n        expectTypes.if.types.if,\n        expectTypes.if.types.else\n    ];\n    let escape = false;\n    let done = false;\n    let i;\n    for (i = 0; i < part.length && !done; i++) {\n        let char = part[i];\n        if (quote === '\"' || quote === \"'\" || quote === \"`\") {\n            if (quote === \"`\" && char === \"$\" && part[i + 1] === \"{\" && !escape) {\n                let skip = restOfExp(part.substring(i + 2), [closingsRegex['{']]);\n                i += skip.length + 2;\n            }\n            else if (char === quote && !escape) {\n                return part.substring(0, i);\n            }\n            escape = char === \"\\\\\";\n        }\n        else if (closings[char]) {\n            let skip = restOfExp(part.substring(i + 1), [closingsRegex[quote]], char);\n            i += skip.length + 1;\n            isStart = false;\n        }\n        else if (!quote) {\n            let sub = part.substring(i);\n            for (let test of tests) {\n                done = test.test(sub);\n                if (done)\n                    break;\n            }\n            if (isStart) {\n                if (okFirstChars.test(sub)) {\n                    done = false;\n                }\n                else {\n                    isStart = false;\n                }\n            }\n            if (done)\n                break;\n        }\n        else if (char === closings[quote]) {\n            return part.substring(0, i);\n        }\n    }\n    return part.substring(0, i);\n};\nrestOfExp.next = [\n    'splitter',\n    'op',\n    'expEnd',\n    'if'\n];\nfunction assignCheck(obj, context, op = 'assign') {\n    var _a, _b, _c, _d;\n    if (obj.context === undefined) {\n        throw new ReferenceError(`Cannot ${op} value to undefined.`);\n    }\n    if (typeof obj.context !== 'object' && typeof obj.context !== 'function') {\n        throw new SyntaxError(`Cannot ${op} value to a primitive.`);\n    }\n    if (obj.isConst) {\n        throw new TypeError(`Cannot set value to const variable '${obj.prop}'`);\n    }\n    if (obj.isGlobal) {\n        throw new SandboxError(`Cannot ${op} property '${obj.prop}' of a global object`);\n    }\n    if (typeof obj.context[obj.prop] === 'function' && !obj.context.hasOwnProperty(obj.prop)) {\n        throw new SandboxError(`Override prototype property '${obj.prop}' not allowed`);\n    }\n    if (op === \"delete\") {\n        if (obj.context.hasOwnProperty(obj.prop)) {\n            (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb({ type: \"delete\", prop: obj.prop }));\n        }\n    }\n    else if (obj.context.hasOwnProperty(obj.prop)) {\n        (_c = (_b = context.setSubscriptions.get(obj.context)) === null || _b === void 0 ? void 0 : _b.get(obj.prop)) === null || _c === void 0 ? void 0 : _c.forEach((cb) => cb({\n            type: \"replace\"\n        }));\n    }\n    else {\n        (_d = context.changeSubscriptions.get(obj.context)) === null || _d === void 0 ? void 0 : _d.forEach((cb) => cb({ type: \"create\", prop: obj.prop }));\n    }\n}\nconst arrayChange = new Set([\n    [].push,\n    [].pop,\n    [].shift,\n    [].unshift,\n    [].splice,\n    [].reverse,\n    [].sort,\n    [].copyWithin\n]);\nlet ops2 = {\n    'prop': (a, b, obj, context, scope) => {\n        if (a === null) {\n            throw new TypeError(`Cannot get property ${b} of null`);\n        }\n        const type = typeof a;\n        if (type === 'undefined') {\n            let prop = scope.get(b);\n            if (prop.context === undefined)\n                throw new ReferenceError(`${b} is not defined`);\n            if (prop.context === context.sandboxGlobal) {\n                if (context.options.audit) {\n                    context.auditReport.globalsAccess.add(b);\n                }\n                const rep = context.evals.get(context.sandboxGlobal[b]);\n                if (rep)\n                    return rep;\n            }\n            if (prop.context && prop.context[b] === globalThis) {\n                return context.globalScope.get('this');\n            }\n            context.getSubscriptions.forEach((cb) => cb(prop.context, prop.prop));\n            return prop;\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                a = new Number(a);\n            }\n            else if (type === 'string') {\n                a = new String(a);\n            }\n            else if (type === 'boolean') {\n                a = new Boolean(a);\n            }\n        }\n        else if (typeof a.hasOwnProperty === 'undefined') {\n            return new Prop(undefined, b);\n        }\n        const isFunction = type === 'function';\n        let prototypeAccess = isFunction || !(a.hasOwnProperty(b) || typeof b === 'number');\n        if (context.options.audit && prototypeAccess) {\n            if (typeof b === 'string') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        if (!context.auditReport.prototypeAccess[prot.constructor.name]) {\n                            context.auditReport.prototypeAccess[prot.constructor.name] = new Set();\n                        }\n                        context.auditReport.prototypeAccess[prot.constructor.name].add(b);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        if (prototypeAccess) {\n            if (isFunction) {\n                if (!['name', 'length', 'constructor'].includes(b) && a.hasOwnProperty(b)) {\n                    const whitelist = context.prototypeWhitelist.get(a);\n                    const replace = context.prototypeReplacements.get(a);\n                    if (replace) {\n                        return new Prop(replace(a, true), b);\n                    }\n                    if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                    }\n                    else {\n                        throw new SandboxError(`Static method or property access not permitted: ${a.name}.${b}`);\n                    }\n                }\n            }\n            else if (b !== 'constructor') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        const whitelist = context.prototypeWhitelist.get(prot.constructor);\n                        const replace = context.prototypeReplacements.get(prot.constuctor);\n                        if (replace) {\n                            return new Prop(replace(a, false), b);\n                        }\n                        if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                            break;\n                        }\n                        throw new SandboxError(`Method or property access not permitted: ${prot.constructor.name}.${b}`);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        const rep = context.evals.get(a[b]);\n        if (rep)\n            return rep;\n        if (a[b] === globalThis) {\n            return context.globalScope.get('this');\n        }\n        let g = obj.isGlobal || (isFunction && a.name !== 'sandboxArrowFunction') || context.globalsWhitelist.has(a);\n        if (!g) {\n            context.getSubscriptions.forEach((cb) => cb(a, b));\n        }\n        return new Prop(a, b, false, g);\n    },\n    'call': (a, b, obj, context, scope) => {\n        var _a;\n        if (context.options.forbidMethodCalls)\n            throw new SandboxError(\"Method calls are not allowed\");\n        if (typeof a !== 'function') {\n            throw new TypeError(`${obj.prop} is not a function`);\n        }\n        const args = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        if (typeof obj === 'function') {\n            return obj(...args.map((item) => exec(item, scope, context)));\n        }\n        const vals = args.map((item) => exec(item, scope, context));\n        if (obj.context[obj.prop] === JSON.stringify && context.getSubscriptions.size) {\n            const cache = new Set();\n            const recurse = (x) => {\n                if (!x || !(typeof x === 'object') || cache.has(x))\n                    return;\n                cache.add(x);\n                for (let y in x) {\n                    context.getSubscriptions.forEach((cb) => cb(x, y));\n                    recurse(x[y]);\n                }\n            };\n            recurse(vals[0]);\n        }\n        if (obj.context instanceof Array && arrayChange.has(obj.context[obj.prop]) && context.changeSubscriptions.get(obj.context)) {\n            let change;\n            let changed = false;\n            if (obj.prop === \"push\") {\n                change = {\n                    type: \"push\",\n                    added: vals\n                };\n                changed = !!vals.length;\n            }\n            else if (obj.prop === \"pop\") {\n                change = {\n                    type: \"pop\",\n                    removed: obj.context.slice(-1)\n                };\n                changed = !!change.removed.length;\n            }\n            else if (obj.prop === \"shift\") {\n                change = {\n                    type: \"shift\",\n                    removed: obj.context.slice(0, 1)\n                };\n                changed = !!change.removed.length;\n            }\n            else if (obj.prop === \"unshift\") {\n                change = {\n                    type: \"unshift\",\n                    added: vals\n                };\n                changed = !!vals.length;\n            }\n            else if (obj.prop === \"splice\") {\n                change = {\n                    type: \"splice\",\n                    startIndex: vals[0],\n                    deleteCount: vals[1] === undefined ? obj.context.length : vals[1],\n                    added: vals.slice(2),\n                    removed: obj.context.slice(vals[0], vals[1] === undefined ? undefined : vals[0] + vals[1])\n                };\n                changed = !!change.added.length || !!change.removed.length;\n            }\n            else if (obj.prop === \"reverse\" || obj.prop === \"sort\") {\n                change = { type: obj.prop };\n                changed = !!obj.context.length;\n            }\n            else if (obj.prop === \"copyWithin\") {\n                let len = vals[2] === undefined ? obj.context.length - vals[1] : Math.min(obj.context.length, vals[2] - vals[1]);\n                change = {\n                    type: \"copyWithin\",\n                    startIndex: vals[0],\n                    endIndex: vals[0] + len,\n                    added: obj.context.slice(vals[1], vals[1] + len),\n                    removed: obj.context.slice(vals[0], vals[0] + len)\n                };\n                changed = !!change.added.length || !!change.removed.length;\n            }\n            if (changed) {\n                (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb(change));\n            }\n            return obj.context[obj.prop](...vals);\n        }\n        return obj.context[obj.prop](...args.map((item) => exec(item, scope, context)));\n    },\n    'createObject': (a, b, obj, context, scope) => {\n        let res = {};\n        for (let item of b) {\n            if (item instanceof SpreadObject) {\n                res = { ...res, ...item.item };\n            }\n            else if (item instanceof ObjectFunc) {\n                let f = item;\n                res[f.key] = function (...args) {\n                    const vars = {};\n                    f.args.forEach((arg, i) => {\n                        vars[arg] = args[i];\n                    });\n                    return context.sandbox.executeTree({\n                        tree: f.tree,\n                        strings: context.strings,\n                        literals: context.literals,\n                    }, [new Scope(scope, vars, this)]).result;\n                };\n            }\n            else {\n                res[item.key] = item.val;\n            }\n        }\n        return res;\n    },\n    'keyVal': (a, b) => new KeyVal(a, b),\n    'createArray': (a, b, obj, context, scope) => {\n        return b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat().map((item) => exec(item, scope, context));\n    },\n    'group': (a, b) => b,\n    'string': (a, b, obj, context) => context.strings[b],\n    'literal': (a, b, obj, context, scope) => {\n        let name = context.literals[b].a;\n        return name.replace(/(\\$\\$)*(\\$)?\\${(\\d+)}/g, (match, $$, $, num) => {\n            if ($)\n                return match;\n            let res = exec(context.literals[b].b[parseInt(num, 10)], scope, context);\n            res = res instanceof Prop ? res.context[res.prop] : res;\n            return ($$ ? $$ : '') + `${res}`.replace(/\\$/g, '$$');\n        }).replace(/\\$\\$/g, '$');\n    },\n    'spreadArray': (a, b, obj, context, scope) => {\n        return new SpreadArray(exec(b, scope, context));\n    },\n    'spreadObject': (a, b, obj, context, scope) => {\n        return new SpreadObject(exec(b, scope, context));\n    },\n    '!': (a, b) => !b,\n    '~': (a, b) => ~b,\n    '++$': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return ++obj.context[obj.prop];\n    },\n    '$++': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop]++;\n    },\n    '--$': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return --obj.context[obj.prop];\n    },\n    '$--': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop]--;\n    },\n    '=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        obj.context[obj.prop] = b;\n        return new Prop(obj.context, obj.prop, false, obj.isGlobal);\n    },\n    '+=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] += b;\n    },\n    '-=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] -= b;\n    },\n    '/=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] /= b;\n    },\n    '*=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] *= b;\n    },\n    '**=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] **= b;\n    },\n    '%=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] %= b;\n    },\n    '^=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] ^= b;\n    },\n    '&=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] &= b;\n    },\n    '|=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] |= b;\n    },\n    '?': (a, b) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        return a ? b.t : b.f;\n    },\n    '>': (a, b) => a > b,\n    '<': (a, b) => a < b,\n    '>=': (a, b) => a >= b,\n    '<=': (a, b) => a <= b,\n    '==': (a, b) => a == b,\n    '===': (a, b) => a === b,\n    '!=': (a, b) => a != b,\n    '!==': (a, b) => a !== b,\n    '&&': (a, b) => a && b,\n    '||': (a, b) => a || b,\n    '&': (a, b) => a & b,\n    '|': (a, b) => a | b,\n    ':': (a, b) => new If(a, b),\n    '+': (a, b) => a + b,\n    '-': (a, b) => a - b,\n    '$+': (a, b) => +b,\n    '$-': (a, b) => -b,\n    '/': (a, b) => a / b,\n    '*': (a, b) => a * b,\n    '%': (a, b) => a % b,\n    ' typeof ': (a, b) => typeof b,\n    ' instanceof ': (a, b) => a instanceof b,\n    ' in ': (a, b) => a in b,\n    ' delete ': (a, b, obj, context, scope, bobj) => {\n        if (bobj.context === undefined) {\n            return true;\n        }\n        assignCheck(bobj, context, 'delete');\n        if (bobj.isVariable)\n            return false;\n        return delete bobj.context[bobj.prop];\n    },\n    'return': (a, b) => b,\n    'var': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.var, exec(b, scope, context));\n    },\n    'let': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.let, exec(b, scope, context), bobj && bobj.isGlobal);\n    },\n    'const': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.const, exec(b, scope, context));\n    },\n    'arrowFunc': (a, b, obj, context, scope) => {\n        const sandboxArrowFunction = (...args) => {\n            const vars = {};\n            a.forEach((arg, i) => {\n                if (arg.startsWith('...')) {\n                    vars[arg.substring(3)] = args.slice(i);\n                }\n                else {\n                    vars[arg] = args[i];\n                }\n            });\n            return context.sandbox.executeTree({\n                tree: b,\n                strings: context.strings,\n                literals: context.literals,\n            }, [new Scope(scope, vars)]).result;\n        };\n        return sandboxArrowFunction;\n    }\n};\nlet ops = new Map();\nfor (let op in ops2) {\n    ops.set(op, ops2[op]);\n}\nlet lispTypes = new Map();\nconst setLispType = (types, fn) => {\n    types.forEach((type) => {\n        lispTypes.set(type, fn);\n    });\n};\nconst closingsCreate = {\n    'createArray': /^\\]/,\n    'createObject': /^\\}/,\n    'group': /^\\)/,\n    'arrayProp': /^\\]/,\n    'call': /^\\)/\n};\nsetLispType(['createArray', 'createObject', 'group', 'arrayProp', 'call'], (type, part, res, expect, ctx) => {\n    let extract = \"\";\n    let arg = [];\n    let end = false;\n    let i = 1;\n    while (i < part.length && !end) {\n        extract = restOfExp(part.substring(i), [\n            closingsCreate[type],\n            /^,/\n        ]);\n        i += extract.length;\n        if (extract) {\n            arg.push(extract);\n        }\n        if (part[i] !== ',') {\n            end = true;\n        }\n        else {\n            i++;\n        }\n    }\n    const next = ['value', 'function', 'prop', 'exp', 'modifier', 'incrementerBefore'];\n    let l;\n    let fFound;\n    const reg2 = /^([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\((([a-zA-Z\\$_][a-zA-Z\\d\\$_]*,?)*)\\)?{/;\n    switch (type) {\n        case 'group':\n        case 'arrayProp':\n            l = lispify(arg.pop());\n            break;\n        case 'call':\n        case 'createArray':\n            l = arg.map((e) => lispify(e, [...next, 'spreadArray']));\n            break;\n        case 'createObject':\n            l = arg.map((str) => {\n                let value;\n                let key;\n                fFound = reg2.exec(str);\n                if (fFound) {\n                    let args = fFound[2] ? fFound[2].split(\",\") : [];\n                    const func = restOfExp(str.substring(fFound.index + fFound[0].length), [/^}/]);\n                    return new ObjectFunc(fFound[1], args, Sandbox.parse(func, null).tree);\n                }\n                else {\n                    let extract = restOfExp(str, [/^:/]);\n                    key = lispify(extract, [...next, 'spreadObject']);\n                    if (key instanceof Lisp && key.op === 'prop') {\n                        key = key.b;\n                    }\n                    if (extract.length === str.length)\n                        return key;\n                    value = lispify(str.substring(extract.length + 1));\n                }\n                return new Lisp({\n                    op: 'keyVal',\n                    a: key,\n                    b: value\n                });\n            });\n            break;\n    }\n    type = type === 'arrayProp' ? 'prop' : type;\n    ctx.lispTree = lispify(part.substring(i + 1), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: ctx.lispTree,\n        b: l,\n    }));\n});\nsetLispType(['inverse', 'not', 'negative', 'positive', 'typeof', 'delete', 'op'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length));\n    ctx.lispTree = lispify(part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: ['positive', 'negative'].includes(type) ? '$' + res[0] : res[0],\n        a: ctx.lispTree,\n        b: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerBefore'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(2));\n    ctx.lispTree = lispify(part.substring(extract.length + 2), restOfExp.next, new Lisp({\n        op: res[0] + \"$\",\n        a: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerAfter'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: \"$\" + res[0],\n        a: ctx.lispTree,\n    }));\n});\nsetLispType(['assign', 'assignModify'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['split'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length), [\n        expectTypes.splitter.types.split,\n        expectTypes.if.types.if,\n        expectTypes.if.types.else\n    ]);\n    ctx.lispTree = lispify(part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['if'], (type, part, res, expect, ctx) => {\n    let found = false;\n    let extract = \"\";\n    let quoteCount = 1;\n    while (!found && extract.length < part.length) {\n        extract += restOfExp(part.substring(extract.length + 1), [\n            expectTypes.if.types.if,\n            expectTypes.if.types.else\n        ]);\n        if (part[extract.length + 1] === '?') {\n            quoteCount++;\n        }\n        else {\n            quoteCount--;\n        }\n        if (!quoteCount) {\n            found = true;\n        }\n        else {\n            extract += part[extract.length + 1];\n        }\n    }\n    ctx.lispTree = new Lisp({\n        op: '?',\n        a: ctx.lispTree,\n        b: new Lisp({\n            op: ':',\n            a: lispify(extract),\n            b: lispify(part.substring(res[0].length + extract.length + 1))\n        })\n    });\n});\nsetLispType(['dot', 'prop'], (type, part, res, expect, ctx) => {\n    let prop = res[0];\n    let index = res[0].length;\n    if (res[0] === '.') {\n        let matches = part.substring(res[0].length).match(expectTypes.prop.types.prop);\n        if (matches.length) {\n            prop = matches[0];\n            index = prop.length + res[0].length;\n        }\n        else {\n            throw Error('Hanging  dot:' + part);\n        }\n    }\n    ctx.lispTree = lispify(part.substring(index), expectTypes[expect].next, new Lisp({\n        op: 'prop',\n        a: ctx.lispTree,\n        b: prop\n    }));\n});\nsetLispType(['spreadArray', 'spreadObject', 'return'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispify(part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['number', 'boolean', 'null'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, JSON.parse(res[0]));\n});\nconst constants = {\n    NaN,\n    Infinity,\n};\nsetLispType(['und', 'NaN', 'Infinity'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, constants[type]);\n});\nsetLispType(['string', 'literal'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: type,\n        b: parseInt(JSON.parse(res[1]), 10),\n    }));\n});\nsetLispType(['initialize'], (type, part, res, expect, ctx) => {\n    const split = res[0].split(/ /g);\n    if (part.length === res[0].length) {\n        ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n            op: split[1],\n            a: split[2]\n        }));\n    }\n    else {\n        ctx.lispTree = new Lisp({\n            op: split[1],\n            a: split[2],\n            b: lispify(part.substring(res[0].length + 1), expectTypes[expect].next)\n        });\n    }\n});\nsetLispType(['arrowFunc'], (type, part, res, expect, ctx) => {\n    let args = res[1] ? res[1].split(\",\") : [];\n    if (res[4]) {\n        if (res[0][0] !== '(')\n            throw new SyntaxError('Unstarted inline function brackets: ' + res[0]);\n    }\n    else if (args.length) {\n        args = [args.pop()];\n    }\n    let ended = false;\n    args.forEach((arg) => {\n        if (ended)\n            throw new SyntaxError('Rest parameter must be last formal parameter');\n        if (arg.startsWith('...'))\n            ended = true;\n    });\n    const func = (res[5] ? '' : ' return ') + restOfExp(part.substring(res[0].length), res[5] ? [/^}/] : [/^[,;\\)\\}\\]]/]);\n    ctx.lispTree = lispify(part.substring(res[0].length + func.length + 1), expectTypes[expect].next, new Lisp({\n        op: 'arrowFunc',\n        a: args,\n        b: Sandbox.parse(func, null).tree\n    }));\n});\nlet lastType;\nfunction lispify(part, expected, lispTree) {\n    expected = expected || ['initialize', 'expStart', 'value', 'function', 'prop', 'exp', 'modifier', 'incrementerBefore', 'expEnd'];\n    if (part === undefined)\n        return lispTree;\n    if (!part.length && !expected.includes('expEnd')) {\n        throw new SyntaxError(\"Unexpected end of expression\");\n    }\n    let ctx = { lispTree: lispTree };\n    let res;\n    for (let expect of expected) {\n        if (expect === 'expEnd') {\n            continue;\n        }\n        for (let type in expectTypes[expect].types) {\n            if (type === 'expEnd') {\n                continue;\n            }\n            if (res = expectTypes[expect].types[type].exec(part)) {\n                lastType = type;\n                lispTypes.get(type)(type, part, res, expect, ctx);\n                break;\n            }\n        }\n        if (res)\n            break;\n    }\n    if (!res && part.length) {\n        throw Error(`Unexpected token (${lastType}): ${part}`);\n    }\n    return ctx.lispTree;\n}\nfunction exec(tree, scope, context) {\n    if (tree instanceof Prop) {\n        return tree.context[tree.prop];\n    }\n    if (Array.isArray(tree)) {\n        return tree.map((item) => exec(item, scope, context));\n    }\n    if (!(tree instanceof Lisp)) {\n        return tree;\n    }\n    if (tree.op === 'arrowFunc') {\n        return ops.get(tree.op)(tree.a, tree.b, undefined, context, scope);\n    }\n    let obj = exec(tree.a, scope, context);\n    let a = obj instanceof Prop ? (obj.context ? obj.context[obj.prop] : undefined) : obj;\n    let bobj = exec(tree.b, scope, context);\n    let b = bobj instanceof Prop ? (bobj.context ? bobj.context[bobj.prop] : undefined) : bobj;\n    if (ops.has(tree.op)) {\n        let res = ops.get(tree.op)(a, b, obj, context, scope, bobj);\n        return res;\n    }\n    throw new SyntaxError('Unknown operator: ' + tree.op);\n}\nexport default class Sandbox {\n    constructor(globals = Sandbox.SAFE_GLOBALS, prototypeWhitelist = Sandbox.SAFE_PROTOTYPES, prototypeReplacements = new Map(), options = { audit: false }) {\n        const sandboxGlobal = new SandboxGlobal(globals);\n        this.context = {\n            sandbox: this,\n            globals,\n            prototypeWhitelist,\n            prototypeReplacements,\n            globalsWhitelist: new Set(Object.values(globals)),\n            options,\n            globalScope: new Scope(null, globals, sandboxGlobal),\n            sandboxGlobal,\n            evals: new Map(),\n            getSubscriptions: new Set(),\n            setSubscriptions: new WeakMap(),\n            changeSubscriptions: new WeakMap(),\n        };\n        const func = sandboxFunction(this.context);\n        this.context.evals.set(Function, func);\n        this.context.evals.set(eval, sandboxedEval(func));\n        this.context.evals.set(setTimeout, sandboxedSetTimeout(func));\n        this.context.evals.set(setInterval, sandboxedSetInterval(func));\n    }\n    static get SAFE_GLOBALS() {\n        return {\n            Function,\n            console: {\n                debug: console.debug,\n                error: console.error,\n                info: console.info,\n                log: console.log,\n                table: console.table,\n                warn: console.warn\n            },\n            isFinite,\n            isNaN,\n            parseFloat,\n            parseInt,\n            decodeURI,\n            decodeURIComponent,\n            encodeURI,\n            encodeURIComponent,\n            escape,\n            unescape,\n            Boolean,\n            Number,\n            String,\n            Object,\n            Array,\n            Symbol,\n            Error,\n            EvalError,\n            RangeError,\n            ReferenceError,\n            SyntaxError,\n            TypeError,\n            URIError,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Intl,\n            JSON,\n            Math,\n        };\n    }\n    static get SAFE_PROTOTYPES() {\n        let protos = [\n            SandboxGlobal,\n            Function,\n            Boolean,\n            Number,\n            String,\n            Date,\n            RegExp,\n            Error,\n            Array,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n        ];\n        let map = new Map();\n        protos.forEach((proto) => {\n            map.set(proto, new Set());\n        });\n        map.set(Object, new Set([\n            'entries',\n            'fromEntries',\n            'getOwnPropertyNames',\n            'is',\n            'keys',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'toLocaleString',\n            'toString',\n            'valueOf',\n            'values'\n        ]));\n        return map;\n    }\n    subscribeGet(callback) {\n        this.context.getSubscriptions.add(callback);\n        return { unsubscribe: () => this.context.getSubscriptions.delete(callback) };\n    }\n    subscribeSet(obj, name, callback) {\n        const names = this.context.setSubscriptions.get(obj) || new Map();\n        this.context.setSubscriptions.set(obj, names);\n        const callbacks = names.get(name) || new Set();\n        names.set(name, callbacks);\n        callbacks.add(callback);\n        let changeCbs;\n        if (obj && obj[name] && typeof obj[name] === \"object\") {\n            changeCbs = this.context.changeSubscriptions.get(obj[name]) || new Set();\n            changeCbs.add(callback);\n            this.context.changeSubscriptions.set(obj[name], changeCbs);\n        }\n        return { unsubscribe: () => {\n                callbacks.delete(callback);\n                if (changeCbs)\n                    changeCbs.delete(callback);\n            } };\n    }\n    static audit(code, scopes = []) {\n        return new Sandbox(globalThis, new Map(), new Map(), {\n            audit: true,\n        }).executeTree(Sandbox.parse(code), scopes);\n    }\n    static parse(code, strings = [], literals = []) {\n        if (typeof code !== 'string')\n            throw new ParseError(`Cannot parse ${code}`, code);\n        // console.log('parse', str);\n        let str = code;\n        let quote;\n        let extract = \"\";\n        let escape = false;\n        let js = [];\n        let currJs = [];\n        if (strings) {\n            let extractSkip = 0;\n            for (let i = 0; i < str.length; i++) {\n                let char = str[i];\n                if (escape) {\n                    if (char === \"$\" && quote === '`') {\n                        extractSkip--;\n                        char = '$$';\n                    }\n                    else if (char === 'u') {\n                        let reg = /^[a-fA-F\\d]{2,4}/.exec(str.substring(i + 1));\n                        let num;\n                        if (!reg) {\n                            num = Array.from(/^{[a-fA-F\\d]+}/.exec(str.substring(i + 1)) || [\"\"]);\n                        }\n                        else {\n                            num = Array.from(reg);\n                        }\n                        char = JSON.parse(`\"\\\\u${num[0]}\"`);\n                        str = str.substring(0, i - 1) + char + str.substring(i + (1 + num[0].length));\n                        i -= 1;\n                    }\n                    else if (char != '`') {\n                        char = JSON.parse(`\"\\\\${char}\"`);\n                    }\n                }\n                else if (char === '$' && quote === '`' && str[i + 1] !== '{') {\n                    extractSkip--;\n                    char = '$$';\n                }\n                if (quote === \"`\" && char === \"$\" && str[i + 1] === \"{\") {\n                    let skip = restOfExp(str.substring(i + 2), [/^}/]);\n                    currJs.push(skip);\n                    extractSkip += skip.length + 3;\n                    extract += `\\${${currJs.length - 1}}`;\n                    i += skip.length + 2;\n                }\n                else if (!quote && (char === \"'\" || char === '\"' || char === '`') && !escape) {\n                    currJs = [];\n                    extractSkip = 0;\n                    quote = char;\n                }\n                else if (quote === char && !escape) {\n                    let len;\n                    if (quote === '`') {\n                        literals.push({\n                            op: 'literal',\n                            a: extract,\n                            b: currJs\n                        });\n                        js.push(currJs);\n                        str = str.substring(0, i - extractSkip - 1) + `\\`${literals.length - 1}\\`` + str.substring(i + 1);\n                        len = (literals.length - 1).toString().length;\n                    }\n                    else {\n                        strings.push(extract);\n                        str = str.substring(0, i - extract.length - 1) + `\"${strings.length - 1}\"` + str.substring(i + 1);\n                        len = (strings.length - 1).toString().length;\n                    }\n                    quote = null;\n                    i -= extract.length - len;\n                    extract = \"\";\n                }\n                else if (quote && !(!escape && char === \"\\\\\")) {\n                    extractSkip += escape ? 1 + char.length : char.length;\n                    extract += char;\n                }\n                escape = quote && !escape && char === \"\\\\\";\n            }\n            str = str.replace(/([^\\w_$]|^)((var|let|const|typeof|return|instanceof|in|delete)(?=[^\\w_$]|$))/g, (match, start, keyword) => {\n                if (keyword.length !== keyword.trim().length)\n                    throw new Error(keyword);\n                return `${start}#${keyword}#`;\n            }).replace(/\\s/g, \"\").replace(/#/g, \" \");\n            js.forEach((j) => {\n                const a = j.map((skip) => this.parse(skip, strings, literals).tree[0]);\n                j.length = 0;\n                j.push(...a);\n            });\n        }\n        let parts = [];\n        let part;\n        let pos = 0;\n        while ((part = restOfExp(str.substring(pos), [/^;/]))) {\n            parts.push(part);\n            pos += part.length + 1;\n        }\n        parts = parts.filter(Boolean);\n        const tree = parts.filter((str) => str.length).map((str) => {\n            let subExpressions = [];\n            let sub;\n            let pos = 0;\n            while ((sub = restOfExp(str.substring(pos), [/^,/]))) {\n                subExpressions.push(sub);\n                pos += sub.length + 1;\n            }\n            try {\n                const exprs = subExpressions.map((str) => lispify(str));\n                if (exprs.length > 1 && exprs[0] instanceof Lisp && exprs[0].op === 'return') {\n                    const last = exprs.pop();\n                    return [exprs.shift().b, ...exprs, new Lisp({\n                            op: 'return',\n                            b: last\n                        })];\n                }\n                return exprs;\n            }\n            catch (e) {\n                // throw e;\n                throw new ParseError(e.message + \": \" + str, str);\n            }\n        });\n        return { tree: tree.flat(), strings, literals };\n    }\n    executeTree(executionTree, scopes = []) {\n        const execTree = executionTree.tree;\n        const contextb = { ...this.context, strings: executionTree.strings, literals: executionTree.literals };\n        let scope = this.context.globalScope;\n        let s;\n        while (s = scopes.shift()) {\n            if (typeof s !== \"object\")\n                continue;\n            if (s instanceof Scope) {\n                scope = s;\n            }\n            else {\n                scope = new Scope(scope, s);\n            }\n        }\n        let context = Object.assign({}, contextb);\n        if (contextb.options.audit) {\n            context.auditReport = {\n                globalsAccess: new Set(),\n                prototypeAccess: {},\n            };\n        }\n        let returned = false;\n        let res;\n        if (!(execTree instanceof Array))\n            throw new SyntaxError('Bad execution tree');\n        execTree.map(tree => {\n            if (!returned) {\n                let r;\n                try {\n                    r = exec(tree, scope, context);\n                }\n                catch (e) {\n                    throw new e.constructor(e.message);\n                }\n                if (tree instanceof Lisp && tree.op === 'return') {\n                    returned = true;\n                    res = r;\n                }\n            }\n            return null;\n        });\n        res = res instanceof Prop ? res.context[res.prop] : res;\n        return { auditReport: context.auditReport, result: res };\n    }\n    compile(code) {\n        const executionTree = Sandbox.parse(code);\n        return (...scopes) => {\n            return this.executeTree(executionTree, scopes).result;\n        };\n    }\n    ;\n}\n",null,null,null],"names":["Prop","constructor","context","prop","isConst","isGlobal","isVariable","Lisp","obj","op","a","b","If","t","f","KeyVal","key","val","ObjectFunc","args","tree","SpreadObject","item","SpreadArray","VarType","Scope","parent","vars","functionThis","undefined","const","Set","let","allVars","var","Object","keys","globals","declare","get","functionScope","has","hasOwnProperty","set","SyntaxError","ReferenceError","TypeError","SandboxError","type","value","add","Error","ParseError","message","code","SandboxGlobal","globalThis","i","sandboxFunction","SandboxFunction","params","pop","parsed","Sandbox","parse","shift","res","sandbox","executeTree","options","audit","auditReport","globalsAccess","forEach","Class","prototypeAccess","result","sandboxedEval","func","sandboxEval","sandboxedSetTimeout","sandboxSetTimeout","handler","setTimeout","sandboxedSetInterval","sandboxSetInterval","setInterval","expectTypes","types","next","splitter","split","if","else","assignment","assignModify","assign","incrementerBefore","incrementerAfter","expEdge","call","modifier","not","inverse","negative","positive","typeof","delete","exp","createObject","createArray","group","dot","arrayProp","number","string","literal","boolean","null","und","NaN","Infinity","function","arrowFunc","initialize","spreadObject","spreadArray","expEnd","expStart","return","closings","closingsRegex","okFirstChars","restOfExp","part","tests","quote","isStart","escape","done","length","char","skip","substring","sub","test","assignCheck","_a","_b","_c","_d","changeSubscriptions","cb","setSubscriptions","arrayChange","push","unshift","splice","reverse","sort","copyWithin","ops2","scope","sandboxGlobal","rep","evals","globalScope","getSubscriptions","Number","String","Boolean","isFunction","prot","prototype","name","getPrototypeOf","includes","whitelist","prototypeWhitelist","replace","prototypeReplacements","size","constuctor","g","globalsWhitelist","forbidMethodCalls","map","flat","exec","vals","JSON","stringify","cache","recurse","x","y","Array","change","changed","added","removed","slice","startIndex","deleteCount","len","Math","min","endIndex","arg","strings","literals","match","$$","$","num","parseInt","bobj","sandboxArrowFunction","startsWith","ops","Map","lispTypes","setLispType","fn","closingsCreate","expect","ctx","extract","end","l","fFound","reg2","lispify","e","str","index","lispTree","found","quoteCount","matches","constants","ended","lastType","expected","isArray","SAFE_GLOBALS","SAFE_PROTOTYPES","values","WeakMap","Function","eval","console","debug","error","info","log","table","warn","isFinite","isNaN","parseFloat","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","Symbol","EvalError","RangeError","URIError","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","WeakSet","Promise","Intl","protos","Date","RegExp","proto","subscribeGet","callback","unsubscribe","subscribeSet","names","callbacks","changeCbs","scopes","js","currJs","extractSkip","reg","from","toString","start","keyword","trim","j","parts","pos","filter","subExpressions","exprs","last","executionTree","execTree","contextb","s","returned","r","compile","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDialogElement","HTMLDivElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","HTMLElement","globalAllowedAtttributes","sanitizeType","allowedAttributes","element","attributes","HTMLAnchorElement","SVGAElement","HTMLAreaElement","el","HTMLButtonElement","allowedInputs","HTMLInputElement","HTMLSelectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLTextAreaElement","HTMLScriptElement","HTMLStyleElement","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","regHrefJS","regValidSrc","regSystemAtt","srcAttributes","santizeAttribute","attName","attValue","preprocess","allowed","toLowerCase","setAttribute","isJs","hasAttribute","sanitizeHTML","staticHtml","DocumentFragment","remove","att","nodeValue","nodeName","removeAttribute","children","elementStorage","arrs","arr","coll","defaultDelegateObject","on","elem","event","$el","wrap","off","one","ElementCollection","items","$elements","iterator","selector","some","every","compareDocumentPosition","unique","toSet","toArray","is","sel","querySelectorAll","concat","parents","contains","find","c","events","opt","objectOrProp","ev","h","wrapEvent","store","getStore","evStore","addEventListener","removeEventListener","clear","trigger","eventType","detail","bubbles","cancelable","CustomEvent","dispatchEvent","evcb","evt","delegate","that","del","all","once","started","evs","subs","cbs","target","listeners","lts","parentElement","eq","handlers","stoppedPropagation","stoppedImmediatePropagation","cbev","click","addClass","keyCode","currentTarget","getAttribute","attr","tabindex","role","hover","handlerIn","handlerOut","k","v","removeAttr","selected","checked","files","multiple","ret","$elems","text","scrollTop","scrollLeft","label","data","removeData","toggleClass","removeClass","force","isObject","className","classList","toggle","hasClass","nameArr","identifier","ind","first","prevAll","nextElementSibling","nextUntil","propElem","nextAll","prev","previousElementSibling","prevUntil","siblings","firstElementChild","$document","document","documentElement","originalEvent","isEqEvent","sip","stopImmediatePropagation","sp","stopPropagation","props","stopppedImmediatePropagation","defineProperties","NodeList","HTMLCollection","Element","selectors","$context","elems","doFilter","doSort","cElem","cont","collection","includeFirst","stopAt","each","wasSet","n","object","objArr","defaultValue","deleteStore","allowedGlobals","allowedPrototypes","regVarName","regKeyValName","isIterable","html","content","innerHTML","contentElem","detach","preprocessHTML","currentSubs","unsubNested","processed","processHTML","appendChild","run","getScopes","textContent","createElement","FileList","File","ElementScope","$dispatch","$watch","subUnsubs","watch","getRootElement","RootScope","$wrap","Component","components","defineComponent","comp","init","component","runs","getScope","root","newScope","calls","timer","toCall","err","watchRun","toWatch","watchGets","lastVal","update","now","count","digest","list","temp","sandboxCache","codes","directives","defineDirective","isContentEditable","isInput","reset","pushScope","$$value","form","$form","Node","runDirective","directive","walkerInstance","execSteps","ready","runNested","template","walkTree","unsub","parentSubs","$element","comment","createComment","ifElem","at","before","nestedSubs","cloneNode","after","join","varsExp","varMatch","doubleMatch","repeat","forSubs","$index","nestedScopes","prevReady","elementScopeAdded","SVGElement","style","$event","original","outerHTML","nodeType","walkText","nodes","endsWith","placeholder","createTextNode","childNodes","quotes","endJs","closing","inJs","strs"],"mappings":"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"}