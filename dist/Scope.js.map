{"version":3,"file":"Scope.js","sources":["../node_modules/@nyariv/sandboxjs/dist/Sandbox.js","../src/HTMLSanitizer.ts","../src/eQuery.ts","../src/Scope.ts"],"sourcesContent":["class Prop {\n    constructor(context, prop, isConst = false, isGlobal = false, isVariable = false) {\n        this.context = context;\n        this.prop = prop;\n        this.isConst = isConst;\n        this.isGlobal = isGlobal;\n        this.isVariable = isVariable;\n    }\n}\nclass Lisp {\n    constructor(obj) {\n        this.op = obj.op;\n        this.a = obj.a;\n        this.b = obj.b;\n    }\n}\nclass If {\n    constructor(t, f) {\n        this.t = t;\n        this.f = f;\n    }\n}\nclass KeyVal {\n    constructor(key, val) {\n        this.key = key;\n        this.val = val;\n    }\n}\nclass ObjectFunc {\n    constructor(key, args, tree) {\n        this.key = key;\n        this.args = args;\n        this.tree = tree;\n    }\n}\nclass SpreadObject {\n    constructor(item) {\n        this.item = item;\n    }\n}\nclass SpreadArray {\n    constructor(item) {\n        this.item = item;\n    }\n}\nvar VarType;\n(function (VarType) {\n    VarType[\"let\"] = \"let\";\n    VarType[\"const\"] = \"const\";\n    VarType[\"var\"] = \"var\";\n})(VarType || (VarType = {}));\nclass Scope {\n    constructor(parent, vars = {}, functionThis = undefined) {\n        this.const = new Set();\n        this.let = new Set();\n        this.parent = parent;\n        this.allVars = vars;\n        this.var = new Set(Object.keys(vars));\n        this.globals = !parent ? new Set(Object.keys(vars)) : new Set();\n        this.functionThis = functionThis || !parent;\n        if (functionThis) {\n            this.declare('this', VarType.var, functionThis);\n        }\n    }\n    get(key, functionScope = false) {\n        if (!this.parent || !functionScope || this.functionThis) {\n            if (this.globals.has(key)) {\n                return new Prop(this.functionThis, key, false, true, true);\n            }\n            if (this.const.has(key)) {\n                return new Prop(this.allVars, key, true, this.globals.has(key), true);\n            }\n            if (this.var.has(key)) {\n                return new Prop(this.allVars, key, false, this.globals.has(key), true);\n            }\n            if (this.let.has(key)) {\n                return new Prop(this.allVars, key, false, this.globals.has(key), true);\n            }\n            if (!this.parent) {\n                return new Prop(undefined, key);\n            }\n        }\n        return this.parent.get(key, functionScope);\n    }\n    set(key, val) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be a variable');\n        let prop = this.get(key);\n        if (prop.context === undefined) {\n            throw new ReferenceError(`Variable '${key}' was not declared.`);\n        }\n        ``;\n        if (prop.isConst) {\n            throw new TypeError(`Cannot assign to const variable '${key}'`);\n        }\n        if (prop.isGlobal) {\n            throw new SandboxError(`Cannot override global variable '${key}'`);\n        }\n        prop.context[prop] = val;\n        return prop;\n    }\n    declare(key, type = null, value = undefined, isGlobal = false) {\n        if (type === 'var' && !this.functionThis && this.parent) {\n            return this.parent.declare(key, type, value, isGlobal);\n        }\n        else if (!this.var.has(key) || !this.let.has(key) || !this.const.has(key) || !(this.globals.has(key))) {\n            if (isGlobal) {\n                this.globals.add(key);\n            }\n            this[type].add(key);\n            this.allVars[key] = value;\n        }\n        else {\n            throw Error(`Variable '${key}' already declared`);\n        }\n        return new Prop(this.allVars, key, this.const.has(key), isGlobal);\n    }\n}\nclass ParseError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nclass SandboxError extends Error {\n}\nclass SandboxGlobal {\n    constructor(globals) {\n        if (globals === globalThis)\n            return globalThis;\n        for (let i in globals) {\n            this[i] = globals[i];\n        }\n    }\n}\nfunction sandboxFunction(context) {\n    return SandboxFunction;\n    function SandboxFunction(...params) {\n        let code = params.pop();\n        let parsed = Sandbox.parse(code);\n        return function (...args) {\n            const vars = {};\n            for (let i of params) {\n                vars[i] = args.shift();\n            }\n            const res = context.sandbox.executeTree(parsed);\n            if (context.options.audit) {\n                for (let key in res.auditReport.globalsAccess) {\n                    let add = res.auditReport.globalsAccess[key];\n                    context.auditReport.globalsAccess[key] = context.auditReport.globalsAccess[key] || new Set();\n                    add.forEach((val) => {\n                        context.auditReport.globalsAccess[key].add(val);\n                    });\n                }\n                for (let Class in res.auditReport.prototypeAccess) {\n                    let add = res.auditReport.prototypeAccess[Class];\n                    context.auditReport.prototypeAccess[Class] = context.auditReport.prototypeAccess[Class] || new Set();\n                    add.forEach((val) => {\n                        context.auditReport.prototypeAccess[Class].add(val);\n                    });\n                }\n            }\n            return res.result;\n        };\n    }\n}\nfunction sandboxedEval(func) {\n    return sandboxEval;\n    function sandboxEval(code) {\n        return func(code)();\n    }\n}\nfunction sandboxedSetTimeout(func) {\n    return function sandboxSetTimeout(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setTimeout(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nfunction sandboxedSetInterval(func) {\n    return function sandboxSetInterval(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setInterval(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nlet expectTypes = {\n    op: {\n        types: { op: /^(\\/|\\*\\*(?!\\=)|\\*(?!\\=)|\\%(?!\\=))/ },\n        next: [\n            'value',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    splitter: {\n        types: {\n            split: /^(&&|&|\\|\\||\\||<=|>=|<|>|!==|!=|===|==| instanceof | in |\\+(?!\\+)|\\-(?!\\-))(?!\\=)/,\n        },\n        next: [\n            'value',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    if: {\n        types: {\n            if: /^\\?/,\n            else: /^:/,\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    assignment: {\n        types: {\n            assignModify: /^(\\-=|\\+=|\\/=|\\*\\*=|\\*=|%=|\\^=|\\&=|\\|=)/,\n            assign: /^(=)/\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    incrementerBefore: {\n        types: { incrementerBefore: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'prop',\n        ]\n    },\n    incrementerAfter: {\n        types: { incrementerAfter: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'splitter',\n            'op',\n            'expEnd'\n        ]\n    },\n    expEdge: {\n        types: {\n            call: /^[\\(]/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    modifier: {\n        types: {\n            not: /^!/,\n            inverse: /^~/,\n            negative: /^\\-(?!\\-)/,\n            positive: /^\\+(?!\\+)/,\n            typeof: /^ typeof /,\n            delete: /^ delete /,\n        },\n        next: [\n            'exp',\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    exp: {\n        types: {\n            createObject: /^\\{/,\n            createArray: /^\\[/,\n            group: /^\\(/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    dot: {\n        types: {\n            arrayProp: /^[\\[]/,\n            dot: /^\\.(?!\\.)/\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    prop: {\n        types: {\n            prop: /^[a-zA-Z\\$_][a-zA-Z\\d\\$_]*/,\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    value: {\n        types: {\n            number: /^\\-?\\d+(\\.\\d+)?/,\n            string: /^\"(\\d+)\"/,\n            literal: /^`(\\d+)`/,\n            boolean: /^(true|false)(?![\\w$_])/,\n            null: /^null(?![\\w$_])/,\n            und: /^undefined(?![\\w$_])/,\n            NaN: /^NaN(?![\\w$_])/,\n            Infinity: /^Infinity(?![\\w$_])/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    function: {\n        types: {\n            arrowFunc: /^\\(?(((\\.\\.\\.)?[a-zA-Z\\$_][a-zA-Z\\d\\$_]*,?)*)(\\))?=>({)?/\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    initialize: {\n        types: {\n            initialize: /^ (var|let|const) [a-zA-Z\\$_][a-zA-Z\\d\\$_]*/\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    },\n    spreadObject: {\n        types: {\n            spreadObject: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'exp',\n            'prop',\n        ]\n    },\n    spreadArray: {\n        types: {\n            spreadArray: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'exp',\n            'prop',\n        ]\n    },\n    expEnd: { types: {}, next: [] },\n    expStart: {\n        types: {\n            return: /^ return /,\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    }\n};\nlet closings = {\n    \"(\": \")\",\n    \"[\": \"]\",\n    \"{\": \"}\",\n    \"'\": \"'\",\n    '\"': '\"',\n    \"`\": \"`\"\n};\nlet closingsRegex = {\n    \"(\": /^\\)/,\n    \"[\": /^\\]/,\n    \"{\": /^\\}/,\n    \"'\": /^\\'/,\n    '\"': /^\\\"/,\n    \"`\": /^\\`/\n};\nconst okFirstChars = /^[\\+\\-~ !]/;\nconst restOfExp = (part, tests, quote) => {\n    let isStart = true;\n    tests = tests || [\n        expectTypes.op.types.op,\n        expectTypes.splitter.types.split,\n        expectTypes.if.types.if,\n        expectTypes.if.types.else\n    ];\n    let escape = false;\n    let done = false;\n    let i;\n    for (i = 0; i < part.length && !done; i++) {\n        let char = part[i];\n        if (quote === '\"' || quote === \"'\" || quote === \"`\") {\n            if (quote === \"`\" && char === \"$\" && part[i + 1] === \"{\" && !escape) {\n                let skip = restOfExp(part.substring(i + 2), [closingsRegex['{']]);\n                i += skip.length + 2;\n            }\n            else if (char === quote && !escape) {\n                return part.substring(0, i);\n            }\n            escape = char === \"\\\\\";\n        }\n        else if (closings[char]) {\n            let skip = restOfExp(part.substring(i + 1), [closingsRegex[quote]], char);\n            i += skip.length + 1;\n            isStart = false;\n        }\n        else if (!quote) {\n            let sub = part.substring(i);\n            for (let test of tests) {\n                done = test.test(sub);\n                if (done)\n                    break;\n            }\n            if (isStart) {\n                if (okFirstChars.test(sub)) {\n                    done = false;\n                }\n                else {\n                    isStart = false;\n                }\n            }\n            if (done)\n                break;\n        }\n        else if (char === closings[quote]) {\n            return part.substring(0, i);\n        }\n    }\n    return part.substring(0, i);\n};\nrestOfExp.next = [\n    'splitter',\n    'op',\n    'expEnd',\n    'if'\n];\nfunction assignCheck(obj, context, op = 'assign') {\n    var _a, _b, _c, _d;\n    if (obj.context === undefined) {\n        throw new ReferenceError(`Cannot ${op} value to undefined.`);\n    }\n    if (typeof obj.context !== 'object' && typeof obj.context !== 'function') {\n        throw new SyntaxError(`Cannot ${op} value to a primitive.`);\n    }\n    if (obj.isConst) {\n        throw new TypeError(`Cannot set value to const variable '${obj.prop}'`);\n    }\n    if (obj.isGlobal) {\n        throw new SandboxError(`Cannot ${op} property '${obj.prop}' of a global object`);\n    }\n    if (typeof obj.context[obj.prop] === 'function' && !obj.context.hasOwnProperty(obj.prop)) {\n        throw new SandboxError(`Override prototype property '${obj.prop}' not allowed`);\n    }\n    if (op === \"delete\") {\n        if (obj.context.hasOwnProperty(obj.prop)) {\n            (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb({ type: \"delete\", prop: obj.prop }));\n        }\n    }\n    else if (obj.context.hasOwnProperty(obj.prop)) {\n        (_c = (_b = context.setSubscriptions.get(obj.context)) === null || _b === void 0 ? void 0 : _b.get(obj.prop)) === null || _c === void 0 ? void 0 : _c.forEach((cb) => cb({\n            type: \"replace\"\n        }));\n    }\n    else {\n        (_d = context.changeSubscriptions.get(obj.context)) === null || _d === void 0 ? void 0 : _d.forEach((cb) => cb({ type: \"create\", prop: obj.prop }));\n    }\n}\nconst arrayChange = new Set([\n    [].push,\n    [].pop,\n    [].shift,\n    [].unshift,\n    [].splice,\n    [].reverse,\n    [].sort,\n    [].copyWithin\n]);\nlet ops2 = {\n    'prop': (a, b, obj, context, scope) => {\n        if (a === null) {\n            throw new TypeError(`Cannot get property ${b} of null`);\n        }\n        const type = typeof a;\n        if (type === 'undefined') {\n            let prop = scope.get(b);\n            if (prop.context === undefined)\n                throw new ReferenceError(`${b} is not defined`);\n            if (prop.context === context.sandboxGlobal) {\n                if (context.options.audit) {\n                    context.auditReport.globalsAccess.add(b);\n                }\n                const rep = context.evals.get(context.sandboxGlobal[b]);\n                if (rep)\n                    return rep;\n            }\n            if (prop.context && prop.context[b] === globalThis) {\n                return context.globalScope.get('this');\n            }\n            context.getSubscriptions.forEach((cb) => cb(prop.context, prop.prop));\n            return prop;\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                a = new Number(a);\n            }\n            else if (type === 'string') {\n                a = new String(a);\n            }\n            else if (type === 'boolean') {\n                a = new Boolean(a);\n            }\n        }\n        else if (typeof a.hasOwnProperty === 'undefined') {\n            return new Prop(undefined, b);\n        }\n        const isFunction = type === 'function';\n        let prototypeAccess = isFunction || !(a.hasOwnProperty(b) || typeof b === 'number');\n        if (context.options.audit && prototypeAccess) {\n            if (typeof b === 'string') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        if (!context.auditReport.prototypeAccess[prot.constructor.name]) {\n                            context.auditReport.prototypeAccess[prot.constructor.name] = new Set();\n                        }\n                        context.auditReport.prototypeAccess[prot.constructor.name].add(b);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        if (prototypeAccess) {\n            if (isFunction) {\n                if (!['name', 'length', 'constructor'].includes(b) && a.hasOwnProperty(b)) {\n                    const whitelist = context.prototypeWhitelist.get(a);\n                    const replace = context.prototypeReplacements.get(a);\n                    if (replace) {\n                        return new Prop(replace(a, true), b);\n                    }\n                    if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                    }\n                    else {\n                        throw new SandboxError(`Static method or property access not permitted: ${a.name}.${b}`);\n                    }\n                }\n            }\n            else if (b !== 'constructor') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        const whitelist = context.prototypeWhitelist.get(prot.constructor);\n                        const replace = context.prototypeReplacements.get(prot.constuctor);\n                        if (replace) {\n                            return new Prop(replace(a, false), b);\n                        }\n                        if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                            break;\n                        }\n                        throw new SandboxError(`Method or property access not permitted: ${prot.constructor.name}.${b}`);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        const rep = context.evals.get(a[b]);\n        if (rep)\n            return rep;\n        if (a[b] === globalThis) {\n            return context.globalScope.get('this');\n        }\n        let g = obj.isGlobal || (isFunction && a.name !== 'sandboxArrowFunction') || context.globalsWhitelist.has(a);\n        if (!g) {\n            context.getSubscriptions.forEach((cb) => cb(a, b));\n        }\n        return new Prop(a, b, false, g);\n    },\n    'call': (a, b, obj, context, scope) => {\n        var _a;\n        if (context.options.forbidMethodCalls)\n            throw new SandboxError(\"Method calls are not allowed\");\n        if (typeof a !== 'function') {\n            throw new TypeError(`${obj.prop} is not a function`);\n        }\n        const args = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        if (typeof obj === 'function') {\n            return obj(...args.map((item) => exec(item, scope, context)));\n        }\n        const vals = args.map((item) => exec(item, scope, context));\n        if (obj.context[obj.prop] === JSON.stringify && context.getSubscriptions.size) {\n            const cache = new Set();\n            const recurse = (x) => {\n                if (!x || !(typeof x === 'object') || cache.has(x))\n                    return;\n                cache.add(x);\n                for (let y in x) {\n                    context.getSubscriptions.forEach((cb) => cb(x, y));\n                    recurse(x[y]);\n                }\n            };\n            recurse(vals[0]);\n        }\n        if (obj.context instanceof Array && arrayChange.has(obj.context[obj.prop]) && context.changeSubscriptions.get(obj.context)) {\n            let change;\n            let changed = false;\n            if (obj.prop === \"push\") {\n                change = {\n                    type: \"push\",\n                    added: vals\n                };\n                changed = !!vals.length;\n            }\n            else if (obj.prop === \"pop\") {\n                change = {\n                    type: \"pop\",\n                    removed: obj.context.slice(-1)\n                };\n                changed = !!change.removed.length;\n            }\n            else if (obj.prop === \"shift\") {\n                change = {\n                    type: \"shift\",\n                    removed: obj.context.slice(0, 1)\n                };\n                changed = !!change.removed.length;\n            }\n            else if (obj.prop === \"unshift\") {\n                change = {\n                    type: \"unshift\",\n                    added: vals\n                };\n                changed = !!vals.length;\n            }\n            else if (obj.prop === \"splice\") {\n                change = {\n                    type: \"splice\",\n                    startIndex: vals[0],\n                    deleteCount: vals[1] === undefined ? obj.context.length : vals[1],\n                    added: vals.slice(2),\n                    removed: obj.context.slice(vals[0], vals[1] === undefined ? undefined : vals[0] + vals[1])\n                };\n                changed = !!change.added.length || !!change.removed.length;\n            }\n            else if (obj.prop === \"reverse\" || obj.prop === \"sort\") {\n                change = { type: obj.prop };\n                changed = !!obj.context.length;\n            }\n            else if (obj.prop === \"copyWithin\") {\n                let len = vals[2] === undefined ? obj.context.length - vals[1] : Math.min(obj.context.length, vals[2] - vals[1]);\n                change = {\n                    type: \"copyWithin\",\n                    startIndex: vals[0],\n                    endIndex: vals[0] + len,\n                    added: obj.context.slice(vals[1], vals[1] + len),\n                    removed: obj.context.slice(vals[0], vals[0] + len)\n                };\n                changed = !!change.added.length || !!change.removed.length;\n            }\n            if (changed) {\n                (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb(change));\n            }\n            return obj.context[obj.prop](...vals);\n        }\n        return obj.context[obj.prop](...args.map((item) => exec(item, scope, context)));\n    },\n    'createObject': (a, b, obj, context, scope) => {\n        let res = {};\n        for (let item of b) {\n            if (item instanceof SpreadObject) {\n                res = { ...res, ...item.item };\n            }\n            else if (item instanceof ObjectFunc) {\n                let f = item;\n                res[f.key] = function (...args) {\n                    const vars = {};\n                    f.args.forEach((arg, i) => {\n                        vars[arg] = args[i];\n                    });\n                    return context.sandbox.executeTree({\n                        tree: f.tree,\n                        strings: context.strings,\n                        literals: context.literals,\n                    }, [new Scope(scope, vars, this)]).result;\n                };\n            }\n            else {\n                res[item.key] = item.val;\n            }\n        }\n        return res;\n    },\n    'keyVal': (a, b) => new KeyVal(a, b),\n    'createArray': (a, b, obj, context, scope) => {\n        return b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat().map((item) => exec(item, scope, context));\n    },\n    'group': (a, b) => b,\n    'string': (a, b, obj, context) => context.strings[b],\n    'literal': (a, b, obj, context, scope) => {\n        let name = context.literals[b].a;\n        return name.replace(/(\\$\\$)*(\\$)?\\${(\\d+)}/g, (match, $$, $, num) => {\n            if ($)\n                return match;\n            let res = exec(context.literals[b].b[parseInt(num, 10)], scope, context);\n            res = res instanceof Prop ? res.context[res.prop] : res;\n            return ($$ ? $$ : '') + `${res}`.replace(/\\$/g, '$$');\n        }).replace(/\\$\\$/g, '$');\n    },\n    'spreadArray': (a, b, obj, context, scope) => {\n        return new SpreadArray(exec(b, scope, context));\n    },\n    'spreadObject': (a, b, obj, context, scope) => {\n        return new SpreadObject(exec(b, scope, context));\n    },\n    '!': (a, b) => !b,\n    '~': (a, b) => ~b,\n    '++$': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return ++obj.context[obj.prop];\n    },\n    '$++': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop]++;\n    },\n    '--$': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return --obj.context[obj.prop];\n    },\n    '$--': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop]--;\n    },\n    '=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        obj.context[obj.prop] = b;\n        return new Prop(obj.context, obj.prop, false, obj.isGlobal);\n    },\n    '+=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] += b;\n    },\n    '-=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] -= b;\n    },\n    '/=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] /= b;\n    },\n    '*=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] *= b;\n    },\n    '**=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] **= b;\n    },\n    '%=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] %= b;\n    },\n    '^=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] ^= b;\n    },\n    '&=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] &= b;\n    },\n    '|=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] |= b;\n    },\n    '?': (a, b) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        return a ? b.t : b.f;\n    },\n    '>': (a, b) => a > b,\n    '<': (a, b) => a < b,\n    '>=': (a, b) => a >= b,\n    '<=': (a, b) => a <= b,\n    '==': (a, b) => a == b,\n    '===': (a, b) => a === b,\n    '!=': (a, b) => a != b,\n    '!==': (a, b) => a !== b,\n    '&&': (a, b) => a && b,\n    '||': (a, b) => a || b,\n    '&': (a, b) => a & b,\n    '|': (a, b) => a | b,\n    ':': (a, b) => new If(a, b),\n    '+': (a, b) => a + b,\n    '-': (a, b) => a - b,\n    '$+': (a, b) => +b,\n    '$-': (a, b) => -b,\n    '/': (a, b) => a / b,\n    '*': (a, b) => a * b,\n    '%': (a, b) => a % b,\n    ' typeof ': (a, b) => typeof b,\n    ' instanceof ': (a, b) => a instanceof b,\n    ' in ': (a, b) => a in b,\n    ' delete ': (a, b, obj, context, scope, bobj) => {\n        if (bobj.context === undefined) {\n            return true;\n        }\n        assignCheck(bobj, context, 'delete');\n        if (bobj.isVariable)\n            return false;\n        return delete bobj.context[bobj.prop];\n    },\n    'return': (a, b) => b,\n    'var': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.var, exec(b, scope, context));\n    },\n    'let': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.let, exec(b, scope, context), bobj && bobj.isGlobal);\n    },\n    'const': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.const, exec(b, scope, context));\n    },\n    'arrowFunc': (a, b, obj, context, scope) => {\n        const sandboxArrowFunction = (...args) => {\n            const vars = {};\n            a.forEach((arg, i) => {\n                if (arg.startsWith('...')) {\n                    vars[arg.substring(3)] = args.slice(i);\n                }\n                else {\n                    vars[arg] = args[i];\n                }\n            });\n            return context.sandbox.executeTree({\n                tree: b,\n                strings: context.strings,\n                literals: context.literals,\n            }, [new Scope(scope, vars)]).result;\n        };\n        return sandboxArrowFunction;\n    }\n};\nlet ops = new Map();\nfor (let op in ops2) {\n    ops.set(op, ops2[op]);\n}\nlet lispTypes = new Map();\nconst setLispType = (types, fn) => {\n    types.forEach((type) => {\n        lispTypes.set(type, fn);\n    });\n};\nconst closingsCreate = {\n    'createArray': /^\\]/,\n    'createObject': /^\\}/,\n    'group': /^\\)/,\n    'arrayProp': /^\\]/,\n    'call': /^\\)/\n};\nsetLispType(['createArray', 'createObject', 'group', 'arrayProp', 'call'], (type, part, res, expect, ctx) => {\n    let extract = \"\";\n    let arg = [];\n    let end = false;\n    let i = 1;\n    while (i < part.length && !end) {\n        extract = restOfExp(part.substring(i), [\n            closingsCreate[type],\n            /^,/\n        ]);\n        i += extract.length;\n        if (extract) {\n            arg.push(extract);\n        }\n        if (part[i] !== ',') {\n            end = true;\n        }\n        else {\n            i++;\n        }\n    }\n    const next = ['value', 'function', 'prop', 'exp', 'modifier', 'incrementerBefore'];\n    let l;\n    let fFound;\n    const reg2 = /^([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\((([a-zA-Z\\$_][a-zA-Z\\d\\$_]*,?)*)\\)?{/;\n    switch (type) {\n        case 'group':\n        case 'arrayProp':\n            l = lispify(arg.pop());\n            break;\n        case 'call':\n        case 'createArray':\n            l = arg.map((e) => lispify(e, [...next, 'spreadArray']));\n            break;\n        case 'createObject':\n            l = arg.map((str) => {\n                let value;\n                let key;\n                fFound = reg2.exec(str);\n                if (fFound) {\n                    let args = fFound[2] ? fFound[2].split(\",\") : [];\n                    const func = restOfExp(str.substring(fFound.index + fFound[0].length), [/^}/]);\n                    return new ObjectFunc(fFound[1], args, Sandbox.parse(func, null).tree);\n                }\n                else {\n                    let extract = restOfExp(str, [/^:/]);\n                    key = lispify(extract, [...next, 'spreadObject']);\n                    if (key instanceof Lisp && key.op === 'prop') {\n                        key = key.b;\n                    }\n                    if (extract.length === str.length)\n                        return key;\n                    value = lispify(str.substring(extract.length + 1));\n                }\n                return new Lisp({\n                    op: 'keyVal',\n                    a: key,\n                    b: value\n                });\n            });\n            break;\n    }\n    type = type === 'arrayProp' ? 'prop' : type;\n    ctx.lispTree = lispify(part.substring(i + 1), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: ctx.lispTree,\n        b: l,\n    }));\n});\nsetLispType(['inverse', 'not', 'negative', 'positive', 'typeof', 'delete', 'op'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length));\n    ctx.lispTree = lispify(part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: ['positive', 'negative'].includes(type) ? '$' + res[0] : res[0],\n        a: ctx.lispTree,\n        b: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerBefore'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(2));\n    ctx.lispTree = lispify(part.substring(extract.length + 2), restOfExp.next, new Lisp({\n        op: res[0] + \"$\",\n        a: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerAfter'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: \"$\" + res[0],\n        a: ctx.lispTree,\n    }));\n});\nsetLispType(['assign', 'assignModify'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['split'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length), [\n        expectTypes.splitter.types.split,\n        expectTypes.if.types.if,\n        expectTypes.if.types.else\n    ]);\n    ctx.lispTree = lispify(part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['if'], (type, part, res, expect, ctx) => {\n    let found = false;\n    let extract = \"\";\n    let quoteCount = 1;\n    while (!found && extract.length < part.length) {\n        extract += restOfExp(part.substring(extract.length + 1), [\n            expectTypes.if.types.if,\n            expectTypes.if.types.else\n        ]);\n        if (part[extract.length + 1] === '?') {\n            quoteCount++;\n        }\n        else {\n            quoteCount--;\n        }\n        if (!quoteCount) {\n            found = true;\n        }\n        else {\n            extract += part[extract.length + 1];\n        }\n    }\n    ctx.lispTree = new Lisp({\n        op: '?',\n        a: ctx.lispTree,\n        b: new Lisp({\n            op: ':',\n            a: lispify(extract),\n            b: lispify(part.substring(res[0].length + extract.length + 1))\n        })\n    });\n});\nsetLispType(['dot', 'prop'], (type, part, res, expect, ctx) => {\n    let prop = res[0];\n    let index = res[0].length;\n    if (res[0] === '.') {\n        let matches = part.substring(res[0].length).match(expectTypes.prop.types.prop);\n        if (matches.length) {\n            prop = matches[0];\n            index = prop.length + res[0].length;\n        }\n        else {\n            throw Error('Hanging  dot:' + part);\n        }\n    }\n    ctx.lispTree = lispify(part.substring(index), expectTypes[expect].next, new Lisp({\n        op: 'prop',\n        a: ctx.lispTree,\n        b: prop\n    }));\n});\nsetLispType(['spreadArray', 'spreadObject', 'return'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispify(part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['number', 'boolean', 'null'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, JSON.parse(res[0]));\n});\nconst constants = {\n    NaN,\n    Infinity,\n};\nsetLispType(['und', 'NaN', 'Infinity'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, constants[type]);\n});\nsetLispType(['string', 'literal'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: type,\n        b: parseInt(JSON.parse(res[1]), 10),\n    }));\n});\nsetLispType(['initialize'], (type, part, res, expect, ctx) => {\n    const split = res[0].split(/ /g);\n    if (part.length === res[0].length) {\n        ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n            op: split[1],\n            a: split[2]\n        }));\n    }\n    else {\n        ctx.lispTree = new Lisp({\n            op: split[1],\n            a: split[2],\n            b: lispify(part.substring(res[0].length + 1), expectTypes[expect].next)\n        });\n    }\n});\nsetLispType(['arrowFunc'], (type, part, res, expect, ctx) => {\n    let args = res[1] ? res[1].split(\",\") : [];\n    if (res[4]) {\n        if (res[0][0] !== '(')\n            throw new SyntaxError('Unstarted inline function brackets: ' + res[0]);\n    }\n    else if (args.length) {\n        args = [args.pop()];\n    }\n    let ended = false;\n    args.forEach((arg) => {\n        if (ended)\n            throw new SyntaxError('Rest parameter must be last formal parameter');\n        if (arg.startsWith('...'))\n            ended = true;\n    });\n    const func = (res[5] ? '' : ' return ') + restOfExp(part.substring(res[0].length), res[5] ? [/^}/] : [/^[,;\\)\\}\\]]/]);\n    ctx.lispTree = lispify(part.substring(res[0].length + func.length + 1), expectTypes[expect].next, new Lisp({\n        op: 'arrowFunc',\n        a: args,\n        b: Sandbox.parse(func, null).tree\n    }));\n});\nlet lastType;\nfunction lispify(part, expected, lispTree) {\n    expected = expected || ['initialize', 'expStart', 'value', 'function', 'prop', 'exp', 'modifier', 'incrementerBefore', 'expEnd'];\n    if (part === undefined)\n        return lispTree;\n    if (!part.length && !expected.includes('expEnd')) {\n        throw new SyntaxError(\"Unexpected end of expression\");\n    }\n    let ctx = { lispTree: lispTree };\n    let res;\n    for (let expect of expected) {\n        if (expect === 'expEnd') {\n            continue;\n        }\n        for (let type in expectTypes[expect].types) {\n            if (type === 'expEnd') {\n                continue;\n            }\n            if (res = expectTypes[expect].types[type].exec(part)) {\n                lastType = type;\n                lispTypes.get(type)(type, part, res, expect, ctx);\n                break;\n            }\n        }\n        if (res)\n            break;\n    }\n    if (!res && part.length) {\n        throw Error(`Unexpected token (${lastType}): ${part}`);\n    }\n    return ctx.lispTree;\n}\nfunction exec(tree, scope, context) {\n    if (tree instanceof Prop) {\n        return tree.context[tree.prop];\n    }\n    if (Array.isArray(tree)) {\n        return tree.map((item) => exec(item, scope, context));\n    }\n    if (!(tree instanceof Lisp)) {\n        return tree;\n    }\n    if (tree.op === 'arrowFunc') {\n        return ops.get(tree.op)(tree.a, tree.b, undefined, context, scope);\n    }\n    let obj = exec(tree.a, scope, context);\n    let a = obj instanceof Prop ? (obj.context ? obj.context[obj.prop] : undefined) : obj;\n    let bobj = exec(tree.b, scope, context);\n    let b = bobj instanceof Prop ? (bobj.context ? bobj.context[bobj.prop] : undefined) : bobj;\n    if (ops.has(tree.op)) {\n        let res = ops.get(tree.op)(a, b, obj, context, scope, bobj);\n        return res;\n    }\n    throw new SyntaxError('Unknown operator: ' + tree.op);\n}\nexport default class Sandbox {\n    constructor(globals = Sandbox.SAFE_GLOBALS, prototypeWhitelist = Sandbox.SAFE_PROTOTYPES, prototypeReplacements = new Map(), options = { audit: false }) {\n        const sandboxGlobal = new SandboxGlobal(globals);\n        this.context = {\n            sandbox: this,\n            globals,\n            prototypeWhitelist,\n            prototypeReplacements,\n            globalsWhitelist: new Set(Object.values(globals)),\n            options,\n            globalScope: new Scope(null, globals, sandboxGlobal),\n            sandboxGlobal,\n            evals: new Map(),\n            getSubscriptions: new Set(),\n            setSubscriptions: new WeakMap(),\n            changeSubscriptions: new WeakMap(),\n        };\n        const func = sandboxFunction(this.context);\n        this.context.evals.set(Function, func);\n        this.context.evals.set(eval, sandboxedEval(func));\n        this.context.evals.set(setTimeout, sandboxedSetTimeout(func));\n        this.context.evals.set(setInterval, sandboxedSetInterval(func));\n    }\n    static get SAFE_GLOBALS() {\n        return {\n            Function,\n            console: {\n                debug: console.debug,\n                error: console.error,\n                info: console.info,\n                log: console.log,\n                table: console.table,\n                warn: console.warn\n            },\n            isFinite,\n            isNaN,\n            parseFloat,\n            parseInt,\n            decodeURI,\n            decodeURIComponent,\n            encodeURI,\n            encodeURIComponent,\n            escape,\n            unescape,\n            Boolean,\n            Number,\n            String,\n            Object,\n            Array,\n            Symbol,\n            Error,\n            EvalError,\n            RangeError,\n            ReferenceError,\n            SyntaxError,\n            TypeError,\n            URIError,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Intl,\n            JSON,\n            Math,\n        };\n    }\n    static get SAFE_PROTOTYPES() {\n        let protos = [\n            SandboxGlobal,\n            Function,\n            Boolean,\n            Number,\n            String,\n            Date,\n            RegExp,\n            Error,\n            Array,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n        ];\n        let map = new Map();\n        protos.forEach((proto) => {\n            map.set(proto, new Set());\n        });\n        map.set(Object, new Set([\n            'entries',\n            'fromEntries',\n            'getOwnPropertyNames',\n            'is',\n            'keys',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'toLocaleString',\n            'toString',\n            'valueOf',\n            'values'\n        ]));\n        return map;\n    }\n    subscribeGet(callback) {\n        this.context.getSubscriptions.add(callback);\n        return { unsubscribe: () => this.context.getSubscriptions.delete(callback) };\n    }\n    subscribeSet(obj, name, callback) {\n        const names = this.context.setSubscriptions.get(obj) || new Map();\n        this.context.setSubscriptions.set(obj, names);\n        const callbacks = names.get(name) || new Set();\n        names.set(name, callbacks);\n        callbacks.add(callback);\n        let changeCbs;\n        if (obj && obj[name] && typeof obj[name] === \"object\") {\n            changeCbs = this.context.changeSubscriptions.get(obj[name]) || new Set();\n            changeCbs.add(callback);\n            this.context.changeSubscriptions.set(obj[name], changeCbs);\n        }\n        return { unsubscribe: () => {\n                callbacks.delete(callback);\n                if (changeCbs)\n                    changeCbs.delete(callback);\n            } };\n    }\n    static audit(code, scopes = []) {\n        return new Sandbox(globalThis, new Map(), new Map(), {\n            audit: true,\n        }).executeTree(Sandbox.parse(code), scopes);\n    }\n    static parse(code, strings = [], literals = []) {\n        if (typeof code !== 'string')\n            throw new ParseError(`Cannot parse ${code}`, code);\n        // console.log('parse', str);\n        let str = code;\n        let quote;\n        let extract = \"\";\n        let escape = false;\n        let js = [];\n        let currJs = [];\n        if (strings) {\n            let extractSkip = 0;\n            for (let i = 0; i < str.length; i++) {\n                let char = str[i];\n                if (escape) {\n                    if (char === \"$\" && quote === '`') {\n                        extractSkip--;\n                        char = '$$';\n                    }\n                    else if (char === 'u') {\n                        let reg = /^[a-fA-F\\d]{2,4}/.exec(str.substring(i + 1));\n                        let num;\n                        if (!reg) {\n                            num = Array.from(/^{[a-fA-F\\d]+}/.exec(str.substring(i + 1)) || [\"\"]);\n                        }\n                        else {\n                            num = Array.from(reg);\n                        }\n                        char = JSON.parse(`\"\\\\u${num[0]}\"`);\n                        str = str.substring(0, i - 1) + char + str.substring(i + (1 + num[0].length));\n                        i -= 1;\n                    }\n                    else if (char != '`') {\n                        char = JSON.parse(`\"\\\\${char}\"`);\n                    }\n                }\n                else if (char === '$' && quote === '`' && str[i + 1] !== '{') {\n                    extractSkip--;\n                    char = '$$';\n                }\n                if (quote === \"`\" && char === \"$\" && str[i + 1] === \"{\") {\n                    let skip = restOfExp(str.substring(i + 2), [/^}/]);\n                    currJs.push(skip);\n                    extractSkip += skip.length + 3;\n                    extract += `\\${${currJs.length - 1}}`;\n                    i += skip.length + 2;\n                }\n                else if (!quote && (char === \"'\" || char === '\"' || char === '`') && !escape) {\n                    currJs = [];\n                    extractSkip = 0;\n                    quote = char;\n                }\n                else if (quote === char && !escape) {\n                    let len;\n                    if (quote === '`') {\n                        literals.push({\n                            op: 'literal',\n                            a: extract,\n                            b: currJs\n                        });\n                        js.push(currJs);\n                        str = str.substring(0, i - extractSkip - 1) + `\\`${literals.length - 1}\\`` + str.substring(i + 1);\n                        len = (literals.length - 1).toString().length;\n                    }\n                    else {\n                        strings.push(extract);\n                        str = str.substring(0, i - extract.length - 1) + `\"${strings.length - 1}\"` + str.substring(i + 1);\n                        len = (strings.length - 1).toString().length;\n                    }\n                    quote = null;\n                    i -= extract.length - len;\n                    extract = \"\";\n                }\n                else if (quote && !(!escape && char === \"\\\\\")) {\n                    extractSkip += escape ? 1 + char.length : char.length;\n                    extract += char;\n                }\n                escape = quote && !escape && char === \"\\\\\";\n            }\n            str = str.replace(/([^\\w_$]|^)((var|let|const|typeof|return|instanceof|in|delete)(?=[^\\w_$]|$))/g, (match, start, keyword) => {\n                if (keyword.length !== keyword.trim().length)\n                    throw new Error(keyword);\n                return `${start}#${keyword}#`;\n            }).replace(/\\s/g, \"\").replace(/#/g, \" \");\n            js.forEach((j) => {\n                const a = j.map((skip) => this.parse(skip, strings, literals).tree[0]);\n                j.length = 0;\n                j.push(...a);\n            });\n        }\n        let parts = [];\n        let part;\n        let pos = 0;\n        while ((part = restOfExp(str.substring(pos), [/^;/]))) {\n            parts.push(part);\n            pos += part.length + 1;\n        }\n        parts = parts.filter(Boolean);\n        const tree = parts.filter((str) => str.length).map((str) => {\n            let subExpressions = [];\n            let sub;\n            let pos = 0;\n            while ((sub = restOfExp(str.substring(pos), [/^,/]))) {\n                subExpressions.push(sub);\n                pos += sub.length + 1;\n            }\n            try {\n                const exprs = subExpressions.map((str) => lispify(str));\n                if (exprs.length > 1 && exprs[0] instanceof Lisp && exprs[0].op === 'return') {\n                    const last = exprs.pop();\n                    return [exprs.shift().b, ...exprs, new Lisp({\n                            op: 'return',\n                            b: last\n                        })];\n                }\n                return exprs;\n            }\n            catch (e) {\n                // throw e;\n                throw new ParseError(e.message + \": \" + str, str);\n            }\n        });\n        return { tree: tree.flat(), strings, literals };\n    }\n    executeTree(executionTree, scopes = []) {\n        const execTree = executionTree.tree;\n        const contextb = { ...this.context, strings: executionTree.strings, literals: executionTree.literals };\n        let scope = this.context.globalScope;\n        let s;\n        while (s = scopes.shift()) {\n            if (typeof s !== \"object\")\n                continue;\n            if (s instanceof Scope) {\n                scope = s;\n            }\n            else {\n                scope = new Scope(scope, s);\n            }\n        }\n        let context = Object.assign({}, contextb);\n        if (contextb.options.audit) {\n            context.auditReport = {\n                globalsAccess: new Set(),\n                prototypeAccess: {},\n            };\n        }\n        let returned = false;\n        let res;\n        if (!(execTree instanceof Array))\n            throw new SyntaxError('Bad execution tree');\n        execTree.map(tree => {\n            if (!returned) {\n                let r;\n                try {\n                    r = exec(tree, scope, context);\n                }\n                catch (e) {\n                    throw new e.constructor(e.message);\n                }\n                if (tree instanceof Lisp && tree.op === 'return') {\n                    returned = true;\n                    res = r;\n                }\n            }\n            return null;\n        });\n        res = res instanceof Prop ? res.context[res.prop] : res;\n        return { auditReport: context.auditReport, result: res };\n    }\n    compile(code) {\n        const executionTree = Sandbox.parse(code);\n        return (...scopes) => {\n            return this.executeTree(executionTree, scopes).result;\n        };\n    }\n    ;\n}\n",null,null,null],"names":["Prop","constructor","context","prop","isConst","isGlobal","isVariable","Lisp","obj","op","a","b","If","t","f","KeyVal","key","val","ObjectFunc","args","tree","SpreadObject","item","SpreadArray","VarType","Scope","parent","vars","functionThis","undefined","const","Set","let","allVars","var","Object","keys","globals","declare","get","functionScope","has","set","SyntaxError","ReferenceError","TypeError","SandboxError","type","value","add","Error","ParseError","message","code","SandboxGlobal","globalThis","i","sandboxFunction","SandboxFunction","params","pop","parsed","Sandbox","parse","shift","res","sandbox","executeTree","options","audit","auditReport","globalsAccess","forEach","Class","prototypeAccess","result","sandboxedEval","func","sandboxEval","sandboxedSetTimeout","sandboxSetTimeout","handler","setTimeout","sandboxedSetInterval","sandboxSetInterval","setInterval","expectTypes","types","next","splitter","split","if","else","assignment","assignModify","assign","incrementerBefore","incrementerAfter","expEdge","call","modifier","not","inverse","negative","positive","typeof","delete","exp","createObject","createArray","group","dot","arrayProp","number","string","literal","boolean","null","und","NaN","Infinity","function","arrowFunc","initialize","spreadObject","spreadArray","expEnd","expStart","return","closings","closingsRegex","okFirstChars","restOfExp","part","tests","quote","isStart","escape","done","length","char","skip","substring","sub","test","assignCheck","_a","_b","_c","_d","hasOwnProperty","changeSubscriptions","cb","setSubscriptions","arrayChange","push","unshift","splice","reverse","sort","copyWithin","ops2","scope","sandboxGlobal","rep","evals","globalScope","getSubscriptions","Number","String","Boolean","isFunction","prot","prototype","name","getPrototypeOf","includes","whitelist","prototypeWhitelist","replace","prototypeReplacements","size","constuctor","g","globalsWhitelist","forbidMethodCalls","map","flat","exec","vals","JSON","stringify","cache","recurse","x","y","Array","change","changed","added","removed","slice","startIndex","deleteCount","len","Math","min","endIndex","arg","strings","literals","match","$$","$","num","parseInt","bobj","sandboxArrowFunction","startsWith","ops","Map","lispTypes","setLispType","fn","closingsCreate","expect","ctx","extract","end","l","fFound","reg2","lispify","e","str","index","lispTree","found","quoteCount","matches","constants","ended","lastType","expected","isArray","SAFE_GLOBALS","SAFE_PROTOTYPES","values","WeakMap","Function","eval","console","debug","error","info","log","table","warn","isFinite","isNaN","parseFloat","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","Symbol","EvalError","RangeError","URIError","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","WeakSet","Promise","Intl","protos","Date","RegExp","proto","subscribeGet","callback","unsubscribe","subscribeSet","names","callbacks","changeCbs","scopes","js","currJs","extractSkip","reg","from","toString","start","keyword","trim","j","parts","pos","filter","subExpressions","exprs","last","executionTree","execTree","contextb","s","returned","r","compile","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDialogElement","HTMLDivElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","HTMLElement","globalAllowedAtttributes","sanitizeType","allowedAttributes","element","attributes","HTMLAnchorElement","SVGAElement","HTMLAreaElement","el","HTMLButtonElement","HTMLInputElement","HTMLSelectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLTextAreaElement","HTMLScriptElement","HTMLStyleElement","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","regHrefJS","regValidSrc","regSystemAtt","srcAttributes","santizeAttribute","attName","attValue","preprocess","allowed","toLowerCase","setAttribute","isJs","hasAttribute","sanitizeHTML","DocumentFragment","remove","att","nodeValue","nodeName","removeAttribute","children","elementStorage","arrs","arr","coll","defaultDelegateObject","on","elem","event","$el","wrap","off","one","ElementCollection","items","$elements","iterator","selector","some","every","compareDocumentPosition","unique","toSet","toArray","is","sel","querySelectorAll","concat","parents","contains","find","c","events","opt","objectOrProp","ev","h","wrapEvent","store","getStore","evStore","addEventListener","removeEventListener","clear","trigger","eventType","detail","bubbles","cancelable","CustomEvent","dispatchEvent","evcb","evt","delegate","all","once","started","that","evs","cbs","target","listeners","lts","parentElement","eq","handlers","stoppedPropagation","stoppedImmediatePropagation","cbev","click","addClass","keyCode","currentTarget","getAttribute","attr","tabindex","role","hover","handlerIn","handlerOut","k","v","removeAttr","selected","checked","files","multiple","ret","$elems","text","scrollTop","scrollLeft","label","data","removeData","toggleClass","removeClass","force","isObject","className","classList","toggle","hasClass","nameArr","identifier","ind","first","prevAll","nextElementSibling","nextUntil","propElem","nextAll","prev","previousElementSibling","prevUntil","siblings","firstElementChild","$document","document","documentElement","originalEvent","isEqEvent","sip","stopImmediatePropagation","sp","stopPropagation","props","stopppedImmediatePropagation","defineProperties","NodeList","HTMLCollection","Element","selectors","$context","elems","doFilter","doSort","cElem","cont","collection","includeFirst","stopAt","each","wasSet","n","object","objArr","defaultValue","deleteStore","allowedGlobals","allowedPrototypes","regVarName","regKeyValName","isIterable","walkFindSubs","up","subs","parentNode","childNodes","html","content","innerHTML","contentElem","detach","preprocessHTML","subsNested","unsubNested","processed","processHTML","appendChild","run","getScopes","textContent","createElement","FileList","File","$watch","subUnsubs","watch","ElementScope","$dispatch","getRootElement","RootScope","Component","components","defineComponent","comp","init","component","runs","getScope","root","getDataScope","newScope","datascope","calls","timer","toCall","err","watchRun","toWatch","watchGets","lastVal","update","now","count","digest","list","temp","sandboxCache","codes","directives","defineDirective","isContentEditable","isInput","$$value","Node","runDirective","directive","walkerInstance","execSteps","ready","template","walkTree","unsub","parentSubs","pushed","currentSubs","pushSubs","$element","comment","createComment","ifElem","at","before","nestedSubs","cloneNode","after","join","varsExp","varMatch","doubleMatch","del","repeat","forSubs","$index","SVGElement","style","$event","original","outerHTML","nodeType","walkText","nodes","endsWith","placeholder","createTextNode","quotes","endJs","closing","inJs","strs"],"mappings":"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"}