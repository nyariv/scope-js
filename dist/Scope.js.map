{"version":3,"file":"Scope.js","sources":["../node_modules/@nyariv/sandboxjs/dist/Sandbox.js","../src/HTMLSanitizer.ts","../src/eQuery.ts","../src/Scope.ts"],"sourcesContent":["class Prop {\n    constructor(context, prop, isConst = false, isGlobal = false, isVariable = false) {\n        this.context = context;\n        this.prop = prop;\n        this.isConst = isConst;\n        this.isGlobal = isGlobal;\n        this.isVariable = isVariable;\n    }\n}\nclass Lisp {\n    constructor(obj) {\n        this.op = obj.op;\n        this.a = obj.a;\n        this.b = obj.b;\n    }\n}\nclass If {\n    constructor(t, f) {\n        this.t = t;\n        this.f = f;\n    }\n}\nclass KeyVal {\n    constructor(key, val) {\n        this.key = key;\n        this.val = val;\n    }\n}\nclass ObjectFunc {\n    constructor(key, args, tree) {\n        this.key = key;\n        this.args = args;\n        this.tree = tree;\n    }\n}\nclass SpreadObject {\n    constructor(item) {\n        this.item = item;\n    }\n}\nclass SpreadArray {\n    constructor(item) {\n        this.item = item;\n    }\n}\nvar VarType;\n(function (VarType) {\n    VarType[\"let\"] = \"let\";\n    VarType[\"const\"] = \"const\";\n    VarType[\"var\"] = \"var\";\n})(VarType || (VarType = {}));\nclass Scope {\n    constructor(parent, vars = {}, functionThis = undefined) {\n        this.const = new Set();\n        this.let = new Set();\n        this.parent = parent;\n        this.allVars = vars;\n        this.var = new Set(Object.keys(vars));\n        this.globals = !parent ? new Set(Object.keys(vars)) : new Set();\n        this.functionThis = functionThis || !parent;\n        if (functionThis) {\n            this.declare('this', VarType.var, functionThis);\n        }\n    }\n    get(key, functionScope = false) {\n        if (!this.parent || !functionScope || this.functionThis) {\n            if (this.globals.has(key)) {\n                return new Prop(this.functionThis, key, false, true, true);\n            }\n            if (this.const.has(key)) {\n                return new Prop(this.allVars, key, true, this.globals.has(key), true);\n            }\n            if (this.var.has(key)) {\n                return new Prop(this.allVars, key, false, this.globals.has(key), true);\n            }\n            if (this.let.has(key)) {\n                return new Prop(this.allVars, key, false, this.globals.has(key), true);\n            }\n            if (!this.parent) {\n                return new Prop(undefined, key);\n            }\n        }\n        return this.parent.get(key, functionScope);\n    }\n    set(key, val) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be a variable');\n        let prop = this.get(key);\n        if (prop.context === undefined) {\n            throw new ReferenceError(`Variable '${key}' was not declared.`);\n        }\n        ``;\n        if (prop.isConst) {\n            throw new TypeError(`Cannot assign to const variable '${key}'`);\n        }\n        if (prop.isGlobal) {\n            throw new SandboxError(`Cannot override global variable '${key}'`);\n        }\n        prop.context[prop] = val;\n        return prop;\n    }\n    declare(key, type = null, value = undefined, isGlobal = false) {\n        if (type === 'var' && !this.functionThis && this.parent) {\n            return this.parent.declare(key, type, value, isGlobal);\n        }\n        else if (!this.var.has(key) || !this.let.has(key) || !this.const.has(key) || !(this.globals.has(key))) {\n            if (isGlobal) {\n                this.globals.add(key);\n            }\n            this[type].add(key);\n            this.allVars[key] = value;\n        }\n        else {\n            throw Error(`Variable '${key}' already declared`);\n        }\n        return new Prop(this.allVars, key, this.const.has(key), isGlobal);\n    }\n}\nclass ParseError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nclass SandboxError extends Error {\n}\nclass SandboxGlobal {\n    constructor(globals) {\n        if (globals === globalThis)\n            return globalThis;\n        for (let i in globals) {\n            this[i] = globals[i];\n        }\n    }\n}\nfunction sandboxFunction(context) {\n    return SandboxFunction;\n    function SandboxFunction(...params) {\n        let code = params.pop();\n        let parsed = Sandbox.parse(code);\n        return function (...args) {\n            const vars = {};\n            for (let i of params) {\n                vars[i] = args.shift();\n            }\n            const res = context.sandbox.executeTree(parsed);\n            if (context.options.audit) {\n                for (let key in res.auditReport.globalsAccess) {\n                    let add = res.auditReport.globalsAccess[key];\n                    context.auditReport.globalsAccess[key] = context.auditReport.globalsAccess[key] || new Set();\n                    add.forEach((val) => {\n                        context.auditReport.globalsAccess[key].add(val);\n                    });\n                }\n                for (let Class in res.auditReport.prototypeAccess) {\n                    let add = res.auditReport.prototypeAccess[Class];\n                    context.auditReport.prototypeAccess[Class] = context.auditReport.prototypeAccess[Class] || new Set();\n                    add.forEach((val) => {\n                        context.auditReport.prototypeAccess[Class].add(val);\n                    });\n                }\n            }\n            return res.result;\n        };\n    }\n}\nfunction sandboxedEval(func) {\n    return sandboxEval;\n    function sandboxEval(code) {\n        return func(code)();\n    }\n}\nfunction sandboxedSetTimeout(func) {\n    return function sandboxSetTimeout(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setTimeout(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nfunction sandboxedSetInterval(func) {\n    return function sandboxSetInterval(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setInterval(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nlet expectTypes = {\n    op: {\n        types: { op: /^(\\/|\\*\\*(?!\\=)|\\*(?!\\=)|\\%(?!\\=))/ },\n        next: [\n            'value',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    splitter: {\n        types: {\n            split: /^(&&|&|\\|\\||\\||<=|>=|<|>|!==|!=|===|==| instanceof | in |\\+(?!\\+)|\\-(?!\\-))(?!\\=)/,\n        },\n        next: [\n            'value',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    if: {\n        types: {\n            if: /^\\?/,\n            else: /^:/,\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    assignment: {\n        types: {\n            assignModify: /^(\\-=|\\+=|\\/=|\\*\\*=|\\*=|%=|\\^=|\\&=|\\|=)/,\n            assign: /^(=)/\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    incrementerBefore: {\n        types: { incrementerBefore: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'prop',\n        ]\n    },\n    incrementerAfter: {\n        types: { incrementerAfter: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'splitter',\n            'op',\n            'expEnd'\n        ]\n    },\n    expEdge: {\n        types: {\n            arrayProp: /^[\\[]/,\n            call: /^[\\(]/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    modifier: {\n        types: {\n            not: /^!/,\n            inverse: /^~/,\n            negative: /^\\-(?!\\-)/,\n            positive: /^\\+(?!\\+)/,\n            typeof: /^ typeof /,\n            delete: /^ delete /,\n        },\n        next: [\n            'exp',\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    exp: {\n        types: {\n            createObject: /^\\{/,\n            createArray: /^\\[/,\n            group: /^\\(/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    dot: {\n        types: {\n            dot: /^\\.(?!\\.)/\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    prop: {\n        types: {\n            prop: /^[a-zA-Z\\$_][a-zA-Z\\d\\$_]*/,\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    value: {\n        types: {\n            number: /^\\-?\\d+(\\.\\d+)?/,\n            string: /^\"(\\d+)\"/,\n            literal: /^`(\\d+)`/,\n            boolean: /^(true|false)(?![\\w$_])/,\n            null: /^null(?![\\w$_])/,\n            und: /^undefined(?![\\w$_])/,\n            NaN: /^NaN(?![\\w$_])/,\n            Infinity: /^Infinity(?![\\w$_])/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'if',\n            'dot',\n            'expEnd'\n        ]\n    },\n    function: {\n        types: {\n            arrowFunc: /^\\(?(((\\.\\.\\.)?[a-zA-Z\\$_][a-zA-Z\\d\\$_]*,?)*)(\\))?=>({)?/\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    initialize: {\n        types: {\n            initialize: /^ (var|let|const) [a-zA-Z\\$_][a-zA-Z\\d\\$_]*/\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    },\n    spreadObject: {\n        types: {\n            spreadObject: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'exp',\n            'prop',\n        ]\n    },\n    spreadArray: {\n        types: {\n            spreadArray: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'exp',\n            'prop',\n        ]\n    },\n    expEnd: { types: {}, next: [] },\n    expStart: {\n        types: {\n            return: /^ return /,\n        },\n        next: [\n            'value',\n            'function',\n            'prop',\n            'exp',\n            'modifier',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    }\n};\nlet closings = {\n    \"(\": \")\",\n    \"[\": \"]\",\n    \"{\": \"}\",\n    \"'\": \"'\",\n    '\"': '\"',\n    \"`\": \"`\"\n};\nlet closingsRegex = {\n    \"(\": /^\\)/,\n    \"[\": /^\\]/,\n    \"{\": /^\\}/,\n    \"'\": /^\\'/,\n    '\"': /^\\\"/,\n    \"`\": /^\\`/\n};\nconst okFirstChars = /^[\\+\\-~ !]/;\nconst restOfExp = (part, tests, quote) => {\n    let isStart = true;\n    tests = tests || [\n        expectTypes.op.types.op,\n        expectTypes.splitter.types.split,\n        expectTypes.if.types.if,\n        expectTypes.if.types.else\n    ];\n    let escape = false;\n    let done = false;\n    let i;\n    for (i = 0; i < part.length && !done; i++) {\n        let char = part[i];\n        if (quote === '\"' || quote === \"'\" || quote === \"`\") {\n            if (quote === \"`\" && char === \"$\" && part[i + 1] === \"{\" && !escape) {\n                let skip = restOfExp(part.substring(i + 2), [closingsRegex['{']]);\n                i += skip.length + 2;\n            }\n            else if (char === quote && !escape) {\n                return part.substring(0, i);\n            }\n            escape = char === \"\\\\\";\n        }\n        else if (closings[char]) {\n            let skip = restOfExp(part.substring(i + 1), [closingsRegex[quote]], char);\n            i += skip.length + 1;\n            isStart = false;\n        }\n        else if (!quote) {\n            let sub = part.substring(i);\n            for (let test of tests) {\n                done = test.test(sub);\n                if (done)\n                    break;\n            }\n            if (isStart) {\n                if (okFirstChars.test(sub)) {\n                    done = false;\n                }\n                else {\n                    isStart = false;\n                }\n            }\n            if (done)\n                break;\n        }\n        else if (char === closings[quote]) {\n            return part.substring(0, i);\n        }\n    }\n    return part.substring(0, i);\n};\nrestOfExp.next = [\n    'splitter',\n    'op',\n    'expEnd',\n    'if'\n];\nfunction assignCheck(obj, context, op = 'assign') {\n    if (obj.context === undefined) {\n        throw new ReferenceError(`Cannot ${op} value to undefined.`);\n    }\n    if (typeof obj.context !== 'object' && typeof obj.context !== 'function') {\n        throw new SyntaxError(`Cannot ${op} value to a primitive.`);\n    }\n    if (obj.isConst) {\n        throw new TypeError(`Cannot set value to const variable '${obj.prop}'`);\n    }\n    if (obj.isGlobal) {\n        throw new SandboxError(`Cannot ${op} property '${obj.prop}' of a global object`);\n    }\n    if (typeof obj.context[obj.prop] === 'function' && !obj.context.hasOwnProperty(obj.prop)) {\n        throw new SandboxError(`Override prototype property '${obj.prop}' not allowed`);\n    }\n        var _a, _b;\n        (_b = (_a = context.setSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.get(obj.prop)) === null || _b === void 0 ? void 0 : _b.forEach((cb) => cb());\n\n}\nlet ops2 = {\n    'prop': (a, b, obj, context, scope) => {\n        if (a === null) {\n            throw new TypeError(`Cannot get property ${b} of null`);\n        }\n        const type = typeof a;\n        if (type === 'undefined') {\n            let prop = scope.get(b);\n            if (prop.context === undefined)\n                throw new ReferenceError(`${b} is not defined`);\n            if (prop.context === context.sandboxGlobal) {\n                if (context.options.audit) {\n                    context.auditReport.globalsAccess.add(b);\n                }\n                const rep = context.evals.get(context.sandboxGlobal[b]);\n                if (rep)\n                    return rep;\n            }\n            if (prop.context && prop.context[b] === globalThis) {\n                return context.globalScope.get('this');\n            }\n            context.getSubscriptions.forEach((cb) => cb(prop.context, prop.prop));\n            return prop;\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                a = new Number(a);\n            }\n            else if (type === 'string') {\n                a = new String(a);\n            }\n            else if (type === 'boolean') {\n                a = new Boolean(a);\n            }\n        }\n        else if (typeof a.hasOwnProperty === 'undefined') {\n            return new Prop(undefined, b);\n        }\n        const isFunction = type === 'function';\n        let prototypeAccess = isFunction || !(a.hasOwnProperty(b) || typeof b === 'number');\n        if (context.options.audit && prototypeAccess) {\n            if (typeof b === 'string') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        if (!context.auditReport.prototypeAccess[prot.constructor.name]) {\n                            context.auditReport.prototypeAccess[prot.constructor.name] = new Set();\n                        }\n                        context.auditReport.prototypeAccess[prot.constructor.name].add(b);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        if (prototypeAccess) {\n            if (isFunction) {\n                if (!['name', 'length', 'constructor'].includes(b) && a.hasOwnProperty(b)) {\n                    const whitelist = context.prototypeWhitelist.get(a);\n                    const replace = context.prototypeReplacements.get(a);\n                    if (replace) {\n                        return new Prop(replace(a, true), b);\n                    }\n                    if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                    }\n                    else {\n                        throw new SandboxError(`Static method or property access not permitted: ${a.name}.${b}`);\n                    }\n                }\n            }\n            else if (b !== 'constructor') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        const whitelist = context.prototypeWhitelist.get(prot.constructor);\n                        const replace = context.prototypeReplacements.get(prot.constuctor);\n                        if (replace) {\n                            return new Prop(replace(a, false), b);\n                        }\n                        if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                            break;\n                        }\n                        throw new SandboxError(`Method or property access not permitted: ${prot.constructor.name}.${b}`);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        const rep = context.evals.get(a[b]);\n        if (rep)\n            return rep;\n        if (a[b] === globalThis) {\n            return context.globalScope.get('this');\n        }\n        let g = obj.isGlobal || (isFunction && a.name !== 'sandboxArrowFunction') || context.globalsWhitelist.has(a);\n        if (!g) {\n            context.getSubscriptions.forEach((cb) => cb(a, b));\n        }\n        return new Prop(a, b, false, g);\n    },\n    'call': (a, b, obj, context, scope) => {\n        if (context.options.forbidMethodCalls)\n            throw new SandboxError(\"Method calls are not allowed\");\n        if (typeof a !== 'function') {\n            throw new TypeError(`${obj.prop} is not a function`);\n        }\n        const args = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        if (typeof obj === 'function') {\n            return obj(...args.map((item) => exec(item, scope, context)));\n        }\n        return obj.context[obj.prop](...args.map((item) => exec(item, scope, context)));\n    },\n    'createObject': (a, b, obj, context, scope) => {\n        let res = {};\n        for (let item of b) {\n            if (item instanceof SpreadObject) {\n                res = { ...res, ...item.item };\n            }\n            else if (item instanceof ObjectFunc) {\n                let f = item;\n                res[f.key] = function (...args) {\n                    const vars = {};\n                    f.args.forEach((arg, i) => {\n                        vars[arg] = args[i];\n                    });\n                    return context.sandbox.executeTree({\n                        tree: f.tree,\n                        strings: context.strings,\n                        literals: context.literals,\n                    }, [new Scope(scope, vars, this)]).result;\n                };\n            }\n            else {\n                res[item.key] = item.val;\n            }\n        }\n        return res;\n    },\n    'keyVal': (a, b) => new KeyVal(a, b),\n    'createArray': (a, b, obj, context, scope) => {\n        return b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat().map((item) => exec(item, scope, context));\n    },\n    'group': (a, b) => b,\n    'string': (a, b, obj, context) => context.strings[b],\n    'literal': (a, b, obj, context, scope) => {\n        let name = context.literals[b].a;\n        return name.replace(/(\\$\\$)*(\\$)?\\${(\\d+)}/g, (match, $$, $, num) => {\n            if ($)\n                return match;\n            let res = exec(context.literals[b].b[parseInt(num, 10)], scope, context);\n            res = res instanceof Prop ? res.context[res.prop] : res;\n            return ($$ ? $$ : '') + `${res}`.replace(/\\$/g, '$$');\n        }).replace(/\\$\\$/g, '$');\n    },\n    'spreadArray': (a, b, obj, context, scope) => {\n        return new SpreadArray(exec(b, scope, context));\n    },\n    'spreadObject': (a, b, obj, context, scope) => {\n        return new SpreadObject(exec(b, scope, context));\n    },\n    '!': (a, b) => !b,\n    '~': (a, b) => ~b,\n    '++$': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return ++obj.context[obj.prop];\n    },\n    '$++': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop]++;\n    },\n    '--$': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return --obj.context[obj.prop];\n    },\n    '$--': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop]--;\n    },\n    '=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        obj.context[obj.prop] = b;\n        return new Prop(obj.context, obj.prop, false, obj.isGlobal);\n    },\n    '+=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] += b;\n    },\n    '-=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] -= b;\n    },\n    '/=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] /= b;\n    },\n    '*=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] *= b;\n    },\n    '**=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] **= b;\n    },\n    '%=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] %= b;\n    },\n    '^=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] ^= b;\n    },\n    '&=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] &= b;\n    },\n    '|=': (a, b, obj, context) => {\n        assignCheck(obj, context);\n        return obj.context[obj.prop] |= b;\n    },\n    '?': (a, b) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        return a ? b.t : b.f;\n    },\n    '>': (a, b) => a > b,\n    '<': (a, b) => a < b,\n    '>=': (a, b) => a >= b,\n    '<=': (a, b) => a <= b,\n    '==': (a, b) => a == b,\n    '===': (a, b) => a === b,\n    '!=': (a, b) => a != b,\n    '!==': (a, b) => a !== b,\n    '&&': (a, b) => a && b,\n    '||': (a, b) => a || b,\n    '&': (a, b) => a & b,\n    '|': (a, b) => a | b,\n    ':': (a, b) => new If(a, b),\n    '+': (a, b) => a + b,\n    '-': (a, b) => a - b,\n    '$+': (a, b) => +b,\n    '$-': (a, b) => -b,\n    '/': (a, b) => a / b,\n    '*': (a, b) => a * b,\n    '%': (a, b) => a % b,\n    ' typeof ': (a, b) => typeof b,\n    ' instanceof ': (a, b) => a instanceof b,\n    ' in ': (a, b) => a in b,\n    ' delete ': (a, b, obj, context, scope, bobj) => {\n        if (bobj.context === undefined) {\n            return true;\n        }\n        assignCheck(bobj, context, 'delete');\n        if (bobj.isVariable)\n            return false;\n        return delete bobj.context[bobj.prop];\n    },\n    'return': (a, b) => b,\n    'var': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.var, exec(b, scope, context));\n    },\n    'let': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.let, exec(b, scope, context), bobj && bobj.isGlobal);\n    },\n    'const': (a, b, obj, context, scope, bobj) => {\n        return scope.declare(a, VarType.const, exec(b, scope, context));\n    },\n    'arrowFunc': (a, b, obj, context, scope) => {\n        const sandboxArrowFunction = (...args) => {\n            const vars = {};\n            a.forEach((arg, i) => {\n                if (arg.startsWith('...')) {\n                    vars[arg.substring(3)] = args.slice(i);\n                }\n                else {\n                    vars[arg] = args[i];\n                }\n            });\n            return context.sandbox.executeTree({\n                tree: b,\n                strings: context.strings,\n                literals: context.literals,\n            }, [new Scope(scope, vars)]).result;\n        };\n        return sandboxArrowFunction;\n    }\n};\nlet ops = new Map();\nfor (let op in ops2) {\n    ops.set(op, ops2[op]);\n}\nlet lispTypes = new Map();\nconst setLispType = (types, fn) => {\n    types.forEach((type) => {\n        lispTypes.set(type, fn);\n    });\n};\nconst closingsCreate = {\n    'createArray': /^\\]/,\n    'createObject': /^\\}/,\n    'group': /^\\)/,\n    'arrayProp': /^\\]/,\n    'call': /^\\)/\n};\nsetLispType(['createArray', 'createObject', 'group', 'arrayProp', 'call'], (type, part, res, expect, ctx) => {\n    let extract = \"\";\n    let arg = [];\n    let end = false;\n    let i = 1;\n    while (i < part.length && !end) {\n        extract = restOfExp(part.substring(i), [\n            closingsCreate[type],\n            /^,/\n        ]);\n        i += extract.length;\n        if (extract) {\n            arg.push(extract);\n        }\n        if (part[i] !== ',') {\n            end = true;\n        }\n        else {\n            i++;\n        }\n    }\n    const next = ['value', 'function', 'prop', 'exp', 'modifier', 'incrementerBefore'];\n    let l;\n    let fFound;\n    const reg2 = /^([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\((([a-zA-Z\\$_][a-zA-Z\\d\\$_]*,?)*)\\)?{/;\n    switch (type) {\n        case 'group':\n        case 'arrayProp':\n            l = lispify(arg.pop());\n            break;\n        case 'call':\n        case 'createArray':\n            l = arg.map((e) => lispify(e, [...next, 'spreadArray']));\n            break;\n        case 'createObject':\n            l = arg.map((str) => {\n                let value;\n                let key;\n                fFound = reg2.exec(str);\n                if (fFound) {\n                    let args = fFound[2] ? fFound[2].split(\",\") : [];\n                    const func = restOfExp(str.substring(fFound.index + fFound[0].length), [/^}/]);\n                    return new ObjectFunc(fFound[1], args, Sandbox.parse(func, null).tree);\n                }\n                else {\n                    let extract = restOfExp(str, [/^:/]);\n                    key = lispify(extract, [...next, 'spreadObject']);\n                    if (key instanceof Lisp && key.op === 'prop') {\n                        key = key.b;\n                    }\n                    if (extract.length === str.length)\n                        return key;\n                    value = lispify(str.substring(extract.length + 1));\n                }\n                return new Lisp({\n                    op: 'keyVal',\n                    a: key,\n                    b: value\n                });\n            });\n            break;\n    }\n    type = type === 'arrayProp' ? 'prop' : type;\n    ctx.lispTree = lispify(part.substring(i + 1), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: ctx.lispTree,\n        b: l,\n    }));\n});\nsetLispType(['inverse', 'not', 'negative', 'positive', 'typeof', 'delete', 'op'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length));\n    ctx.lispTree = lispify(part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: ['positive', 'negative'].includes(type) ? '$' + res[0] : res[0],\n        a: ctx.lispTree,\n        b: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerBefore'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(2));\n    ctx.lispTree = lispify(part.substring(extract.length + 2), restOfExp.next, new Lisp({\n        op: res[0] + \"$\",\n        a: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerAfter'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: \"$\" + res[0],\n        a: ctx.lispTree,\n    }));\n});\nsetLispType(['assign', 'assignModify'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['split'], (type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length), [\n        expectTypes.splitter.types.split,\n        expectTypes.if.types.if,\n        expectTypes.if.types.else\n    ]);\n    ctx.lispTree = lispify(part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['if'], (type, part, res, expect, ctx) => {\n    let found = false;\n    let extract = \"\";\n    let quoteCount = 1;\n    while (!found && extract.length < part.length) {\n        extract += restOfExp(part.substring(extract.length + 1), [\n            expectTypes.if.types.if,\n            expectTypes.if.types.else\n        ]);\n        if (part[extract.length + 1] === '?') {\n            quoteCount++;\n        }\n        else {\n            quoteCount--;\n        }\n        if (!quoteCount) {\n            found = true;\n        }\n        else {\n            extract += part[extract.length + 1];\n        }\n    }\n    ctx.lispTree = new Lisp({\n        op: '?',\n        a: ctx.lispTree,\n        b: new Lisp({\n            op: ':',\n            a: lispify(extract),\n            b: lispify(part.substring(res[0].length + extract.length + 1))\n        })\n    });\n});\nsetLispType(['dot', 'prop'], (type, part, res, expect, ctx) => {\n    let prop = res[0];\n    let index = res[0].length;\n    if (res[0] === '.') {\n        let matches = part.substring(res[0].length).match(expectTypes.prop.types.prop);\n        if (matches.length) {\n            prop = matches[0];\n            index = prop.length + res[0].length;\n        }\n        else {\n            throw Error('Hanging  dot:' + part);\n        }\n    }\n    ctx.lispTree = lispify(part.substring(index), expectTypes[expect].next, new Lisp({\n        op: 'prop',\n        a: ctx.lispTree,\n        b: prop\n    }));\n});\nsetLispType(['spreadArray', 'spreadObject', 'return'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispify(part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['number', 'boolean', 'null'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, JSON.parse(res[0]));\n});\nconst constants = {\n    NaN,\n    Infinity,\n};\nsetLispType(['und', 'NaN', 'Infinity'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, constants[type]);\n});\nsetLispType(['string', 'literal'], (type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: type,\n        b: parseInt(JSON.parse(res[1]), 10),\n    }));\n});\nsetLispType(['initialize'], (type, part, res, expect, ctx) => {\n    const split = res[0].split(/ /g);\n    if (part.length === res[0].length) {\n        ctx.lispTree = lispify(part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n            op: split[1],\n            a: split[2]\n        }));\n    }\n    else {\n        ctx.lispTree = new Lisp({\n            op: split[1],\n            a: split[2],\n            b: lispify(part.substring(res[0].length + 1), expectTypes[expect].next)\n        });\n    }\n});\nsetLispType(['arrowFunc'], (type, part, res, expect, ctx) => {\n    let args = res[1] ? res[1].split(\",\") : [];\n    if (res[4]) {\n        if (res[0][0] !== '(')\n            throw new SyntaxError('Unstarted inline function brackets: ' + res[0]);\n    }\n    else if (args.length) {\n        args = [args.pop()];\n    }\n    let ended = false;\n    args.forEach((arg) => {\n        if (ended)\n            throw new SyntaxError('Rest parameter must be last formal parameter');\n        if (arg.startsWith('...'))\n            ended = true;\n    });\n    const func = (res[5] ? '' : ' return ') + restOfExp(part.substring(res[0].length), res[5] ? [/^}/] : [/^[,;\\)\\}\\]]/]);\n    ctx.lispTree = lispify(part.substring(res[0].length + func.length + 1), expectTypes[expect].next, new Lisp({\n        op: 'arrowFunc',\n        a: args,\n        b: Sandbox.parse(func, null).tree\n    }));\n});\nlet lastType;\nfunction lispify(part, expected, lispTree) {\n    expected = expected || ['initialize', 'expStart', 'value', 'function', 'prop', 'exp', 'modifier', 'incrementerBefore', 'expEnd'];\n    if (part === undefined)\n        return lispTree;\n    if (!part.length && !expected.includes('expEnd')) {\n        throw new SyntaxError(\"Unexpected end of expression\");\n    }\n    let ctx = { lispTree: lispTree };\n    let res;\n    for (let expect of expected) {\n        if (expect === 'expEnd') {\n            continue;\n        }\n        for (let type in expectTypes[expect].types) {\n            if (type === 'expEnd') {\n                continue;\n            }\n            if (res = expectTypes[expect].types[type].exec(part)) {\n                lastType = type;\n                lispTypes.get(type)(type, part, res, expect, ctx);\n                break;\n            }\n        }\n        if (res)\n            break;\n    }\n    if (!res && part.length) {\n        throw Error(`Unexpected token (${lastType}): ${part}`);\n    }\n    return ctx.lispTree;\n}\nfunction exec(tree, scope, context) {\n    if (tree instanceof Prop) {\n        return tree.context[tree.prop];\n    }\n    if (Array.isArray(tree)) {\n        return tree.map((item) => exec(item, scope, context));\n    }\n    if (!(tree instanceof Lisp)) {\n        return tree;\n    }\n    if (tree.op === 'arrowFunc') {\n        return ops.get(tree.op)(tree.a, tree.b, undefined, context, scope);\n    }\n    let obj = exec(tree.a, scope, context);\n    let a = obj instanceof Prop ? (obj.context ? obj.context[obj.prop] : undefined) : obj;\n    let bobj = exec(tree.b, scope, context);\n    let b = bobj instanceof Prop ? (bobj.context ? bobj.context[bobj.prop] : undefined) : bobj;\n    if (ops.has(tree.op)) {\n        let res = ops.get(tree.op)(a, b, obj, context, scope, bobj);\n        return res;\n    }\n    throw new SyntaxError('Unknown operator: ' + tree.op);\n}\nexport default class Sandbox {\n    constructor(globals = Sandbox.SAFE_GLOBALS, prototypeWhitelist = Sandbox.SAFE_PROTOTYPES, prototypeReplacements = new Map(), options = { audit: false }) {\n        const sandboxGlobal = new SandboxGlobal(globals);\n        this.context = {\n            sandbox: this,\n            globals,\n            prototypeWhitelist,\n            prototypeReplacements,\n            globalsWhitelist: new Set(Object.values(globals)),\n            options,\n            globalScope: new Scope(null, globals, sandboxGlobal),\n            sandboxGlobal,\n            evals: new Map(),\n            getSubscriptions: new Set(),\n            setSubscriptions: new WeakMap()\n        };\n        const func = sandboxFunction(this.context);\n        this.context.evals.set(Function, func);\n        this.context.evals.set(eval, sandboxedEval(func));\n        this.context.evals.set(setTimeout, sandboxedSetTimeout(func));\n        this.context.evals.set(setInterval, sandboxedSetInterval(func));\n    }\n    static get SAFE_GLOBALS() {\n        return {\n            Function,\n            console: {\n                debug: console.debug, \n                error: console.error, \n                info: console.info, \n                log: console.log, \n                table: console.table, \n                warn: console.warn\n            },\n            isFinite,\n            isNaN,\n            parseFloat,\n            parseInt,\n            decodeURI,\n            decodeURIComponent,\n            encodeURI,\n            encodeURIComponent,\n            escape,\n            unescape,\n            Boolean,\n            Number,\n            String,\n            Object,\n            Array,\n            Symbol,\n            Error,\n            EvalError,\n            RangeError,\n            ReferenceError,\n            SyntaxError,\n            TypeError,\n            URIError,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Intl,\n            JSON,\n            Math,\n        };\n    }\n    static get SAFE_PROTOTYPES() {\n        let protos = [\n            SandboxGlobal,\n            Function,\n            Boolean,\n            Number,\n            String,\n            Date,\n            RegExp,\n            Error,\n            Array,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n        ];\n        let map = new Map();\n        protos.forEach((proto) => {\n            map.set(proto, new Set());\n        });\n        map.set(Object, new Set([\n            'entries',\n            'fromEntries',\n            'getOwnPropertyNames',\n            'is',\n            'keys',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'toLocaleString',\n            'toString',\n            'valueOf',\n            'values'\n        ]));\n        return map;\n    }\n    subscribeGet(callback) {\n        this.context.getSubscriptions.add(callback);\n        return { unsubscribe: () => this.context.getSubscriptions.delete(callback) };\n    }\n    subscribeSet(obj, name, callback) {\n        const names = this.context.setSubscriptions.get(obj) || new Map();\n        this.context.setSubscriptions.set(obj, names);\n        const callbacks = names.get(name) || new Set();\n        names.set(name, callbacks);\n        callbacks.add(callback);\n        return { unsubscribe: () => callbacks.delete(callback) };\n    }\n    static audit(code, scopes = []) {\n        return new Sandbox(globalThis, new Map(), new Map(), {\n            audit: true,\n        }).executeTree(Sandbox.parse(code), scopes);\n    }\n    static parse(code, strings = [], literals = []) {\n        if (typeof code !== 'string')\n            throw new ParseError(`Cannot parse ${code}`, code);\n        // console.log('parse', str);\n        let str = code;\n        let quote;\n        let extract = \"\";\n        let escape = false;\n        let js = [];\n        let currJs = [];\n        if (strings) {\n            let extractSkip = 0;\n            for (let i = 0; i < str.length; i++) {\n                let char = str[i];\n                if (escape) {\n                    if (char === \"$\" && quote === '`') {\n                        extractSkip--;\n                        char = '$$';\n                    }\n                    else if (char === 'u') {\n                        let reg = /^[a-fA-F\\d]{2,4}/.exec(str.substring(i + 1));\n                        let num;\n                        if (!reg) {\n                            num = Array.from(/^{[a-fA-F\\d]+}/.exec(str.substring(i + 1)) || [\"\"]);\n                        }\n                        else {\n                            num = Array.from(reg);\n                        }\n                        char = JSON.parse(`\"\\\\u${num[0]}\"`);\n                        str = str.substring(0, i - 1) + char + str.substring(i + (1 + num[0].length));\n                        i -= 1;\n                    }\n                    else if (char != '`') {\n                        char = JSON.parse(`\"\\\\${char}\"`);\n                    }\n                }\n                else if (char === '$' && quote === '`' && str[i + 1] !== '{') {\n                    extractSkip--;\n                    char = '$$';\n                }\n                if (quote === \"`\" && char === \"$\" && str[i + 1] === \"{\") {\n                    let skip = restOfExp(str.substring(i + 2), [/^}/]);\n                    currJs.push(skip);\n                    extractSkip += skip.length + 3;\n                    extract += `\\${${currJs.length - 1}}`;\n                    i += skip.length + 2;\n                }\n                else if (!quote && (char === \"'\" || char === '\"' || char === '`') && !escape) {\n                    currJs = [];\n                    extractSkip = 0;\n                    quote = char;\n                }\n                else if (quote === char && !escape) {\n                    let len;\n                    if (quote === '`') {\n                        literals.push({\n                            op: 'literal',\n                            a: extract,\n                            b: currJs\n                        });\n                        js.push(currJs);\n                        str = str.substring(0, i - extractSkip - 1) + `\\`${literals.length - 1}\\`` + str.substring(i + 1);\n                        len = (literals.length - 1).toString().length;\n                    }\n                    else {\n                        strings.push(extract);\n                        str = str.substring(0, i - extract.length - 1) + `\"${strings.length - 1}\"` + str.substring(i + 1);\n                        len = (strings.length - 1).toString().length;\n                    }\n                    quote = null;\n                    i -= extract.length - len;\n                    extract = \"\";\n                }\n                else if (quote && !(!escape && char === \"\\\\\")) {\n                    extractSkip += escape ? 1 + char.length : char.length;\n                    extract += char;\n                }\n                escape = quote && !escape && char === \"\\\\\";\n            }\n            str = str.replace(/([^\\w_$]|^)((var|let|const|typeof|return|instanceof|in|delete)(?=[^\\w_$]|$))/g, (match, start, keyword) => {\n                if (keyword.length !== keyword.trim().length)\n                    throw new Error(keyword);\n                return `${start}#${keyword}#`;\n            }).replace(/\\s/g, \"\").replace(/#/g, \" \");\n            js.forEach((j) => {\n                const a = j.map((skip) => this.parse(skip, strings, literals).tree[0]);\n                j.length = 0;\n                j.push(...a);\n            });\n        }\n        let parts = [];\n        let part;\n        let pos = 0;\n        while ((part = restOfExp(str.substring(pos), [/^;/]))) {\n            parts.push(part);\n            pos += part.length + 1;\n        }\n        parts = parts.filter(Boolean);\n        const tree = parts.filter((str) => str.length).map((str) => {\n            let subExpressions = [];\n            let sub;\n            let pos = 0;\n            while ((sub = restOfExp(str.substring(pos), [/^,/]))) {\n                subExpressions.push(sub);\n                pos += sub.length + 1;\n            }\n            try {\n                const exprs = subExpressions.map((str) => lispify(str));\n                if (exprs.length > 1 && exprs[0] instanceof Lisp && exprs[0].op === 'return') {\n                    const last = exprs.pop();\n                    return [exprs.shift().b, ...exprs, new Lisp({\n                            op: 'return',\n                            b: last\n                        })];\n                }\n                return exprs;\n            }\n            catch (e) {\n                // throw e;\n                throw new ParseError(e.message + \": \" + str, str);\n            }\n        });\n        return { tree: tree.flat(), strings, literals };\n    }\n    executeTree(executionTree, scopes = []) {\n        const execTree = executionTree.tree;\n        const contextb = { ...this.context, strings: executionTree.strings, literals: executionTree.literals };\n        let scope = this.context.globalScope;\n        let s;\n        while (s = scopes.shift()) {\n            if (typeof s !== \"object\")\n                continue;\n            if (s instanceof Scope) {\n                scope = s;\n            }\n            else {\n                scope = new Scope(scope, s);\n            }\n        }\n        let context = Object.assign({}, contextb);\n        if (contextb.options.audit) {\n            context.auditReport = {\n                globalsAccess: new Set(),\n                prototypeAccess: {},\n            };\n        }\n        let returned = false;\n        let res;\n        if (!(execTree instanceof Array))\n            throw new SyntaxError('Bad execution tree');\n        execTree.map(tree => {\n            if (!returned) {\n                let r;\n                try {\n                    r = exec(tree, scope, context);\n                }\n                catch (e) {\n                    throw new e.constructor(e.message);\n                }\n                if (tree instanceof Lisp && tree.op === 'return') {\n                    returned = true;\n                    res = r;\n                }\n            }\n            return null;\n        });\n        res = res instanceof Prop ? res.context[res.prop] : res;\n        return { auditReport: context.auditReport, result: res };\n    }\n    compile(code) {\n        const executionTree = Sandbox.parse(code);\n        return (...scopes) => {\n            return this.executeTree(executionTree, scopes).result;\n        };\n    }\n    ;\n}\n",null,null,null],"names":["Prop","constructor","context","prop","isConst","isGlobal","isVariable","Lisp","obj","op","a","b","If","t","f","KeyVal","key","val","ObjectFunc","args","tree","SpreadObject","item","SpreadArray","VarType","Scope","parent","vars","functionThis","undefined","const","Set","let","allVars","var","Object","keys","globals","declare","get","functionScope","has","set","SyntaxError","ReferenceError","TypeError","SandboxError","type","value","add","Error","ParseError","message","code","SandboxGlobal","globalThis","i","sandboxFunction","SandboxFunction","params","pop","parsed","Sandbox","parse","shift","res","sandbox","executeTree","options","audit","auditReport","globalsAccess","forEach","Class","prototypeAccess","result","sandboxedEval","func","sandboxEval","sandboxedSetTimeout","sandboxSetTimeout","handler","setTimeout","sandboxedSetInterval","sandboxSetInterval","setInterval","expectTypes","types","next","splitter","split","if","else","assignment","assignModify","assign","incrementerBefore","incrementerAfter","expEdge","arrayProp","call","modifier","not","inverse","negative","positive","typeof","delete","exp","createObject","createArray","group","dot","number","string","literal","boolean","null","und","NaN","Infinity","function","arrowFunc","initialize","spreadObject","spreadArray","expEnd","expStart","return","closings","closingsRegex","okFirstChars","restOfExp","part","tests","quote","isStart","escape","done","length","char","skip","substring","sub","test","assignCheck","hasOwnProperty","_a","_b","setSubscriptions","cb","ops2","scope","sandboxGlobal","rep","evals","globalScope","getSubscriptions","Number","String","Boolean","isFunction","prot","prototype","name","getPrototypeOf","includes","whitelist","prototypeWhitelist","replace","prototypeReplacements","size","constuctor","g","globalsWhitelist","forbidMethodCalls","map","flat","exec","arg","strings","literals","match","$$","$","num","parseInt","bobj","sandboxArrowFunction","startsWith","slice","ops","Map","lispTypes","setLispType","fn","closingsCreate","expect","ctx","extract","end","push","l","fFound","reg2","lispify","e","str","index","lispTree","found","quoteCount","matches","JSON","constants","ended","lastType","expected","Array","isArray","SAFE_GLOBALS","SAFE_PROTOTYPES","values","WeakMap","Function","eval","console","debug","error","info","log","table","warn","isFinite","isNaN","parseFloat","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","Symbol","EvalError","RangeError","URIError","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","WeakSet","Promise","Intl","Math","protos","Date","RegExp","proto","subscribeGet","callback","unsubscribe","subscribeSet","names","callbacks","scopes","js","currJs","extractSkip","reg","from","len","toString","start","keyword","trim","j","parts","pos","filter","subExpressions","exprs","last","executionTree","execTree","contextb","s","returned","r","compile","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDialogElement","HTMLDivElement","HTMLFieldSetElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","HTMLElement","globalAllowedAtttributes","sanitizeType","allowedAttributes","element","attributes","HTMLAnchorElement","SVGAElement","HTMLAreaElement","el","HTMLButtonElement","HTMLInputElement","HTMLSelectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLTextAreaElement","HTMLScriptElement","HTMLStyleElement","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","regHrefJS","regValidSrc","regSystemAtt","srcAttributes","santizeAttribute","attName","attValue","preprocess","allowed","toLowerCase","setAttribute","isJs","hasAttribute","sanitizeHTML","DocumentFragment","remove","att","nodeValue","nodeName","removeAttribute","children","elementStorage","arrs","arr","coll","defaultDelegateObject","on","elem","event","$el","wrap","off","one","ElementCollection","items","$elements","iterator","selector","some","every","sort","compareDocumentPosition","reverse","unique","toSet","toArray","is","sel","cache","querySelectorAll","concat","parents","contains","find","c","events","opt","objectOrProp","ev","h","wrapEvent","store","getStore","evStore","addEventListener","removeEventListener","clear","trigger","eventType","detail","bubbles","cancelable","CustomEvent","dispatchEvent","evcb","evt","delegate","all","once","started","that","evs","cbs","target","listeners","lts","parentElement","eq","handlers","stoppedPropagation","stoppedImmediatePropagation","cbev","click","addClass","keyCode","currentTarget","getAttribute","attr","tabindex","role","hover","handlerIn","handlerOut","k","v","removeAttr","selected","checked","multiple","text","scrollTop","scrollLeft","label","data","removeData","toggleClass","removeClass","force","isObject","className","classList","toggle","hasClass","nameArr","identifier","ind","first","prevAll","nextElementSibling","nextUntil","propElem","nextAll","prev","previousElementSibling","prevUntil","siblings","firstElementChild","$document","document","documentElement","originalEvent","isEqEvent","sip","stopImmediatePropagation","sp","stopPropagation","props","stopppedImmediatePropagation","defineProperties","NodeList","HTMLCollection","Element","selectors","$context","elems","doFilter","doSort","cElem","cont","collection","includeFirst","stopAt","each","wasSet","n","object","objArr","defaultValue","deleteStore","allowedGlobals","allowedPrototypes","regVarName","regKeyValName","isIterable","elementWrap","walkFindSubs","up","subs","parentNode","childNodes","EC","html","content","innerHTML","contentElem","detach","preprocessHTML","subsNested","unsubNested","processed","processHTML","appendChild","run","getScopes","textContent","createElement","$watch","subUnsubs","watch","ElementScope","$dispatch","getRootElement","RootScope","Component","components","defineComponent","comp","init","component","runs","getScope","root","getDataScope","newScope","datascope","calls","timer","toCall","err","watchRun","toWatch","watchGets","lastVal","update","now","count","digest","list","temp","sandboxCache","codes","directives","defineDirective","isContentEditable","isInput","change","$$value","Node","runDirective","directive","walkerInstance","execSteps","ready","template","walkTree","unsub","parentSubs","pushed","currentSubs","pushSubs","$element","comment","createComment","ifElem","at","before","nestedSubs","cloneNode","after","join","varsExp","varMatch","doubleMatch","del","forSubs","$index","SVGElement","style","$event","original","outerHTML","nodeType","walkText","nodes","endsWith","placeholder","createTextNode","quotes","endJs","closing","inJs","strs"],"mappings":"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"}