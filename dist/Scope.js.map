{"version":3,"file":"Scope.js","sources":["../node_modules/@nyariv/sandboxjs/dist/parser.js","../node_modules/@nyariv/sandboxjs/dist/executor.js","../node_modules/@nyariv/sandboxjs/dist/Sandbox.js","../src/HTMLSanitizer.ts","../src/eQuery.ts","../src/Scope.ts"],"sourcesContent":["let lispTypes = new Map();\nexport class ParseError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nexport class Lisp {\n    constructor(obj) {\n        this.op = obj.op;\n        this.a = obj.a;\n        this.b = obj.b;\n    }\n}\nexport class If {\n    constructor(t, f) {\n        this.t = t;\n        this.f = f;\n    }\n}\nexport class KeyVal {\n    constructor(key, val) {\n        this.key = key;\n        this.val = val;\n    }\n}\nexport class SpreadObject {\n    constructor(item) {\n        this.item = item;\n    }\n}\nexport class SpreadArray {\n    constructor(item) {\n        this.item = item;\n    }\n}\nlet expectTypes = {\n    op: {\n        types: { op: /^(\\/|\\*\\*(?!\\=)|\\*(?!\\=)|\\%(?!\\=))/ },\n        next: [\n            'command',\n            'value',\n            'prop',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    splitter: {\n        types: {\n            split: /^(&&|&|\\|\\||\\||<=|>=|<|>|!==|!=|===|==|instanceof(?![\\w$_])|in(?![\\w$_])|\\+(?!\\+)|\\-(?!\\-))(?!\\=)/,\n        },\n        next: [\n            'command',\n            'value',\n            'prop',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    inlineIf: {\n        types: {\n            inlineIf: /^\\?/,\n            else: /^:/,\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    assignment: {\n        types: {\n            assignModify: /^(\\-=|\\+=|\\/=|\\*\\*=|\\*=|%=|\\^=|\\&=|\\|=)/,\n            assign: /^(=)/\n        },\n        next: [\n            'command',\n            'value',\n            'prop',\n            'modifier',\n            'incrementerBefore',\n        ]\n    },\n    incrementerBefore: {\n        types: { incrementerBefore: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'prop',\n        ]\n    },\n    incrementerAfter: {\n        types: { incrementerAfter: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'splitter',\n            'op',\n            'expEnd'\n        ]\n    },\n    expEdge: {\n        types: {\n            call: /^[\\(]/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'inlineIf',\n            'dot',\n            'expEnd'\n        ]\n    },\n    modifier: {\n        types: {\n            not: /^!/,\n            inverse: /^~/,\n            negative: /^\\-(?!\\-)/,\n            positive: /^\\+(?!\\+)/,\n            typeof: /^typeof(?![\\w$_])/,\n            delete: /^delete(?![\\w$_])/,\n        },\n        next: [\n            'modifier',\n            'command',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    dot: {\n        types: {\n            arrayProp: /^[\\[]/,\n            dot: /^\\.(?!\\.)/\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'inlineIf',\n            'dot',\n            'expEnd'\n        ]\n    },\n    prop: {\n        types: {\n            prop: /^[a-zA-Z\\$_][a-zA-Z\\d\\$_]*/,\n        },\n        next: [\n            'splitter',\n            'incrementerAfter',\n            'assignment',\n            'op',\n            'expEdge',\n            'inlineIf',\n            'dot',\n            'expEnd'\n        ]\n    },\n    value: {\n        types: {\n            createObject: /^\\{/,\n            createArray: /^\\[/,\n            number: /^\\-?\\d+(\\.\\d+)?/,\n            string: /^\"(\\d+)\"/,\n            literal: /^`(\\d+)`/,\n            boolean: /^(true|false)(?![\\w$_])/,\n            null: /^null(?![\\w$_])/,\n            und: /^undefined(?![\\w$_])/,\n            arrowFunctionSingle: /^(async\\s+)?([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*=>\\s*({)?/,\n            arrowFunction: /^(async\\s*)?\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*=>\\s*({)?/,\n            inlineFunction: /^(async\\s+)?function(\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)?\\s*\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*{/,\n            group: /^\\(/,\n            NaN: /^NaN(?![\\w$_])/,\n            Infinity: /^Infinity(?![\\w$_])/,\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'inlineIf',\n            'dot',\n            'expEnd'\n        ]\n    },\n    command: {\n        types: {\n            void: /^void(?![\\w$_])\\s*/,\n            await: /^await(?![\\w$_])\\s*/,\n            new: /^new(?![\\w$_])\\s*/\n        },\n        next: [\n            'splitter',\n            'op',\n            'expEdge',\n            'inlineIf',\n            'dot',\n            'expEnd'\n        ]\n    },\n    initialize: {\n        types: {\n            initialize: /^(var|let|const)\\s+([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*(=)?/\n        },\n        next: [\n            'command',\n            'value',\n            'modifier',\n            'prop',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    },\n    spreadObject: {\n        types: {\n            spreadObject: /^\\.\\.\\./\n        },\n        next: [\n            'command',\n            'value',\n            'prop',\n        ]\n    },\n    spreadArray: {\n        types: {\n            spreadArray: /^\\.\\.\\./\n        },\n        next: [\n            'command',\n            'value',\n            'prop',\n        ]\n    },\n    expEnd: { types: {}, next: [] },\n    expStart: {\n        types: {\n            return: /^return(?![\\w$_])/,\n            for: /^for\\s*\\(/,\n            do: /^do\\s*\\{/,\n            while: /^while\\s*\\(/,\n            loopAction: /^(break|continue)(?![\\w$_])/,\n            if: /^if\\s*\\(/,\n            try: /^try\\s*{/,\n            // block: /^{/,\n            function: /^(async\\s+)?function(\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*{/,\n        },\n        next: [\n            'command',\n            'value',\n            'modifier',\n            'prop',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    }\n};\nlet closings = {\n    \"(\": \")\",\n    \"[\": \"]\",\n    \"{\": \"}\",\n    \"'\": \"'\",\n    '\"': '\"',\n    \"`\": \"`\"\n};\nlet closingsRegex = {\n    \"(\": /^\\)/,\n    \"[\": /^\\]/,\n    \"{\": /^\\}/,\n    \"'\": /^\\'/,\n    '\"': /^\\\"/,\n    \"`\": /^\\`/\n};\nconst okFirstChars = /^[\\+\\-~ !]/;\nconst restOfExp = (part, tests, quote, firstOpening) => {\n    let isStart = true;\n    tests = tests || [\n        expectTypes.op.types.op,\n        expectTypes.splitter.types.split,\n        expectTypes.inlineIf.types.inlineIf,\n        expectTypes.inlineIf.types.else\n    ];\n    let escape = false;\n    let done = false;\n    let i;\n    for (i = 0; i < part.length && !done; i++) {\n        let char = part[i];\n        if (quote === '\"' || quote === \"'\" || quote === \"`\") {\n            if (quote === \"`\" && char === \"$\" && part[i + 1] === \"{\" && !escape) {\n                let skip = restOfExp(part.substring(i + 2), [closingsRegex['{']]);\n                i += skip.length + 2;\n            }\n            else if (char === quote && !escape) {\n                return part.substring(0, i);\n            }\n            escape = char === \"\\\\\";\n        }\n        else if (closings[char]) {\n            if (char === firstOpening) {\n                done = true;\n                break;\n            }\n            else {\n                let skip = restOfExp(part.substring(i + 1), [closingsRegex[quote]], char);\n                i += skip.length + 1;\n                isStart = false;\n            }\n        }\n        else if (!quote) {\n            let sub = part.substring(i);\n            for (let test of tests) {\n                done = test.test(sub);\n                if (done)\n                    break;\n            }\n            if (isStart) {\n                if (okFirstChars.test(sub)) {\n                    done = false;\n                }\n                else {\n                    isStart = false;\n                }\n            }\n            if (done)\n                break;\n        }\n        else if (char === closings[quote]) {\n            return part.substring(0, i);\n        }\n    }\n    if (quote) {\n        throw new SyntaxError(\"Unclosed '\" + quote + \"': \" + quote + part.substring(0, Math.min(i, 40)));\n    }\n    return part.substring(0, i);\n};\nrestOfExp.next = [\n    'splitter',\n    'op',\n    'expEnd',\n    'inlineIf'\n];\nconst setLispType = (types, fn) => {\n    types.forEach((type) => {\n        lispTypes.set(type, fn);\n    });\n};\nconst closingsCreate = {\n    'createArray': /^\\]/,\n    'createObject': /^\\}/,\n    'group': /^\\)/,\n    'arrayProp': /^\\]/,\n    'call': /^\\)/\n};\nsetLispType(['createArray', 'createObject', 'group', 'arrayProp', 'call'], (strings, type, part, res, expect, ctx) => {\n    let extract = \"\";\n    let arg = [];\n    let end = false;\n    let i = 1;\n    while (i < part.length && !end) {\n        extract = restOfExp(part.substring(i), [\n            closingsCreate[type],\n            /^,/\n        ]);\n        i += extract.length;\n        if (extract) {\n            arg.push(extract);\n        }\n        if (part[i] !== ',') {\n            end = true;\n        }\n        else {\n            i++;\n        }\n    }\n    const next = ['command', 'value', 'prop', 'modifier', 'incrementerBefore'];\n    let l;\n    let funcFound;\n    switch (type) {\n        case 'group':\n        case 'arrayProp':\n            l = lispify(strings, arg.pop());\n            break;\n        case 'call':\n        case 'createArray':\n            l = arg.map((e) => lispify(strings, e, [...next, 'spreadArray']));\n            break;\n        case 'createObject':\n            l = arg.map((str) => {\n                str = str.trimStart();\n                let value;\n                let key;\n                funcFound = expectTypes.expStart.types.function.exec('function ' + str);\n                if (funcFound) {\n                    key = funcFound[2].trimStart();\n                    value = lispify(strings, 'function ' + str.replace(key, \"\"));\n                }\n                else {\n                    let extract = restOfExp(str, [/^:/]);\n                    key = lispify(strings, extract, [...next, 'spreadObject']);\n                    if (key instanceof Lisp && key.op === 'prop') {\n                        key = key.b;\n                    }\n                    if (extract.length === str.length)\n                        return key;\n                    value = lispify(strings, str.substring(extract.length + 1));\n                }\n                return new Lisp({\n                    op: 'keyVal',\n                    a: key,\n                    b: value\n                });\n            });\n            break;\n    }\n    type = type === 'arrayProp' ? 'prop' : type;\n    ctx.lispTree = lispify(strings, part.substring(i + 1), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: ctx.lispTree,\n        b: l,\n    }));\n});\nsetLispType(['inverse', 'not', 'negative', 'positive', 'typeof', 'delete', 'op'], (strings, type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length));\n    ctx.lispTree = lispify(strings, part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: ['positive', 'negative'].includes(type) ? '$' + res[0] : res[0],\n        a: ctx.lispTree,\n        b: lispify(strings, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerBefore'], (strings, type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(2));\n    ctx.lispTree = lispify(strings, part.substring(extract.length + 2), restOfExp.next, new Lisp({\n        op: res[0] + \"$\",\n        a: lispify(strings, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerAfter'], (strings, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(strings, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: \"$\" + res[0],\n        a: ctx.lispTree,\n    }));\n});\nsetLispType(['assign', 'assignModify'], (strings, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(strings, part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['split'], (strings, type, part, res, expect, ctx) => {\n    let extract = restOfExp(part.substring(res[0].length), [\n        expectTypes.splitter.types.split,\n        expectTypes.inlineIf.types.inlineIf,\n        expectTypes.inlineIf.types.else\n    ]);\n    ctx.lispTree = lispify(strings, part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(strings, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['inlineIf'], (strings, type, part, res, expect, ctx) => {\n    let found = false;\n    let extract = \"\";\n    let quoteCount = 1;\n    while (!found && extract.length < part.length) {\n        extract += restOfExp(part.substring(extract.length + 1), [\n            expectTypes.inlineIf.types.inlineIf,\n            expectTypes.inlineIf.types.else\n        ]);\n        if (part[extract.length + 1] === '?') {\n            quoteCount++;\n        }\n        else {\n            quoteCount--;\n        }\n        if (!quoteCount) {\n            found = true;\n        }\n        else {\n            extract += part[extract.length + 1];\n        }\n    }\n    ctx.lispTree = new Lisp({\n        op: '?',\n        a: ctx.lispTree,\n        b: new Lisp({\n            op: ':',\n            a: lispify(strings, extract),\n            b: lispify(strings, part.substring(res[0].length + extract.length + 1))\n        })\n    });\n});\nsetLispType(['if'], (strings, type, part, res, expect, ctx) => {\n    let condition = restOfExp(part.substring(res[0].length), [/^\\)/]);\n    let trueBlock = restOfExp(part.substring(res[0].length + condition.length + 1), [/^else(?!=\\w\\$)/]);\n    let elseBlock = \"\";\n    if (res[0].length + condition.length + 1 + trueBlock.length < part.length) {\n        elseBlock = part.substring(res[0].length + condition.length + trueBlock.length + 1 + 4);\n    }\n    condition = condition.trim();\n    trueBlock = trueBlock.trim();\n    elseBlock = elseBlock.trim();\n    if (trueBlock[0] === \"{\")\n        trueBlock = trueBlock.slice(1, -1);\n    if (elseBlock[0] === \"{\")\n        trueBlock = elseBlock.slice(1, -1);\n    ctx.lispTree = new Lisp({\n        op: 'if',\n        a: lispify(strings, condition),\n        b: new Lisp({\n            op: ':',\n            a: parse(trueBlock, strings.strings, strings.literals, true),\n            b: elseBlock ? parse(elseBlock, strings.strings, strings.literals, true) : undefined\n        })\n    });\n});\nsetLispType(['dot', 'prop'], (strings, type, part, res, expect, ctx) => {\n    let prop = res[0];\n    let index = res[0].length;\n    if (res[0] === '.') {\n        let matches = part.substring(res[0].length).match(expectTypes.prop.types.prop);\n        if (matches.length) {\n            prop = matches[0];\n            index = prop.length + res[0].length;\n        }\n        else {\n            throw new SyntaxError('Hanging  dot:' + part);\n        }\n    }\n    ctx.lispTree = lispify(strings, part.substring(index), expectTypes[expect].next, new Lisp({\n        op: 'prop',\n        a: ctx.lispTree,\n        b: prop\n    }));\n});\nsetLispType(['spreadArray', 'spreadObject', 'return'], (strings, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispify(strings, part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['number', 'boolean', 'null'], (strings, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(strings, part.substring(res[0].length), expectTypes[expect].next, JSON.parse(res[0]));\n});\nconst constants = {\n    NaN,\n    Infinity,\n};\nsetLispType(['und', 'NaN', 'Infinity'], (strings, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(strings, part.substring(res[0].length), expectTypes[expect].next, constants[type]);\n});\nsetLispType(['string', 'literal'], (strings, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(strings, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: type,\n        b: parseInt(JSON.parse(res[1]), 10),\n    }));\n});\nsetLispType(['initialize'], (strings, type, part, res, expect, ctx) => {\n    if (!res[3]) {\n        ctx.lispTree = lispify(strings, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n            op: res[1],\n            a: res[2]\n        }));\n    }\n    else {\n        ctx.lispTree = new Lisp({\n            op: res[1],\n            a: res[2],\n            b: lispify(strings, part.substring(res[0].length), expectTypes[expect].next)\n        });\n    }\n});\nsetLispType(['function', 'inlineFunction', 'arrowFunction', 'arrowFunctionSingle'], (strings, type, part, res, expect, ctx) => {\n    const isArrow = type !== 'function' && type !== 'inlineFunction';\n    const isReturn = isArrow && !res[res.length - 1];\n    const argPos = isArrow ? 2 : 3;\n    const isAsync = !!res[1];\n    const args = res[argPos] ? res[argPos].replace(/\\s+/g, \"\").split(/,/g) : [];\n    if (!isArrow) {\n        args.unshift((res[2] || \"\").trimStart());\n    }\n    let ended = false;\n    args.forEach((arg) => {\n        if (ended)\n            throw new SyntaxError('Rest parameter must be last formal parameter');\n        if (arg.startsWith('...'))\n            ended = true;\n    });\n    args.unshift(isAsync);\n    const func = (isReturn ? 'return ' : '') + restOfExp(part.substring(res[0].length), !isReturn ? [/^}/] : [/^[,;\\)\\}\\]]/]);\n    ctx.lispTree = lispify(strings, part.substring(res[0].length + func.length + 1), expectTypes[expect].next, new Lisp({\n        op: isArrow ? 'arrowFunc' : type,\n        a: args,\n        b: parse(func, strings.strings, strings.literals, true)\n    }));\n});\nconst iteratorRegex = /^((let|var|const)\\s+[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s+(in|of)\\s+/;\nsetLispType(['for', 'do', 'while'], (strings, type, part, res, expect, ctx) => {\n    let i = part.indexOf(\"(\") + 1;\n    let startStep = true;\n    let beforeStep = false;\n    let checkFirst = true;\n    let condition;\n    let step = true;\n    let body;\n    switch (type) {\n        case 'while':\n            let extract = restOfExp(part.substring(i), [/^\\)/]);\n            condition = lispify(strings, extract);\n            body = restOfExp(part.substring(i + extract.length + 1)).trim();\n            if (body[0] === \"{\")\n                body = body.slice(1, -1);\n            break;\n        case 'for':\n            let args = [];\n            let extract2 = \"\";\n            for (let k = 0; k < 3; k++) {\n                extract2 = restOfExp(part.substring(i), [/^[;\\)]/]);\n                args.push(extract2.trim());\n                i += extract2.length + 1;\n                if (part[i - 1] === \")\")\n                    break;\n            }\n            let iterator;\n            if (args.length === 1 && (iterator = iteratorRegex.exec(args[0]))) {\n                if (iterator[3] === 'of') {\n                    startStep = [\n                        lispify(strings, 'let $$obj = ' + args[0].substring(iterator[0].length), ['initialize']),\n                        lispify(strings, 'let $$iterator = $$obj[Symbol.iterator]()', ['initialize']),\n                        lispify(strings, 'let $$next = $$iterator.next()', ['initialize'])\n                    ];\n                    condition = lispify(strings, 'return !$$next.done', ['expStart']);\n                    step = lispify(strings, '$$next = $$iterator.next()');\n                    beforeStep = lispify(strings, iterator[1] + ' = $$next.value', ['initialize']);\n                }\n                else {\n                    startStep = [\n                        lispify(strings, 'let $$obj = ' + args[0].substring(iterator[0].length), ['initialize']),\n                        lispify(strings, 'let $$keys = Object.keys($$obj)', ['initialize']),\n                        lispify(strings, 'let $$keyIndex = 0', ['initialize'])\n                    ];\n                    step = lispify(strings, '$$keyIndex++');\n                    condition = lispify(strings, 'return $$keyIndex < $$keys.length', ['expStart']);\n                    beforeStep = lispify(strings, iterator[1] + ' = $$keys[$$keyIndex]', ['initialize']);\n                }\n            }\n            else if (args.length === 3) {\n                startStep = lispify(strings, args.shift(), ['initialize'].concat(expectTypes.initialize.next));\n                condition = lispify(strings, 'return ' + args.shift(), ['expStart']);\n                step = lispify(strings, args.shift());\n            }\n            else {\n                throw new SyntaxError(\"Invalid for loop definition\");\n            }\n            body = restOfExp(part.substring(i)).trim();\n            if (body[0] === \"{\")\n                body = body.slice(1, -1);\n            break;\n        case 'do':\n            checkFirst = false;\n            const start = part.indexOf(\"{\") + 1;\n            let extract3 = restOfExp(part.substring(start), [/^}/]);\n            body = extract3;\n            condition = lispify(strings, restOfExp(part.substring(part.indexOf(\"(\", start + extract3.length) + 1), [/^\\)/]));\n            break;\n    }\n    ctx.lispTree = new Lisp({\n        op: 'loop',\n        a: [checkFirst, startStep, step, condition, beforeStep],\n        b: parse(body, strings.strings, strings.literals, true)\n    });\n    setLispType(['block'], (strings, type, part, res, expect, ctx) => {\n        ctx.lispTree = parse(restOfExp(part.substring(1), [/^}/]), strings.strings, strings.literals, true);\n    });\n    setLispType(['loopAction'], (strings, type, part, res, expect, ctx) => {\n        ctx.lispTree = new Lisp({\n            op: 'loopAction',\n            a: res[1],\n        });\n    });\n    const catchReg = /^\\s*catch\\s*(\\(\\s*([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*\\))?\\s*\\{/;\n    setLispType(['try'], (strings, type, part, res, expect, ctx) => {\n        const body = restOfExp(part.substring(res[0].length), [/^}/]);\n        const catchRes = catchReg.exec(part.substring(res[0].length + body.length + 1));\n        const exception = catchRes[2];\n        const catchBody = restOfExp(part.substring(res[0].length + body.length + 1 + catchRes[0].length), [/^}/]);\n        ctx.lispTree = new Lisp({\n            op: 'try',\n            a: parse(body, strings.strings, strings.literals, true),\n            b: [\n                exception,\n                parse(catchBody, strings.strings, strings.literals, true),\n            ]\n        });\n    });\n    setLispType(['void', 'await'], (strings, type, part, res, expect, ctx) => {\n        const extract = restOfExp(part.substring(res[0].length), [/^ /]);\n        ctx.lispTree = lispify(strings, part.substring(res[0].length + extract.length), expectTypes[expect].next, new Lisp({\n            op: type,\n            a: lispify(strings, extract),\n        }));\n    });\n    setLispType(['new'], (strings, type, part, res, expect, ctx) => {\n        let i = res[0].length;\n        const obj = restOfExp(part.substring(i), [], undefined, \"(\");\n        i += obj.length + 1;\n        const args = [];\n        if (part[i - 1] === \"(\") {\n            const argsString = restOfExp(part.substring(i), [/^\\)/]);\n            i += argsString.length + 1;\n            let found;\n            let j = 0;\n            while (found = restOfExp(argsString.substring(j), [/^,/])) {\n                j += found[0].length + 1;\n                args.push(found[0].trim());\n            }\n        }\n        ctx.lispTree = lispify(strings, part.substring(i), expectTypes.expEdge.next, new Lisp({\n            op: type,\n            a: lispify(strings, obj, expectTypes.initialize.next),\n            b: args.map((arg) => lispify(strings, arg, expectTypes.initialize.next)),\n        }));\n    });\n});\nconst startingExecpted = ['initialize', 'expStart', 'command', 'value', 'prop', 'modifier', 'incrementerBefore', 'expEnd'];\nlet lastType;\nfunction lispify(strings, part, expected, lispTree) {\n    expected = expected || expectTypes.initialize.next;\n    if (part === undefined)\n        return lispTree;\n    if (!part.length && !expected.includes('expEnd')) {\n        throw new SyntaxError(\"Unexpected end of expression\");\n    }\n    part = part.trimStart();\n    let ctx = { lispTree: lispTree };\n    let res;\n    for (let expect of expected) {\n        if (expect === 'expEnd') {\n            continue;\n        }\n        for (let type in expectTypes[expect].types) {\n            if (type === 'expEnd') {\n                continue;\n            }\n            if (res = expectTypes[expect].types[type].exec(part)) {\n                lastType = type;\n                lispTypes.get(type)(strings, type, part, res, expect, ctx);\n                break;\n            }\n        }\n        if (res)\n            break;\n    }\n    if (!res && part.length) {\n        throw SyntaxError(`Unexpected token (${lastType}): ${part}`);\n    }\n    return ctx.lispTree;\n}\nexport function parse(code, strings = [], literals = [], skipStrings = false) {\n    if (typeof code !== 'string')\n        throw new ParseError(`Cannot parse ${code}`, code);\n    // console.log('parse', str);\n    let str = code;\n    let quote;\n    let extract = \"\";\n    let escape = false;\n    let js = [];\n    let currJs = [];\n    if (!skipStrings) {\n        let extractSkip = 0;\n        for (let i = 0; i < str.length; i++) {\n            let char = str[i];\n            if (escape) {\n                if (char === \"$\" && quote === '`') {\n                    extractSkip--;\n                    char = '$$';\n                }\n                else if (char === 'u') {\n                    let reg = /^[a-fA-F\\d]{2,4}/.exec(str.substring(i + 1));\n                    let num;\n                    if (!reg) {\n                        num = Array.from(/^{[a-fA-F\\d]+}/.exec(str.substring(i + 1)) || [\"\"]);\n                    }\n                    else {\n                        num = Array.from(reg);\n                    }\n                    char = JSON.parse(`\"\\\\u${num[0]}\"`);\n                    str = str.substring(0, i - 1) + char + str.substring(i + (1 + num[0].length));\n                    i -= 1;\n                }\n                else if (char != '`') {\n                    char = JSON.parse(`\"\\\\${char}\"`);\n                }\n            }\n            else if (char === '$' && quote === '`' && str[i + 1] !== '{') {\n                extractSkip--;\n                char = '$$';\n            }\n            if (quote === \"`\" && char === \"$\" && str[i + 1] === \"{\") {\n                let skip = restOfExp(str.substring(i + 2), [/^}/]);\n                currJs.push(skip);\n                extractSkip += skip.length + 3;\n                extract += `\\${${currJs.length - 1}}`;\n                i += skip.length + 2;\n            }\n            else if (!quote && (char === \"'\" || char === '\"' || char === '`') && !escape) {\n                currJs = [];\n                extractSkip = 0;\n                quote = char;\n            }\n            else if (quote === char && !escape) {\n                let len;\n                if (quote === '`') {\n                    literals.push({\n                        op: 'literal',\n                        a: extract,\n                        b: currJs\n                    });\n                    js.push(currJs);\n                    str = str.substring(0, i - extractSkip - 1) + `\\`${literals.length - 1}\\`` + str.substring(i + 1);\n                    len = (literals.length - 1).toString().length;\n                }\n                else {\n                    strings.push(extract);\n                    str = str.substring(0, i - extract.length - 1) + `\"${strings.length - 1}\"` + str.substring(i + 1);\n                    len = (strings.length - 1).toString().length;\n                }\n                quote = null;\n                i -= extract.length - len;\n                extract = \"\";\n            }\n            else if (quote && !(!escape && char === \"\\\\\")) {\n                extractSkip += escape ? 1 + char.length : char.length;\n                extract += char;\n            }\n            escape = quote && !escape && char === \"\\\\\";\n        }\n        js.forEach((j) => {\n            const a = j.map((skip) => parse(skip, strings, literals).tree[0]);\n            j.length = 0;\n            j.push(...a);\n        });\n    }\n    let parts = [];\n    let part;\n    let pos = 0;\n    while ((part = restOfExp(str.substring(pos), [/^;/]))) {\n        parts.push(part);\n        pos += part.length + 1;\n    }\n    parts = parts.filter(Boolean);\n    const tree = parts.map((str) => {\n        let subExpressions = [];\n        let sub;\n        let pos = 0;\n        while ((sub = restOfExp(str.substring(pos), [/^,/]))) {\n            subExpressions.push(sub.trimStart());\n            pos += sub.length + 1;\n        }\n        try {\n            if (subExpressions.length === 1) {\n                return [lispify({ strings, literals }, str, startingExecpted)];\n            }\n            const defined = expectTypes.initialize.types.initialize.exec(subExpressions[0]);\n            if (defined) {\n                return subExpressions.map((str, i) => lispify({ strings, literals }, i ? defined[1] + ' ' + str : str, ['initialize']));\n            }\n            else {\n                const exprs = subExpressions.map((str, i) => lispify({ strings, literals }, str, i ? expectTypes.initialize.next : startingExecpted));\n                if (exprs.length > 1 && exprs[0] instanceof Lisp) {\n                    if (exprs[0].op === 'return') {\n                        const last = exprs.pop();\n                        return [exprs.shift().b, ...exprs, new Lisp({\n                                op: 'return',\n                                b: last\n                            })];\n                    }\n                }\n                return exprs;\n            }\n        }\n        catch (e) {\n            // throw e;\n            throw new ParseError(e.message + \": \" + str, str);\n        }\n    });\n    return { tree: tree.flat(), strings, literals };\n}\n","import { SpreadArray, KeyVal, SpreadObject, If, Lisp, parse } from \"./parser.js\";\nexport class ExecReturn {\n    constructor(auditReport, result, returned, breakLoop = false, continueLoop = false) {\n        this.auditReport = auditReport;\n        this.result = result;\n        this.returned = returned;\n        this.breakLoop = breakLoop;\n        this.continueLoop = continueLoop;\n    }\n}\nexport class Prop {\n    constructor(context, prop, isConst = false, isGlobal = false, isVariable = false) {\n        this.context = context;\n        this.prop = prop;\n        this.isConst = isConst;\n        this.isGlobal = isGlobal;\n        this.isVariable = isVariable;\n    }\n}\nconst reservedWords = new Set([\n    'instanceof',\n    'typeof',\n    'return',\n    'try',\n    'catch',\n    'if',\n    'else',\n    'in',\n    'of',\n    'var',\n    'let',\n    'const',\n    'for',\n    'delete',\n    'false',\n    'true',\n    'while',\n    'do',\n    'break',\n    'continue',\n    'new',\n    'function',\n    'async',\n    'await'\n]);\nvar VarType;\n(function (VarType) {\n    VarType[\"let\"] = \"let\";\n    VarType[\"const\"] = \"const\";\n    VarType[\"var\"] = \"var\";\n})(VarType || (VarType = {}));\nexport class Scope {\n    constructor(parent, vars = {}, functionThis) {\n        this.const = new Set();\n        this.let = new Set();\n        const isFuncScope = functionThis !== undefined || parent === null;\n        this.parent = parent;\n        this.allVars = vars;\n        this.let = isFuncScope ? this.let : new Set(Object.keys(vars));\n        this.var = isFuncScope ? new Set(Object.keys(vars)) : this.var;\n        this.globals = parent === null ? new Set(Object.keys(vars)) : new Set();\n        this.functionThis = functionThis;\n        if (isFuncScope && this.allVars['this'] === undefined) {\n            this.var.add('this');\n            this.allVars['this'] = functionThis;\n        }\n    }\n    get(key, functionScope = false) {\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        if (this.parent === null || !functionScope || this.functionThis !== undefined) {\n            if (this.globals.has(key)) {\n                return new Prop(this.functionThis, key, false, true, true);\n            }\n            if (key in this.allVars && (!(key in {}) || this.allVars.hasOwnProperty(key))) {\n                return new Prop(this.allVars, key, this.const.has(key), this.globals.has(key), true);\n            }\n            if (this.parent === null) {\n                return new Prop(undefined, key);\n            }\n        }\n        return this.parent.get(key, functionScope);\n    }\n    set(key, val) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be assigned');\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        let prop = this.get(key);\n        if (prop.context === undefined) {\n            throw new ReferenceError(`Variable '${key}' was not declared.`);\n        }\n        ``;\n        if (prop.isConst) {\n            throw new TypeError(`Cannot assign to const variable '${key}'`);\n        }\n        if (prop.isGlobal) {\n            throw new SandboxError(`Cannot override global variable '${key}'`);\n        }\n        prop.context[prop] = val;\n        return prop;\n    }\n    declare(key, type = null, value = undefined, isGlobal = false) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be declared');\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        if (type === 'var' && this.functionThis === undefined && this.parent !== null) {\n            return this.parent.declare(key, type, value, isGlobal);\n        }\n        else if ((this[type].has(key) && type !== 'const' && !this.globals.has(key)) || !(key in this.allVars)) {\n            if (isGlobal) {\n                this.globals.add(key);\n            }\n            this[type].add(key);\n            this.allVars[key] = value;\n        }\n        else {\n            throw new SandboxError(`Identifier '${key}' has already been declared`);\n        }\n        return new Prop(this.allVars, key, this.const.has(key), isGlobal);\n    }\n}\nexport class SandboxError extends Error {\n}\nexport function sandboxFunction(context) {\n    return SandboxFunction;\n    function SandboxFunction(...params) {\n        let code = params.pop() || \"\";\n        let parsed = parse(code);\n        return createFunction(params, parsed, context, undefined, 'anonymous');\n    }\n}\nconst sandboxedFunctions = new WeakSet();\nexport function createFunction(argNames, parsed, context, scope, name) {\n    let func = function sandboxedObject(...args) {\n        const vars = {};\n        argNames.forEach((arg, i) => {\n            if (arg.startsWith('...')) {\n                vars[arg.substring(3)] = args.slice(i);\n            }\n            else {\n                vars[arg] = args[i];\n            }\n        });\n        const res = executeTree(context, parsed, scope === undefined ? [] : [new Scope(scope, vars, name === undefined ? undefined : this)]);\n        return res.result;\n    };\n    sandboxedFunctions.add(func);\n    return func;\n}\nexport function createFunctionAsync(argNames, parsed, context, scope, name) {\n    let func = async function (...args) {\n        const vars = {};\n        argNames.forEach((arg, i) => {\n            if (arg.startsWith('...')) {\n                vars[arg.substring(3)] = args.slice(i);\n            }\n            else {\n                vars[arg] = args[i];\n            }\n        });\n        const res = await executeTreeAsync(context, parsed, scope === undefined ? [] : [new Scope(scope, vars, name === undefined ? undefined : this)]);\n        return res.result;\n    };\n    if (name !== undefined) {\n        Object.defineProperty(func, 'name', { value: name, writable: false });\n    }\n    sandboxedFunctions.add(func);\n    return func;\n}\nexport function sandboxedEval(func) {\n    return sandboxEval;\n    function sandboxEval(code) {\n        return func(code)();\n    }\n}\nexport function sandboxedSetTimeout(func) {\n    return function sandboxSetTimeout(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setTimeout(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nexport function sandboxedSetInterval(func) {\n    return function sandboxSetInterval(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setInterval(handler, ...args);\n        return setTimeout(func(handler), args[0]);\n    };\n}\nfunction assignCheck(obj, context, op = 'assign') {\n    var _a, _b, _c, _d;\n    if (obj.context === undefined) {\n        throw new ReferenceError(`Cannot ${op} value to undefined.`);\n    }\n    if (typeof obj.context !== 'object' && typeof obj.context !== 'function') {\n        throw new SyntaxError(`Cannot ${op} value to a primitive.`);\n    }\n    if (obj.isConst) {\n        throw new TypeError(`Cannot set value to const variable '${obj.prop}'`);\n    }\n    if (obj.isGlobal) {\n        throw new SandboxError(`Cannot ${op} property '${obj.prop}' of a global object`);\n    }\n    if (typeof obj.context[obj.prop] === 'function' && !obj.context.hasOwnProperty(obj.prop)) {\n        throw new SandboxError(`Override prototype property '${obj.prop}' not allowed`);\n    }\n    if (op === \"delete\") {\n        if (obj.context.hasOwnProperty(obj.prop)) {\n            (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb({ type: \"delete\", prop: obj.prop }));\n        }\n    }\n    else if (obj.context.hasOwnProperty(obj.prop)) {\n        (_c = (_b = context.setSubscriptions.get(obj.context)) === null || _b === void 0 ? void 0 : _b.get(obj.prop)) === null || _c === void 0 ? void 0 : _c.forEach((cb) => cb({\n            type: \"replace\"\n        }));\n    }\n    else {\n        (_d = context.changeSubscriptions.get(obj.context)) === null || _d === void 0 ? void 0 : _d.forEach((cb) => cb({ type: \"create\", prop: obj.prop }));\n    }\n}\nconst arrayChange = new Set([\n    [].push,\n    [].pop,\n    [].shift,\n    [].unshift,\n    [].splice,\n    [].reverse,\n    [].sort,\n    [].copyWithin\n]);\nconst literalRegex = /(\\$\\$)*(\\$)?\\${(\\d+)}/g;\nlet ops2 = {\n    'prop': (exec, done, a, b, obj, context, scope) => {\n        if (a === null) {\n            throw new TypeError(`Cannot get property ${b} of null`);\n        }\n        const type = typeof a;\n        if (type === 'undefined' && obj === undefined) {\n            let prop = scope.get(b);\n            if (prop.context === undefined)\n                throw new ReferenceError(`${b} is not defined`);\n            if (prop.context === context.sandboxGlobal) {\n                if (context.options.audit) {\n                    context.auditReport.globalsAccess.add(b);\n                }\n                const rep = context.evals.get(context.sandboxGlobal[b]);\n                if (rep) {\n                    done(undefined, rep);\n                    return;\n                }\n            }\n            if (prop.context && prop.context[b] === globalThis) {\n                done(undefined, context.globalScope.get('this'));\n                return;\n            }\n            context.getSubscriptions.forEach((cb) => cb(prop.context, prop.prop));\n            done(undefined, prop);\n            return;\n        }\n        else if (a === undefined) {\n            throw new SandboxError(\"Cannot get property '\" + b + \"' of undefined\");\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                a = new Number(a);\n            }\n            else if (type === 'string') {\n                a = new String(a);\n            }\n            else if (type === 'boolean') {\n                a = new Boolean(a);\n            }\n        }\n        else if (typeof a.hasOwnProperty === 'undefined') {\n            done(undefined, new Prop(undefined, b));\n            return;\n        }\n        const isFunction = type === 'function';\n        let prototypeAccess = isFunction || !(a.hasOwnProperty(b) || typeof b === 'number');\n        if (context.options.audit && prototypeAccess) {\n            if (typeof b === 'string') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        if (!context.auditReport.prototypeAccess[prot.constructor.name]) {\n                            context.auditReport.prototypeAccess[prot.constructor.name] = new Set();\n                        }\n                        context.auditReport.prototypeAccess[prot.constructor.name].add(b);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        if (prototypeAccess) {\n            if (isFunction) {\n                if (!['name', 'length', 'constructor'].includes(b) && a.hasOwnProperty(b)) {\n                    const whitelist = context.prototypeWhitelist.get(a);\n                    const replace = context.prototypeReplacements.get(a);\n                    if (replace) {\n                        done(undefined, new Prop(replace(a, true), b));\n                        return;\n                    }\n                    if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                    }\n                    else {\n                        throw new SandboxError(`Static method or property access not permitted: ${a.name}.${b}`);\n                    }\n                }\n            }\n            else if (b !== 'constructor') {\n                let prot = a.constructor.prototype;\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        const whitelist = context.prototypeWhitelist.get(prot.constructor);\n                        const replace = context.prototypeReplacements.get(prot.constuctor);\n                        if (replace) {\n                            done(undefined, new Prop(replace(a, false), b));\n                            return;\n                        }\n                        if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                            break;\n                        }\n                        throw new SandboxError(`Method or property access not permitted: ${prot.constructor.name}.${b}`);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        const rep = context.evals.get(a[b]);\n        if (rep) {\n            done(undefined, rep);\n            return;\n        }\n        if (a[b] === globalThis) {\n            done(undefined, context.globalScope.get('this'));\n            return;\n        }\n        let g = obj.isGlobal || (isFunction && !sandboxedFunctions.has(a)) || context.globalsWhitelist.has(a);\n        if (!g) {\n            context.getSubscriptions.forEach((cb) => cb(a, b));\n        }\n        done(undefined, new Prop(a, b, false, g));\n    },\n    'call': (exec, done, a, b, obj, context, scope) => {\n        if (context.options.forbidMethodCalls)\n            throw new SandboxError(\"Method calls are not allowed\");\n        if (typeof a !== 'function') {\n            throw new TypeError(`${obj.prop} is not a function`);\n        }\n        const args = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        execMany(exec, args, (err, vals) => {\n            var _a;\n            if (err) {\n                done(err);\n                return;\n            }\n            if (typeof obj === 'function') {\n                done(undefined, obj(...vals));\n                return;\n            }\n            if (obj.context[obj.prop] === JSON.stringify && context.getSubscriptions.size) {\n                const cache = new Set();\n                const recurse = (x) => {\n                    if (!x || !(typeof x === 'object') || cache.has(x))\n                        return;\n                    cache.add(x);\n                    for (let y in x) {\n                        context.getSubscriptions.forEach((cb) => cb(x, y));\n                        recurse(x[y]);\n                    }\n                };\n                recurse(vals[0]);\n            }\n            if (obj.context instanceof Array && arrayChange.has(obj.context[obj.prop]) && context.changeSubscriptions.get(obj.context)) {\n                let change;\n                let changed = false;\n                if (obj.prop === \"push\") {\n                    change = {\n                        type: \"push\",\n                        added: vals\n                    };\n                    changed = !!vals.length;\n                }\n                else if (obj.prop === \"pop\") {\n                    change = {\n                        type: \"pop\",\n                        removed: obj.context.slice(-1)\n                    };\n                    changed = !!change.removed.length;\n                }\n                else if (obj.prop === \"shift\") {\n                    change = {\n                        type: \"shift\",\n                        removed: obj.context.slice(0, 1)\n                    };\n                    changed = !!change.removed.length;\n                }\n                else if (obj.prop === \"unshift\") {\n                    change = {\n                        type: \"unshift\",\n                        added: vals\n                    };\n                    changed = !!vals.length;\n                }\n                else if (obj.prop === \"splice\") {\n                    change = {\n                        type: \"splice\",\n                        startIndex: vals[0],\n                        deleteCount: vals[1] === undefined ? obj.context.length : vals[1],\n                        added: vals.slice(2),\n                        removed: obj.context.slice(vals[0], vals[1] === undefined ? undefined : vals[0] + vals[1])\n                    };\n                    changed = !!change.added.length || !!change.removed.length;\n                }\n                else if (obj.prop === \"reverse\" || obj.prop === \"sort\") {\n                    change = { type: obj.prop };\n                    changed = !!obj.context.length;\n                }\n                else if (obj.prop === \"copyWithin\") {\n                    let len = vals[2] === undefined ? obj.context.length - vals[1] : Math.min(obj.context.length, vals[2] - vals[1]);\n                    change = {\n                        type: \"copyWithin\",\n                        startIndex: vals[0],\n                        endIndex: vals[0] + len,\n                        added: obj.context.slice(vals[1], vals[1] + len),\n                        removed: obj.context.slice(vals[0], vals[0] + len)\n                    };\n                    changed = !!change.added.length || !!change.removed.length;\n                }\n                if (changed) {\n                    (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb(change));\n                }\n            }\n            done(undefined, obj.context[obj.prop](...vals));\n        }, scope, context);\n    },\n    'createObject': (exec, done, a, b, obj, context, scope) => {\n        let res = {};\n        for (let item of b) {\n            if (item instanceof SpreadObject) {\n                res = { ...res, ...item.item };\n            }\n            else {\n                res[item.key] = item.val;\n            }\n        }\n        done(undefined, res);\n    },\n    'keyVal': (exec, done, a, b) => done(undefined, new KeyVal(a, b)),\n    'createArray': (exec, done, a, b, obj, context, scope) => {\n        const items = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        execMany(exec, items, done, scope, context);\n    },\n    'group': (exec, done, a, b) => done(undefined, b),\n    'string': (exec, done, a, b, obj, context) => done(undefined, context.strings[b]),\n    'literal': (exec, done, a, b, obj, context, scope) => {\n        let name = context.literals[b].a;\n        let found = [];\n        let f;\n        let resnums = [];\n        while (f = literalRegex.exec(name)) {\n            if (!f[2]) {\n                found.push(context.literals[b].b[parseInt(f[3], 10)]);\n                resnums.push(f[3]);\n            }\n        }\n        execMany(exec, found, (err, processed) => {\n            const reses = {};\n            if (err) {\n                done(err);\n                return;\n            }\n            for (let i in resnums) {\n                const num = resnums[i];\n                reses[num] = processed[i];\n            }\n            done(undefined, name.replace(/(\\$\\$)*(\\$)?\\${(\\d+)}/g, (match, $$, $, num) => {\n                if ($)\n                    return match;\n                let res = reses[num];\n                res = res instanceof Prop ? res.context[res.prop] : res;\n                return ($$ ? $$ : '') + `${res}`.replace(/\\$/g, '$$');\n            }).replace(/\\$\\$/g, '$'));\n        }, scope, context);\n    },\n    'spreadArray': (exec, done, a, b, obj, context, scope) => {\n        exec(b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, new SpreadArray(res));\n        });\n    },\n    'spreadObject': (exec, done, a, b, obj, context, scope) => {\n        exec(b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, new SpreadObject(res));\n        });\n    },\n    '!': (exec, done, a, b) => done(undefined, !b),\n    '~': (exec, done, a, b) => done(undefined, ~b),\n    '++$': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, ++obj.context[obj.prop]);\n    },\n    '$++': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop]++);\n    },\n    '--$': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, --obj.context[obj.prop]);\n    },\n    '$--': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop]--);\n    },\n    '=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        obj.context[obj.prop] = b;\n        done(undefined, new Prop(obj.context, obj.prop, false, obj.isGlobal));\n    },\n    '+=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] += b);\n    },\n    '-=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] -= b);\n    },\n    '/=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] /= b);\n    },\n    '*=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] *= b);\n    },\n    '**=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] **= b);\n    },\n    '%=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] %= b);\n    },\n    '^=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] ^= b);\n    },\n    '&=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] &= b);\n    },\n    '|=': (exec, done, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] |= b);\n    },\n    '?': (exec, done, a, b) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        done(undefined, a ? b.t : b.f);\n    },\n    '>': (exec, done, a, b) => done(undefined, a > b),\n    '<': (exec, done, a, b) => done(undefined, a < b),\n    '>=': (exec, done, a, b) => done(undefined, a >= b),\n    '<=': (exec, done, a, b) => done(undefined, a <= b),\n    '==': (exec, done, a, b) => done(undefined, a == b),\n    '===': (exec, done, a, b) => done(undefined, a === b),\n    '!=': (exec, done, a, b) => done(undefined, a != b),\n    '!==': (exec, done, a, b) => done(undefined, a !== b),\n    '&&': (exec, done, a, b) => done(undefined, a && b),\n    '||': (exec, done, a, b) => done(undefined, a || b),\n    '&': (exec, done, a, b) => done(undefined, a & b),\n    '|': (exec, done, a, b) => done(undefined, a | b),\n    ':': (exec, done, a, b) => done(undefined, new If(a, b)),\n    '+': (exec, done, a, b) => done(undefined, a + b),\n    '-': (exec, done, a, b) => done(undefined, a - b),\n    '$+': (exec, done, a, b) => done(undefined, +b),\n    '$-': (exec, done, a, b) => done(undefined, -b),\n    '/': (exec, done, a, b) => done(undefined, a / b),\n    '*': (exec, done, a, b) => done(undefined, a * b),\n    '%': (exec, done, a, b) => done(undefined, a % b),\n    'typeof': (exec, done, a, b) => done(undefined, typeof b),\n    'instanceof': (exec, done, a, b) => done(undefined, a instanceof b),\n    'in': (exec, done, a, b) => done(undefined, a in b),\n    'delete': (exec, done, a, b, obj, context, scope, bobj) => {\n        if (bobj.context === undefined) {\n            done(undefined, true);\n            return;\n        }\n        assignCheck(bobj, context, 'delete');\n        if (bobj.isVariable) {\n            done(undefined, false);\n            return;\n        }\n        done(undefined, delete bobj.context[bobj.prop]);\n    },\n    'return': (exec, done, a, b, obj, context) => done(undefined, b),\n    'var': (exec, done, a, b, obj, context, scope, bobj) => {\n        exec(b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.var, res));\n        });\n    },\n    'let': (exec, done, a, b, obj, context, scope, bobj) => {\n        exec(b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.let, res, bobj && bobj.isGlobal));\n        });\n    },\n    'const': (exec, done, a, b, obj, context, scope, bobj) => {\n        exec(b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.const, res));\n        });\n    },\n    'arrowFunc': (exec, done, a, b, obj, context, scope) => {\n        if (a.shift()) {\n            done(undefined, createFunctionAsync(a, b, context, scope));\n        }\n        else {\n            done(undefined, createFunction(a, b, context, scope));\n        }\n    },\n    'function': (exec, done, a, b, obj, context, scope) => {\n        let isAsync = a.shift();\n        let name = a.shift();\n        let func;\n        if (isAsync) {\n            func = createFunctionAsync(a, b, context, scope, name);\n        }\n        else {\n            func = createFunction(a, b, context, scope, name);\n        }\n        if (name) {\n            scope.declare(name, VarType.var, func);\n        }\n        done(undefined, func);\n    },\n    'inlineFunction': (exec, done, a, b, obj, context, scope) => {\n        let isAsync = a.shift();\n        let name = a.shift();\n        if (name) {\n            scope = new Scope(scope, {});\n        }\n        let func;\n        if (isAsync) {\n            func = createFunctionAsync(a, b, context, scope, name);\n        }\n        else {\n            func = createFunction(a, b, context, scope, name);\n        }\n        if (name) {\n            scope.declare(name, VarType.let, func);\n        }\n        done(undefined, func);\n    },\n    'loop': (exec, done, a, b, obj, context, scope) => {\n        const [checkFirst, startStep, step, condition, beforeStep] = a;\n        let loop = true;\n        const outScope = new Scope(scope, {});\n        if (exec === execAsync) {\n            (async () => {\n                await asyncDone((d) => exec(startStep, outScope, context, d));\n                if (checkFirst)\n                    loop = (await asyncDone((d) => exec(condition, outScope, context, d))).result;\n                while (loop) {\n                    await asyncDone((d) => exec(beforeStep, outScope, context, d));\n                    let res = await executeTreeAsync(context, b, [new Scope(outScope, {})], true);\n                    if (res instanceof ExecReturn && res.returned) {\n                        done(undefined, res);\n                        return;\n                    }\n                    if (res instanceof ExecReturn && res.breakLoop) {\n                        break;\n                    }\n                    await asyncDone((d) => exec(step, outScope, context, d));\n                    loop = (await asyncDone((d) => exec(condition, outScope, context, d))).result;\n                }\n                done();\n            })();\n        }\n        else {\n            syncDone((d) => exec(startStep, outScope, context, d));\n            if (checkFirst)\n                loop = (syncDone((d) => exec(condition, outScope, context, d))).result;\n            while (loop) {\n                syncDone((d) => exec(beforeStep, outScope, context, d));\n                let res = executeTree(context, b, [new Scope(outScope, {})], true);\n                if (res instanceof ExecReturn && res.returned) {\n                    done(undefined, res);\n                    return;\n                }\n                if (res instanceof ExecReturn && res.breakLoop) {\n                    break;\n                }\n                syncDone((d) => exec(step, outScope, context, d));\n                loop = (syncDone((d) => exec(condition, outScope, context, d))).result;\n            }\n            done();\n        }\n    },\n    'loopAction': (exec, done, a, b, obj, context, scope) => {\n        if (!context.inLoop)\n            throw new SandboxError(\"Illegal \" + a + \" statement\");\n        done(undefined, new ExecReturn(context.auditReport, undefined, false, a === \"break\", a === \"continue\"));\n    },\n    'if': (exec, done, a, b, obj, context, scope) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        exec(a, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            if (exec === execAsync) {\n                (async () => {\n                    if (res) {\n                        done(undefined, await executeTreeAsync(context, b.t, [new Scope(scope)]));\n                    }\n                    else {\n                        done(undefined, b.f ? await executeTreeAsync(context, b.f, [new Scope(scope)]) : undefined);\n                    }\n                })();\n            }\n            else {\n                if (res) {\n                    done(undefined, executeTree(context, b.t, [new Scope(scope)]));\n                }\n                else {\n                    done(undefined, b.f ? executeTree(context, b.f, [new Scope(scope)]) : undefined);\n                }\n            }\n        });\n    },\n    'try': (exec, done, a, b, obj, context, scope) => {\n        const [exception, catchBody] = b;\n        if (exec === execAsync) {\n            (async () => {\n                try {\n                    done(undefined, await executeTreeAsync(context, a, [new Scope(scope)], context.inLoop));\n                }\n                catch (e) {\n                    let sc = {};\n                    if (exception)\n                        sc[exception] = e;\n                    done(undefined, await executeTreeAsync(context, catchBody, [new Scope(scope, sc)], context.inLoop));\n                }\n            })();\n        }\n        else {\n            try {\n                done(undefined, executeTree(context, a, [new Scope(scope)], context.inLoop));\n            }\n            catch (e) {\n                let sc = {};\n                if (exception)\n                    sc[exception] = e;\n                done(undefined, executeTree(context, catchBody, [new Scope(scope, sc)], context.inLoop));\n            }\n        }\n    },\n    'void': (exec, done, a) => { done(); },\n    'new': (exec, done, a, b) => {\n        done(undefined, new a(...b));\n    }\n};\nlet ops = new Map();\nfor (let op in ops2) {\n    ops.set(op, ops2[op]);\n}\nfunction execMany(exec, tree, done, scope, context) {\n    let ret = [];\n    let i = 0;\n    if (!tree.length) {\n        done(undefined, []);\n        return;\n    }\n    const next = (err, res) => {\n        if (err) {\n            done(err);\n            return;\n        }\n        ret.push(res);\n        if (++i < tree.length) {\n            exec(tree[i], scope, context, next);\n        }\n        else {\n            done(undefined, ret);\n        }\n    };\n    exec(tree[i], scope, context, next);\n}\nfunction asyncDone(callback) {\n    return new Promise((resolve, reject) => {\n        callback((err, result) => {\n            if (err)\n                reject(err);\n            else\n                resolve({ result });\n        });\n    });\n}\nfunction syncDone(callback) {\n    let result;\n    let err;\n    callback((e, r) => {\n        err = e;\n        result = r;\n    });\n    // console.log(result);\n    if (err)\n        throw err;\n    return { result };\n}\nasync function execAsync(tree, scope, context, done) {\n    let result;\n    try {\n        if (tree instanceof Prop) {\n            result = tree.context[tree.prop];\n        }\n        else if (Array.isArray(tree)) {\n            let res = [];\n            for (let item of tree) {\n                const ret = (await asyncDone((done) => execAsync(item, scope, context, done))).result;\n                if (ret instanceof ExecReturn) {\n                    res.push(ret.result);\n                    if (ret.returned || ret.breakLoop || ret.continueLoop) {\n                        res = ret;\n                        break;\n                    }\n                }\n                else {\n                    res.push(ret);\n                }\n            }\n            result = res;\n        }\n        else if (!(tree instanceof Lisp)) {\n            result = tree;\n        }\n        else if (tree.op === 'arrowFunc' || tree.op === 'function' || tree.op === 'loop' || tree.op === 'try') {\n            result = (await asyncDone((d) => ops.get(tree.op)(execAsync, d, tree.a, tree.b, undefined, context, scope))).result;\n        }\n        else if (tree.op === 'if') {\n            result = (await asyncDone(async (d) => ops.get(tree.op)(execAsync, d, tree.a, (await asyncDone((done) => execAsync(tree.b, scope, context, done))).result, undefined, context, scope))).result;\n        }\n        else if (tree.op === 'await') {\n            result = await (await asyncDone((done) => execAsync(tree.a, scope, context, done))).result;\n        }\n        else {\n            let obj = (await asyncDone((done) => execAsync(tree.a, scope, context, done))).result;\n            let a = obj instanceof Prop ? (obj.context ? obj.context[obj.prop] : undefined) : obj;\n            let bobj = (await asyncDone((done) => execAsync(tree.b, scope, context, done))).result;\n            let b = bobj instanceof Prop ? (bobj.context ? bobj.context[bobj.prop] : undefined) : bobj;\n            if (ops.has(tree.op)) {\n                result = (await asyncDone((d) => ops.get(tree.op)(execAsync, d, a, b, obj, context, scope, bobj))).result;\n            }\n            else {\n                throw new SyntaxError('Unknown operator: ' + tree.op);\n            }\n        }\n        done(undefined, result);\n    }\n    catch (err) {\n        done(err);\n    }\n}\nfunction syncDoneExec(tree, scope, context) {\n    let result;\n    let err;\n    execSync(tree, scope, context, (e, r) => {\n        err = e;\n        result = r;\n    });\n    if (err)\n        throw err;\n    return { result };\n}\nfunction syncDoneOp(op, a, b, obj, context, scope, bobj) {\n    let result;\n    let err;\n    ops.get(op)(execSync, (e, r) => {\n        err = e;\n        result = r;\n    }, a, b, obj, context, scope, bobj);\n    if (err)\n        throw err;\n    return { result };\n}\nfunction execSync(tree, scope, context, done) {\n    let result;\n    if (tree instanceof Prop) {\n        result = tree.context[tree.prop];\n    }\n    else if (Array.isArray(tree)) {\n        let res = [];\n        for (let item of tree) {\n            const ret = syncDoneExec(item, scope, context).result;\n            if (ret instanceof ExecReturn) {\n                res.push(ret.result);\n                if (ret.returned || ret.breakLoop || ret.continueLoop) {\n                    res = ret;\n                    break;\n                }\n            }\n            else {\n                res.push(ret);\n            }\n        }\n        result = res;\n    }\n    else if (!(tree instanceof Lisp)) {\n        result = tree;\n    }\n    else if (tree.op === 'arrowFunc' || tree.op === 'function' || tree.op === 'loop' || tree.op === 'try') {\n        result = syncDoneOp(tree.op, tree.a, tree.b, undefined, context, scope).result;\n    }\n    else if (tree.op === 'if') {\n        result = syncDoneOp(tree.op, tree.a, syncDoneExec(tree.b, scope, context).result, undefined, context, scope).result;\n    }\n    else if (tree.op === 'await') {\n        throw new SandboxError(\"Illegal use of 'await', must be inside async function\");\n    }\n    else {\n        let obj = syncDoneExec(tree.a, scope, context).result;\n        let a = obj instanceof Prop ? (obj.context ? obj.context[obj.prop] : undefined) : obj;\n        let bobj = syncDoneExec(tree.b, scope, context).result;\n        let b = bobj instanceof Prop ? (bobj.context ? bobj.context[bobj.prop] : undefined) : bobj;\n        if (ops.has(tree.op)) {\n            result = syncDoneOp(tree.op, a, b, obj, context, scope, bobj).result;\n        }\n        else {\n            throw new SyntaxError('Unknown operator: ' + tree.op);\n        }\n    }\n    done(undefined, result);\n}\nexport function executeTree(context, executionTree, scopes = [], inLoop = false) {\n    return syncDone((done) => executeTreeWithDone(execSync, done, context, executionTree, scopes, inLoop)).result;\n}\nexport async function executeTreeAsync(context, executionTree, scopes = [], inLoop = false) {\n    return (await asyncDone((done) => executeTreeWithDone(execAsync, done, context, executionTree, scopes, inLoop))).result;\n}\nfunction executeTreeWithDone(exec, done, context, executionTree, scopes = [], inLoop = false) {\n    const execTree = executionTree.tree;\n    if (!(execTree instanceof Array))\n        throw new SyntaxError('Bad execution tree');\n    context = { ...context, strings: executionTree.strings, literals: executionTree.literals, inLoop };\n    let scope = context.globalScope;\n    let s;\n    while (s = scopes.shift()) {\n        if (typeof s !== \"object\")\n            continue;\n        if (s instanceof Scope) {\n            scope = s;\n        }\n        else {\n            scope = new Scope(scope, s, null);\n        }\n    }\n    if (context.options.audit) {\n        context.auditReport = {\n            globalsAccess: new Set(),\n            prototypeAccess: {},\n        };\n    }\n    let i = 0;\n    let current = execTree[i];\n    const next = (err, res) => {\n        if (err) {\n            done(new err.constructor(err.message));\n            return;\n        }\n        if (res instanceof ExecReturn) {\n            done(undefined, res);\n            return;\n        }\n        if (current instanceof Lisp && current.op === 'return') {\n            done(undefined, new ExecReturn(context.auditReport, res, true));\n            return;\n        }\n        if (++i < execTree.length) {\n            current = execTree[i];\n            exec(current, scope, context, next);\n        }\n        else {\n            done(undefined, new ExecReturn(context.auditReport, undefined, false));\n        }\n    };\n    exec(current, scope, context, next);\n}\n","import { Scope, sandboxFunction, sandboxedEval, sandboxedSetTimeout, sandboxedSetInterval, executeTree, executeTreeAsync } from \"./executor.js\";\nimport { parse } from \"./parser.js\";\nexport class SandboxGlobal {\n    constructor(globals) {\n        if (globals === globalThis)\n            return globalThis;\n        for (let i in globals) {\n            this[i] = globals[i];\n        }\n    }\n}\nexport default class Sandbox {\n    constructor(globals = Sandbox.SAFE_GLOBALS, prototypeWhitelist = Sandbox.SAFE_PROTOTYPES, prototypeReplacements = new Map(), options = { audit: false }) {\n        const sandboxGlobal = new SandboxGlobal(globals);\n        this.context = {\n            sandbox: this,\n            globals,\n            prototypeWhitelist,\n            prototypeReplacements,\n            globalsWhitelist: new Set(Object.values(globals)),\n            options,\n            globalScope: new Scope(null, globals, sandboxGlobal),\n            sandboxGlobal,\n            evals: new Map(),\n            getSubscriptions: new Set(),\n            setSubscriptions: new WeakMap(),\n            changeSubscriptions: new WeakMap(),\n            inLoop: false\n        };\n        const func = sandboxFunction(this.context);\n        this.context.evals.set(Function, func);\n        this.context.evals.set(eval, sandboxedEval(func));\n        this.context.evals.set(setTimeout, sandboxedSetTimeout(func));\n        this.context.evals.set(setInterval, sandboxedSetInterval(func));\n    }\n    static get SAFE_GLOBALS() {\n        return {\n            Function,\n            console: {\n                debug: console.debug,\n                error: console.error,\n                info: console.info,\n                log: console.log,\n                table: console.table,\n                warn: console.warn\n            },\n            isFinite,\n            isNaN,\n            parseFloat,\n            parseInt,\n            decodeURI,\n            decodeURIComponent,\n            encodeURI,\n            encodeURIComponent,\n            escape,\n            unescape,\n            Boolean,\n            Number,\n            String,\n            Object,\n            Array,\n            Symbol,\n            Error,\n            EvalError,\n            RangeError,\n            ReferenceError,\n            SyntaxError,\n            TypeError,\n            URIError,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Intl,\n            JSON,\n            Math,\n            Date,\n        };\n    }\n    static get SAFE_PROTOTYPES() {\n        let protos = [\n            SandboxGlobal,\n            Function,\n            Boolean,\n            Number,\n            String,\n            Date,\n            RegExp,\n            Error,\n            Array,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Symbol,\n            Date,\n        ];\n        let map = new Map();\n        protos.forEach((proto) => {\n            map.set(proto, new Set());\n        });\n        map.set(Object, new Set([\n            'entries',\n            'fromEntries',\n            'getOwnPropertyNames',\n            'is',\n            'keys',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'toLocaleString',\n            'toString',\n            'valueOf',\n            'values'\n        ]));\n        return map;\n    }\n    subscribeGet(callback) {\n        this.context.getSubscriptions.add(callback);\n        return { unsubscribe: () => this.context.getSubscriptions.delete(callback) };\n    }\n    subscribeSet(obj, name, callback) {\n        const names = this.context.setSubscriptions.get(obj) || new Map();\n        this.context.setSubscriptions.set(obj, names);\n        const callbacks = names.get(name) || new Set();\n        names.set(name, callbacks);\n        callbacks.add(callback);\n        let changeCbs;\n        if (obj && obj[name] && typeof obj[name] === \"object\") {\n            changeCbs = this.context.changeSubscriptions.get(obj[name]) || new Set();\n            changeCbs.add(callback);\n            this.context.changeSubscriptions.set(obj[name], changeCbs);\n        }\n        return { unsubscribe: () => {\n                callbacks.delete(callback);\n                if (changeCbs)\n                    changeCbs.delete(callback);\n            } };\n    }\n    static audit(code, scopes = []) {\n        return new Sandbox(globalThis, new Map(), new Map(), {\n            audit: true,\n        }).executeTree(parse(code), scopes);\n    }\n    static parse(code) {\n        return parse(code);\n    }\n    executeTree(executionTree, scopes = []) {\n        return executeTree(this.context, executionTree, scopes);\n    }\n    executeTreeAsync(executionTree, scopes = []) {\n        return executeTreeAsync(this.context, executionTree, scopes);\n    }\n    compile(code) {\n        const executionTree = parse(code);\n        return (...scopes) => {\n            return this.executeTree(executionTree, scopes).result;\n        };\n    }\n    ;\n    compileAsync(code) {\n        const executionTree = parse(code);\n        return async (...scopes) => {\n            return (await this.executeTreeAsync(executionTree, scopes)).result;\n        };\n    }\n    ;\n}\n",null,null,null],"names":["lispTypes","Map","ParseError","Error","constructor","message","code","Lisp","obj","op","a","b","If","t","f","KeyVal","key","val","SpreadObject","item","SpreadArray","expectTypes","types","next","splitter","split","inlineIf","else","assignment","assignModify","assign","incrementerBefore","incrementerAfter","expEdge","call","modifier","not","inverse","negative","positive","typeof","delete","dot","arrayProp","prop","value","createObject","createArray","number","string","literal","boolean","null","und","arrowFunctionSingle","arrowFunction","inlineFunction","group","NaN","Infinity","command","void","await","new","initialize","spreadObject","spreadArray","expEnd","expStart","return","for","do","while","loopAction","if","try","function","closings","closingsRegex","okFirstChars","restOfExp","part","tests","quote","firstOpening","isStart","escape","done","i","length","char","skip","substring","sub","test","SyntaxError","Math","min","setLispType","fn","forEach","type","set","closingsCreate","strings","res","expect","ctx","extract","arg","end","push","l","funcFound","lispify","pop","map","e","str","trimStart","exec","replace","lispTree","includes","found","quoteCount","condition","trueBlock","elseBlock","trim","slice","parse","literals","undefined","index","matches","match","JSON","constants","parseInt","isArrow","isReturn","argPos","isAsync","args","unshift","ended","startsWith","func","iteratorRegex","indexOf","startStep","beforeStep","checkFirst","step","body","extract2","k","iterator","shift","concat","start","extract3","catchReg","catchRes","exception","catchBody","argsString","j","startingExecpted","lastType","expected","get","skipStrings","js","currJs","extractSkip","reg","num","Array","from","len","toString","tree","parts","pos","filter","Boolean","subExpressions","defined","exprs","last","flat","ExecReturn","auditReport","result","returned","breakLoop","continueLoop","Prop","context","isConst","isGlobal","isVariable","reservedWords","Set","VarType","Scope","parent","vars","functionThis","const","let","isFuncScope","allVars","Object","keys","var","globals","add","functionScope","has","hasOwnProperty","ReferenceError","TypeError","SandboxError","declare","sandboxFunction","SandboxFunction","params","parsed","createFunction","sandboxedFunctions","WeakSet","argNames","scope","name","sandboxedObject","executeTree","createFunctionAsync","executeTreeAsync","defineProperty","writable","sandboxedEval","sandboxEval","sandboxedSetTimeout","sandboxSetTimeout","handler","setTimeout","sandboxedSetInterval","sandboxSetInterval","setInterval","assignCheck","_a","_b","_c","_d","changeSubscriptions","cb","setSubscriptions","arrayChange","splice","reverse","sort","copyWithin","literalRegex","ops2","sandboxGlobal","options","audit","globalsAccess","rep","evals","globalThis","globalScope","getSubscriptions","Number","String","isFunction","prototypeAccess","prot","prototype","getPrototypeOf","whitelist","prototypeWhitelist","prototypeReplacements","size","constuctor","g","globalsWhitelist","forbidMethodCalls","execMany","err","vals","stringify","cache","recurse","x","y","change","changed","added","removed","startIndex","deleteCount","endIndex","items","resnums","processed","reses","$$","$","bobj","loop","outScope","execAsync","asyncDone","d","syncDone","inLoop","sc","ops","ret","callback","Promise","resolve","reject","r","isArray","syncDoneExec","execSync","syncDoneOp","executionTree","scopes","executeTreeWithDone","execTree","s","current","SandboxGlobal","Sandbox","SAFE_GLOBALS","SAFE_PROTOTYPES","sandbox","values","WeakMap","Function","eval","console","debug","error","info","log","table","warn","isFinite","isNaN","parseFloat","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","Symbol","EvalError","RangeError","URIError","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Intl","Date","protos","RegExp","proto","subscribeGet","unsubscribe","subscribeSet","names","callbacks","changeCbs","compile","compileAsync","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDialogElement","HTMLDivElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","HTMLElement","globalAllowedAtttributes","sanitizeType","allowedAttributes","element","attributes","HTMLAnchorElement","HTMLAreaElement","el","HTMLButtonElement","allowedInputs","HTMLInputElement","HTMLSelectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLTextAreaElement","HTMLScriptElement","HTMLStyleElement","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","regHrefJS","regValidSrc","regSystemAtt","srcAttributes","santizeAttribute","attName","attValue","preprocess","allowed","toLowerCase","setAttribute","isJs","hasAttribute","sanitizeHTML","staticHtml","DocumentFragment","remove","att","nodeValue","nodeName","removeAttribute","children","elementStorage","arrs","arr","coll","defaultDelegateObject","on","elem","event","$el","wrap","off","one","ElementCollection","$elements","selector","some","every","compareDocumentPosition","unique","toSet","toArray","is","sel","querySelectorAll","parents","contains","find","c","events","opt","objectOrProp","ev","h","wrapEvent","store","getStore","evStore","addEventListener","removeEventListener","clear","trigger","eventType","detail","bubbles","cancelable","CustomEvent","dispatchEvent","evcb","evt","delegate","that","del","all","once","started","evs","subs","cbs","target","listeners","lts","parentElement","eq","handlers","stoppedPropagation","stoppedImmediatePropagation","cbev","click","addClass","keyCode","currentTarget","getAttribute","attr","tabindex","role","hover","handlerIn","handlerOut","v","removeAttr","selected","checked","files","multiple","$elems","text","scrollTop","scrollLeft","label","data","removeData","toggleClass","removeClass","force","isObject","className","classList","toggle","hasClass","nameArr","identifier","ind","first","prevAll","nextElementSibling","nextUntil","propElem","nextAll","prev","previousElementSibling","prevUntil","siblings","firstElementChild","$document","document","documentElement","originalEvent","isEqEvent","sip","stopImmediatePropagation","sp","stopPropagation","props","stopppedImmediatePropagation","defineProperties","NodeList","HTMLCollection","Element","selectors","$context","elems","doFilter","doSort","cElem","cont","collection","includeFirst","stopAt","each","wasSet","n","object","objArr","defaultValue","deleteStore","allowedGlobals","allowedPrototypes","regVarName","regKeyValName","isIterable","html","content","innerHTML","contentElem","detach","preprocessHTML","currentSubs","unsubNested","processHTML","appendChild","run","getScopes","textContent","createElement","FileList","File","ElementScope","$dispatch","$watch","subUnsubs","watch","getRootElement","RootScope","$wrap","Component","components","defineComponent","comp","init","component","runs","getScope","root","newScope","calls","timer","toCall","watchRun","toWatch","watchGets","lastVal","update","now","count","digest","list","temp","sandboxCache","codes","directives","defineDirective","isContentEditable","reset","pushScope","$$value","form","$form","Node","runDirective","directive","walkerInstance","execSteps","ready","runNested","template","walkTree","unsub","parentSubs","$element","comment","createComment","ifElem","at","before","nestedSubs","cloneNode","after","exp","join","varsExp","varMatch","doubleMatch","repeat","forSubs","$index","nestedScopes","prevReady","elementScopeAdded","letter","toUpperCase","SVGElement","style","$event","original","outerHTML","nodeType","walkText","nodes","endsWith","placeholder","createTextNode","childNodes","quotes","endJs","closing","inJs","strs"],"mappings":"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"}